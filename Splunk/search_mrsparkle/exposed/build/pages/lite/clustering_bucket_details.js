webpackJsonp([19],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/lite")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("routers/ClusteringBucketDetails"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(ClusteringBucketDetailsRouter,router_utils){new ClusteringBucketDetailsRouter;router_utils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},571:function(module,exports){module.exports="<%= _('You must restart Splunk for the').t() %> <%-mode%>  <%= _('node to become active.').t() %>\n<% if(mode==\"peer\") { %>\n<p><%= _('Optional next steps after restart:').t() %></p>\n<ol>\n    <li><%= _('Configure the indexes for the peers.').t() %><br>\n        <div style=\"color:#999; margin-top:5px; margin-bottom:10px;\">\n            <%= _('The index file determines the peers set of indexes and the size and attributes of its buckets. This file must be identical across all peer nodes. Peer index files are edited and distributed from the Master Node. ').t() %>\n            <a href=\"<%=learnmoreIndexesLink%>\" class=\"external\" target=\"_blank\"><%= _('Learn More').t() %></a>\n        </div>\n    </li>\n    <li><%= _('Use forwarders to get data to this peer.').t() %><br>\n        <div style=\"color:#999; margin-top:5px; margin-bottom:10px;\">\n            <%= _('There are two reasons for using forwarders to send data to your cluster. 1. To ensure that all incoming data gets indexed. 2. To handle potential node failure. ').t() %>\n            <a href=\"<%=learnmoreForwardersLink%>\" class=\"external\" target=\"_blank\"><%= _('Learn More').t() %></a>\n        </div>\n    </li>\n</ol>\n<% } %>\n"},572:function(module,exports){module.exports='<div class="start" style="display: none;">\n    <form action="" method="get" class="form" id="node_type">\n        <label class="radio" for="master-radio">\n            <input type="radio" name="node-type" value="master" id="master-radio" checked> <%= _(\'Master node\').t() %>\n        </label>\n        <span class="help-block"><%= _(\'The master node coordinates the activities of the peer nodes. It does not store or replicate data (aside from its own internal data).\').t() %></span>\n\n        <label class="radio" for="peer-radio">\n            <input type="radio" name="node-type" value="peer" id="peer-radio"> <%= _(\'Peer node\').t() %>\n        </label>\n        <span class="help-block"><%= _(\'Peer nodes receive and index incoming data. They also replicate data from other nodes in the cluster.\').t() %></span>\n\n        <label class="radio" for="search-radio">\n            <input type="radio" name="node-type" value="search" id="search-radio"> <%= _(\'Search head node\').t() %>\n        </label>\n        <span class="help-block"><%= _(\'The search head manages searches across one or more clusters.\').t() %></span>\n    </form>\n</div>\n'},573:function(module,exports){module.exports='\n<div class="section-header section-padded">\n    <h2 class="section-title"><%= _(\'Indexer Clustering\').t() %></h2>\n    <p class="section-subtitle">\n        <%= _(\'Indexer Clusters are groups of Splunk indexers configured to keep multiple copies of data. This increases data <br> availability, data fidelity, data redundancy, and search performance. Indexer clustering is a complex feature, we recommend reading the<br> documentation before enabling indexer clustering.\').t() %>\n        <a href="<%= learnmoreLink %>" title="<%=_(\'Learn More\').t() %>" class="external" target="_blank"><%= _(\'Learn More\').t() %></a>\n    </p>\n    <button id="enable_clustering" class="btn btn-primary"><%= _(\'Enable indexer clustering\').t() %></button>\n</div>\n'},601:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".peers{display:inline-block;margin-left:10px}.peers .controls-block{height:15px}",""])},602:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".peers{display:inline-block;margin-left:10px}.peers .controls-block{height:15px}",""])},603:function(module,exports){module.exports="<div>\n  <%= _('Excess buckets from ').t() %>\n  <span style=\"font-weight: bold;\"><%= indexName %></span>\n  <%= _(' will be removed.').t() %>\n</div>\n<div>&nbsp;</div>\n<div>\n  <%= _('This is an asynchronous operation. Refresh the page to get the update on bucket removing activities. Do you want to continue?').t() %>\n</div>"},604:function(module,exports){module.exports='<div class="remove-excess-buckets section-padded">\n  <p>\n    <%= _(\'Here is a list of indexes with buckets exceeding the replication or search factor.\').t() %>\n  </p>\n  <a class="btn btn-primary remove-all-excess-buckets-button">\n    <%= _(\'Remove All Excess Buckets\').t() %>\n  </a>\n  <span class="message"></span>\n</div>\n<!--<div class="divider">-->\n<div class="list-excess-buckets">\n  <div class="section-controls" style="overflow: auto"><!-- style overflow auto is a workaround for current version of Firefox --></div>\n  <table class="table table-chrome table-striped table-excess-buckets">\n    <tbody></tbody>\n  </table>\n</div>\n\n'},605:function(module,exports){module.exports='<div class="section-padded">\n  <p>\n    <%= _(\'Here is a list of buckets waiting to be fixed.\').t() %>\n  </p>\n  <span class="fixup-level-select">\n    <%= _(\'Select Fix-up Category: \').t() %>\n  </span>\n  <span class="fixup-time-select">\n    <%= _(\'Time in Fixup More Than: \').t() %>\n  </span>\n</div>\n<div class="control-section"></div>\n<table class="table table-chrome table-striped table-row-expanding table-listing">\n  <!--<thead></thead>-->\n  <tbody></tbody>\n</table>'},606:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".fixup-time{display:inline-block}.fixup-time .controls-block{height:15px}.fixup-time-select{margin-left:20px}",""])},607:function(module,exports){module.exports='<div class="section-padded">\n  <%= _(\'Here is a list of buckets being fixed.\').t() %>\n</div>\n<div class="section-controls"></div>\n<table class="table table-chrome table-striped">\n  <tbody></tbody>\n</table>'},608:function(module,exports){module.exports='<div class="bucket-details section-padded section-header">\n  <h2 class="section-title">\n    <i class="icon-data"></i>\n    <%= _("Bucket Status").t() %>\n  </h2>\n  <p class="section-description">\n    <%= _("Buckets in fix-up status and excess buckets are listed here.").t() %>\n    <a href=\'<%=learnMoreLink%>\' class=\'external\' target=\'_blank\'><%= _(\'Learn More\').t() %></a>\n  </p>\n  <a href="./clustering?tab=indexes">\n    <i class="icon-chevron-left icon-no-underline"></i><span><%- _("Back to Master Node").t() %></span>\n  </a>\n</div>\n<!--<div class="divider">-->\n<div class="index-dropdown section-controls"><span class="index-dropdown-label">Select Index: </span></div>\n<div class="bucket-details-tabbed-view-stack"></div>'},609:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,"table{word-wrap:break-word}.tab-content{overflow:visible}.section-controls{padding-left:20px;padding-right:20px}.shared-tablecaption-input{display:inline-block}.message{padding-left:10px}.index-dropdown{padding-top:10px;padding-bottom:10px}.index-dropdown-label{font-weight:700}.section-header{padding-bottom:10px}.clustering-master-bucketdetails-allbuckets,.clustering-master-bucketdetails-excessbuckets,.clustering-master-bucketdetails-fixupbuckets{background-color:#fff}",""])},"views/clustering/config/NodeType":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/Modal"),__webpack_require__(572)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,BaseView,Modal,ConfigTemplate){return BaseView.extend({moduleId:module.id,template:ConfigTemplate,initialize:function(options){BaseView.prototype.initialize.call(this,options)},events:{"click .btn-primary":function(e){var mode=$("input[name=node-type]:checked","#node_type").val();this.model.wizard.set("mode",mode),this.model.wizard.trigger("next"),e.preventDefault()},"click a.cancel":function(e){this.model.wizard.trigger("cancel"),e.preventDefault()}},render:function(){this.$el.html(Modal.TEMPLATE);var title="disabled"==this.model.clusterConfig.entry.content.get("mode")?_("Enable Clustering").t():_("Edit Node Type").t();this.$(Modal.HEADER_TITLE_SELECTOR).html(title),this.$(Modal.BODY_SELECTOR).append(Modal.FORM_HORIZONTAL);var html=this.compiledTemplate();return this.$(".form-horizontal").append($(html)),this.$(".start").show(),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_NEXT),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/cluster/Config":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("models/StaticIdSplunkDBase")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,BaseModel){return BaseModel.extend({url:"cluster/config",initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)},defaults:function(){var baseDefaults=BaseModel.prototype.defaults.apply(this,arguments);return _.extend({},baseDefaults,{"ui.master_uri":"","ui.secret":""})},transposeToRest:function(){this.entry.content.set("master_uri",this.get("ui.master_uri")),this.entry.content.set("secret",this.get("ui.secret")),this.entry.content.set("replication_factor",this.get("ui.replication_factor")),this.entry.content.set("search_factor",this.get("ui.search_factor")),this.entry.content.set("replication_port",this.get("ui.replication_port")),this.entry.content.set("mode",this.get("ui.mode")),this.entry.content.set("cluster_label",this.get("ui.cluster_label"))},transposeFromRest:function(){var masteruri=this.entry.content.get("master_uri");"?"!=masteruri||(masteruri="https://");var attr={"ui.master_uri":masteruri,"ui.secret":this.entry.content.get("secret"),"ui.replication_factor":this.entry.content.get("replication_factor"),"ui.search_factor":this.entry.content.get("search_factor"),"ui.replication_port":this.entry.content.get("replication_port"),"ui.cluster_label":this.entry.content.get("cluster_label")};this.set(attr)}},{id:"cluster/config/config"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/config/MasterSetup":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/FlashMessages"),__webpack_require__("views/shared/controls/ControlGroup")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,Modal,FlashMessagesView,ControlGroup){return BaseView.extend({moduleId:module.id,initialize:function(options){BaseView.prototype.initialize.call(this,options),this.children.flashMessages=new FlashMessagesView({model:this.model.clusterConfig}),this.model.clusterConfig.transposeFromRest(),this.children.repFactor=new ControlGroup({className:"cluster-rep-factor control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.replication_factor",model:this.model.clusterConfig,save:!1},label:_("Replication Factor").t(),help:_("The number of copies of raw data that you want the cluster to maintain. A higher replication factor protects against loss of data if peer nodes fail.").t(),helpClass:"hint"}),this.children.searchFactor=new ControlGroup({className:"cluster-search-factor control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.search_factor",model:this.model.clusterConfig,save:!1},label:_("Search Factor").t(),help:_("The number of searchable copies of data the cluster maintains. A higher search factor speeds up the time to recover lost data at the cost of disk space. Must be less than or equal to Replication Factor.").t(),helpClass:"hint"}),this.children.secret=new ControlGroup({className:"cluster-secret control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{placeholder:"Optional",modelAttribute:"ui.secret",model:this.model.clusterConfig,save:!1,password:!0},label:_("Security Key").t(),help:_("This key authenticates communication between the master and the peers and search heads.").t(),helpClass:"hint"}),this.children.clusterLabel=new ControlGroup({className:"cluster-label control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{placeholder:"Optional",modelAttribute:"ui.cluster_label",model:this.model.clusterConfig,save:!1},label:_("Cluster Label").t(),help:_("Name your cluster using this field.  This label is also used to identify this cluster in the Monitoring Console.").t(),helpClass:"hint"})},events:{"click .back":function(e){this.model.wizard.trigger("back"),e.preventDefault()},"click .btn-primary":function(e){var that=this;e.preventDefault(),this.model.clusterConfig.set("ui.mode","master"),this.model.clusterConfig.transposeToRest(),this.model.clusterConfig.save({wait:!0,mode:this.model.clusterConfig.entry.content.get("mode"),replication_factor:this.model.clusterConfig.entry.content.get("replication_factor"),search_factor:this.model.clusterConfig.entry.content.get("search_factor"),secret:this.model.clusterConfig.entry.content.get("secret"),cluster_label:this.model.clusterConfig.entry.content.get("cluster_label")},{patch:!0}).done(function(){that.model.wizard.trigger("next")}).fail(function(){that.model.wizard.trigger("submitFail")})}},render:function(){this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Master Node Configuration").t()),this.$(Modal.BODY_SELECTOR).append(Modal.FORM_HORIZONTAL),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.flashMessages.render().el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.repFactor.render().$el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.searchFactor.render().$el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.secret.render().$el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.clusterLabel.render().$el);var $saveBtn=$(Modal.BUTTON_SAVE);return"master"==this.model.wizard.get("startPage")?(this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),$saveBtn.text(_("Save changes").t())):(this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_BACK),this.$(Modal.FOOTER_SELECTOR).find(".modal-btn-back").addClass("pull-left"),$saveBtn.text(_("Enable Master Node").t())),this.$(Modal.FOOTER_SELECTOR).append($saveBtn),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/config/PeerSetup":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/FlashMessages"),__webpack_require__("views/shared/controls/ControlGroup")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,Modal,FlashMessagesView,ControlGroup){return BaseView.extend({moduleId:module.id,initialize:function(options){BaseView.prototype.initialize.call(this,options),this.children.flashMessages=new FlashMessagesView({model:this.model.clusterConfig}),this.model.clusterConfig.transposeFromRest(),this.children.masteruri=new ControlGroup({className:"cluster-masterip control-group",controlType:"Text",controlClass:"controls-block",helpClass:"hint",controlOptions:{modelAttribute:"ui.master_uri",model:this.model.clusterConfig,save:!1},label:_("Master URI").t(),help:_("E.g. https://10.152.31.202:8089").t()}),this.children.repPort=new ControlGroup({className:"cluster-port control-group",controlType:"Text",controlClass:"controls-block",helpClass:"hint",controlOptions:{modelAttribute:"ui.replication_port",model:this.model.clusterConfig,save:!1},label:_("Peer replication port").t(),help:_("The port peer nodes use to stream data to each other (Eg: 8080).").t()}),this.children.secret=new ControlGroup({className:"cluster-secret control-group",controlType:"Text",controlClass:"controls-block",helpClass:"hint",controlOptions:{placeholder:"Optional",modelAttribute:"ui.secret",model:this.model.clusterConfig,save:!1,password:!0},label:_("Security key").t(),help:_("This key authenticates communication between the master and the peers and search heads.").t()})},events:{"click .back":function(e){this.model.wizard.trigger("back"),e.preventDefault()},"click .btn-primary":function(e){var that=this;e.preventDefault(),this.model.clusterConfig.set("ui.mode","slave"),this.model.clusterConfig.transposeToRest(),this.model.clusterConfig.save({wait:!0,mode:this.model.clusterConfig.entry.content.get("mode"),master_uri:this.model.clusterConfig.entry.content.get("master_uri"),replication_port:this.model.clusterConfig.entry.content.get("replication_port"),secret:this.model.clusterConfig.entry.content.get("secret")},{patch:!0}).done(function(){that.model.wizard.trigger("next")}).fail(function(){that.model.wizard.trigger("submitFail")})}},render:function(){return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Peer node configuration").t()),this.$(Modal.BODY_SELECTOR).append(Modal.FORM_HORIZONTAL),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.flashMessages.render().el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.masteruri.render().$el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.repPort.render().$el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.secret.render().$el),"peer"!==this.model.wizard.get("startPage")&&(this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_BACK),this.$(Modal.FOOTER_SELECTOR).find(".modal-btn-back").addClass("pull-left")),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn next btn-primary modal-btn-primary">'+_("Enable peer node").t()+"</a>"),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/config/SearchHeadSetup":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/FlashMessages"),__webpack_require__("views/shared/controls/ControlGroup")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,Modal,FlashMessagesView,ControlGroup){return BaseView.extend({moduleId:module.id,initialize:function(options){BaseView.prototype.initialize.call(this,options),this.children.flashMessages=new FlashMessagesView({model:this.model.clusterConfig}),this.model.clusterConfig.transposeFromRest(),this.children.masteruri=new ControlGroup({className:"cluster-masterip control-group",controlType:"Text",controlClass:"controls-block",helpClass:"hint",controlOptions:{modelAttribute:"ui.master_uri",model:this.model.clusterConfig,save:!1},label:_("Master URI").t(),help:_("E.g. https://10.152.31.202:8089 This can be found in the Master Node dashboard.").t()}),this.children.secret=new ControlGroup({className:"cluster-secret control-group",controlType:"Text",controlClass:"controls-block",helpClass:"hint",controlOptions:{modelAttribute:"ui.secret",model:this.model.clusterConfig,save:!1,password:!0},label:_("Security key").t(),help:_("This key authenticates communication between the master and search head.").t()})},events:{"click .back":function(e){this.model.wizard.trigger("back"),e.preventDefault()},"click .btn-primary":function(e){var that=this;e.preventDefault(),this.model.clusterConfig.set("ui.mode","searchhead"),this.model.clusterConfig.transposeToRest(),this.model.clusterConfig.save({wait:!0}).done(function(){that.model.wizard.trigger("next")}).fail(function(){that.model.wizard.trigger("submitFail")})}},render:function(){return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Search head node configuration").t()),this.$(Modal.BODY_SELECTOR).append(Modal.FORM_HORIZONTAL),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.flashMessages.render().el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.masteruri.render().$el),this.$(Modal.BODY_FORM_SELECTOR).append(this.children.secret.render().$el),"searchhead"!==this.model.wizard.get("startPage")&&(this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_BACK),this.$(Modal.FOOTER_SELECTOR).find(".modal-btn-back").addClass("pull-left")),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn next btn-primary modal-btn-primary">'+_("Enable search head node").t()+"</a>"),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"collections/services/cluster/master/Fixups":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/services/cluster/master/Fixup"),__webpack_require__("collections/SplunkDsBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(Model,SplunkDsBaseCollection){return SplunkDsBaseCollection.extend({url:"cluster/master/fixup",model:Model,initialize:function(){SplunkDsBaseCollection.prototype.initialize.apply(this,arguments)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("models/classicurl"),__webpack_require__("views/Base"),__webpack_require__("views/clustering/master/bucketdetails/FixupBuckets"),__webpack_require__("views/clustering/master/bucketdetails/ExcessBuckets"),__webpack_require__("views/clustering/master/bucketdetails/AllBuckets"),__webpack_require__("views/shared/controls/SyntheticSelectControl"),__webpack_require__("views/shared/tabcontrols/TabbedViewStack"),__webpack_require__("uri/route"),__webpack_require__(608),__webpack_require__("views/clustering/master/bucketdetails/Master.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,classicurl,BaseView,FixupBucketsTab,ExcessBucketsTab,AllBucketsTab,SyntheticSelectControl,TabbedViewStack,route,Template,css){var MAPPING_TABNAME_TABINDEX={"all-buckets-tab":0,"fixup-buckets-tab":1,"excess-buckets-tab":2};return BaseView.extend({moduleId:module.id,template:Template,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.bucketDetailsMediator=new Backbone.Model,this.indexCollectionDfd=$.Deferred(),this.children.fixupTab=new FixupBucketsTab({label:_("Fixup Tasks - Pending (0)").t(),tabClassName:"fixup-buckets-tab",classicurlDfd:this.options.classicurlDfd,collection:{fixupSearchFactorCollection:this.collection.fixupSearchFactorCollection,fixupReplicationFactorCollection:this.collection.fixupReplicationFactorCollection,fixupGenerationCollection:this.collection.fixupGenerationCollection}}),this.children.excessTab=new ExcessBucketsTab({label:_("Indexes With Excess Buckets (0)").t(),tabClassName:"excess-buckets-tab",collection:this.collection.indexCollection}),this.children.allbucketsTab=new AllBucketsTab({label:_("Fixup Tasks - In Progress (0)").t(),tabClassName:"all-buckets-tab",collection:this.collection.bucketCollection}),this.tabbedViewStack=new TabbedViewStack({panes:[this.children.allbucketsTab,this.children.fixupTab,this.children.excessTab],selectedIndex:0}),$.when(this.options.tabDfd,this.options.classicurlDfd).done(function(){var tabName=this.bucketDetailsMediator.get("tab");tabName&&this.tabbedViewStack.setTabSelectedIndex(MAPPING_TABNAME_TABINDEX[tabName])}.bind(this)),this.listenTo(this.tabbedViewStack.children.tabBar,"tabClick",this.updateMediatorTab),this.listenTo(this.bucketDetailsMediator,"change",this._mediatorChangeHandler),this.listenTo(this.collection.indexCollectionForMainDropdown,"change reset",this._renderIndexDropdown)},events:{"click .fixup-buckets-tab":"updateMediatorTabFixup","click .excess-buckets-tab":"updateMediatorTabExcess","click .all-buckets-tab":"updateMediatorTabAllBuckets"},updateMediatorTabFixup:function(){this.bucketDetailsMediator.set("tab","fixup-buckets-tab")},updateMediatorTabExcess:function(){this.bucketDetailsMediator.set("tab","excess-buckets-tab")},updateMediatorTabAllBuckets:function(){this.bucketDetailsMediator.set("tab","all-buckets-tab")},_renderIndexDropdown:function(){var dropdownItems=[{label:"all",value:"*"}].concat(this.collection.indexCollectionForMainDropdown.map(function(model){var label=model.entry.get("name"),value=label;return{label:label,value:value}}));this.children.indexDropdown=new SyntheticSelectControl({toggleClassName:"btn-group btn-pill",menuWidth:"narrow",model:this.bucketDetailsMediator,modelAttribute:"index",items:dropdownItems}),this.indexCollectionDfd.resolve()},_mediatorChangeHandler:function(model){this.updateClassicUrlFromParams();var indexCollectionSearch=this.collection.indexCollection.fetchData.get("search"),indexSearch=model.get("index")||"*";indexCollectionSearch=indexCollectionSearch?indexCollectionSearch.replace(/name=[^\s]*/,"name="+indexSearch):"name="+indexSearch,this.collection.indexCollection.fetchData.set({search:indexCollectionSearch,offset:0});var index=model.get("index");if(index){var bucketFilter=_.clone(this.collection.bucketCollection.fetchData.get("filter"));"*"==index?(delete bucketFilter.index,this.collection.fixupReplicationFactorCollection.fetchData.unset("index"),this.collection.fixupSearchFactorCollection.fetchData.unset("index"),this.collection.fixupGenerationCollection.fetchData.unset("index")):(bucketFilter.index=index,this.collection.fixupReplicationFactorCollection.fetchData.set("index",index),this.collection.fixupSearchFactorCollection.fetchData.set("index",index),this.collection.fixupGenerationCollection.fetchData.set("index",index)),this.collection.bucketCollection.fetchData.set("filter",bucketFilter)}},updateClassicUrlFromParams:function(){_.debounce(function(){classicurl.save(this.bucketDetailsMediator.attributes)}.bind(this),0)()},updateParamsFromClassicUrl:function(){var attrs=_(classicurl.attributes).defaults(this.bucketDetailsMediator.attributes);this.bucketDetailsMediator.set(attrs)},render:function(){var root=this.model.application.get("root"),locale=this.model.application.get("locale"),learnMoreLink=route.docHelp(root,locale,"learnmore.clustering.bucketDetails");return this.$el.html(this.compiledTemplate({learnMoreLink:learnMoreLink,countFixingBuckets:0,countFixup:0,countIndex:0})),this.tabbedViewStack.render().$el.appendTo(this.$el.find(".bucket-details-tabbed-view-stack")),this.children.allbucketsTab.updateTabCount(this.tabbedViewStack.$el),this.children.fixupTab.updateTabCount(this.tabbedViewStack.$el),this.children.excessTab.updateTabCount(this.tabbedViewStack.$el),$.when(this.indexCollectionDfd).done(function(){this.$el.find(".index-dropdown").append(this.children.indexDropdown.render().$el)}.bind(this)),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/ExcessBuckets":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("util/splunkd_utils"),__webpack_require__("require/backbone"),__webpack_require__("views/Base"),__webpack_require__("views/shared/CollectionPaginator"),__webpack_require__("views/shared/delegates/ColumnSort"),__webpack_require__("views/shared/TableHead"),__webpack_require__("views/clustering/master/bucketdetails/components/TableRow"),__webpack_require__("views/clustering/master/bucketdetails/components/ConfirmDialog"),__webpack_require__("mixins/ViewPane"),__webpack_require__(604)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,SplunkdUtils,Backbone,BaseView,Paginator,ColumnSort,TableHead,TableRow,ConfirmDialog,ViewPaneMixin,Template){var REMOVE_EXCESS_BUCKETS_URL="/services/cluster/master/control/control/prune_index?output_mode=json",ExcessBucketsView=BaseView.extend({moduleId:module.id,template:Template,initialize:function(options){BaseView.prototype.initialize.apply(this,arguments),this.viewPaneInitialize(options),this._initializeRender(),this.listenTo(this.collection,"change reset",this.render),this._confirmDialogModel=new Backbone.Model,this.listenTo(this._confirmDialogModel,"confirmed",function($target,indexName){this.children.confirmDialog.hide(),this.removeExcessBuckets($target,indexName)})},events:{"click .remove-all-excess-buckets-button":function(e){this._showConfirmDialog($(e.target))},"click .remove-excess-buckets-by-index":function(e){var indexName=$(e.target).data("index-name");this._showConfirmDialog($(e.target),indexName)}},_flattenAttributes:function(element){var attributes=[];if(!element.entry||!element.entry.content)return attributes;attributes.push(element.entry.get("name")),attributes.push(element.entry.content.get("buckets_with_excess_copies")),attributes.push(element.entry.content.get("buckets_with_excess_searchable_copies")),attributes.push(element.entry.content.get("total_excess_bucket_copies")),attributes.push(element.entry.content.get("total_excess_searchable_copies"));var $div=$("<div>").append($("<a>").html(_("Remove").t()).addClass("btn btn-mini remove-excess-buckets-by-index").attr("data-index-name",element.entry.get("name"))).append($("<span>").addClass("message"));
return attributes.push($div),attributes},_showConfirmDialog:function($target,indexName){this.children.confirmDialog=new ConfirmDialog({model:this._confirmDialogModel,$target:$target,indexName:indexName}),this.$el.append(this.children.confirmDialog.render().$el),this.children.confirmDialog.show()},removeExcessBuckets:function($button,indexName){var url=REMOVE_EXCESS_BUCKETS_URL;indexName&&(url+="&index="+indexName),$.post(SplunkdUtils.fullpath(url))},_initializeRender:function(){this.$el.html(this.compiledTemplate()),this.$table=this.$el.find(".table-excess-buckets"),this.$tbody=this.$el.find("tbody"),this.$controlSection=this.$el.find(".section-controls"),this.children.paginator=new Paginator({collection:this.collection}),this.children.paginator.render().$el.appendTo(this.$controlSection),this.children.thead=new TableHead({model:this.collection.fetchData,columns:[{label:_("Index Name").t(),sortKey:"name"},{label:_("Buckets with Excess Copies").t(),sortKey:"buckets_with_excess_copies",className:"col-buckets_with_excess_copies"},{label:_("Buckets with Excess Searchable Copies").t(),sortKey:"buckets_with_excess_searchable_copies",className:"col-buckets_with_excess_searchable_copies"},{label:_("Total Excess Copies").t(),sortKey:"total_excess_bucket_copies",className:"col-total_excess_bucket_copies"},{label:_("Total Excess Searchable Copies").t(),sortKey:"total_excess_searchable_copies",className:"col-total_excess_searchable_copies"},{label:_("Action").t(),className:"col-remove-button"}]}),this.children.thead.render().$el.prependTo(this.$table)},updateTabCount:function($el){var count=0;this.collection.forEach(function(element){var rowData=this._flattenAttributes(element);(rowData[1]>0||rowData[2]>0||rowData[3]>0||rowData[4]>0)&&(count+=1)},this);var $thisTab=$el?$el.find(".excess-buckets-tab"):$(".excess-buckets-tab"),htmlText=$thisTab.html();htmlText&&(htmlText=htmlText.replace(/\(\d+\)/,"("+count+")"),$thisTab.html(htmlText))},render:function(){return this.$tbody.empty(),this.collection.forEach(function(element){var rowData=this._flattenAttributes(element),row=new TableRow({rowData:rowData});row.render().$el.appendTo(this.$tbody)},this),this.updateTabCount(),this}});return _.extend(ExcessBucketsView.prototype,ViewPaneMixin),ExcessBucketsView}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/TableRow":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),__webpack_require__("views/Base"),module,__webpack_require__("views/clustering/master/bucketdetails/components/ActionMenu")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,BaseView,module,ActionMenu){return BaseView.extend({moduleId:module.id,tagName:"tr",className:"table-row",events:{"click .action-menu":function(e){return this.children.actionMenu&&this.children.actionMenu.shown?(this.children.actionMenu.hide(),void e.preventDefault()):(this.children.actionMenu=new ActionMenu({model:this.model,onHiddenRemove:!0}),$("body").append(this.children.actionMenu.render().el),void this.children.actionMenu.show($(e.currentTarget)))}},initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.$el=$("<tr>")},render:function(){return _.each(this.options.rowData,function(element,index,array){var cell=null;cell="head"==this.options.rowType?$("<th>").append(element):$("<td>").append(element),this.$el.append(cell)}.bind(this)),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/ClusteringBucketDetails":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),__webpack_require__("routers/Base"),__webpack_require__("models/Base"),__webpack_require__("models/classicurl"),__webpack_require__("models/services/cluster/Config"),__webpack_require__("collections/services/cluster/master/Fixups"),__webpack_require__("collections/services/cluster/master/Indexes"),__webpack_require__("collections/services/cluster/master/Buckets"),__webpack_require__("views/clustering/EnableClustering"),__webpack_require__("views/clustering/master/bucketdetails/Master")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,BaseRouter,BaseModel,classicurl,ClusterConfig,FixupCollection,IndexCollection,BucketCollection,EnableClusteringView,BucketDetailsMaster){var DEFAULT_POLL_DELAY=5e3;return BaseRouter.extend({initialize:function(){BaseRouter.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.setPageTitle(_("Bucket Status").t()),this.clusterConfig=new ClusterConfig;var searchFactorFetchData=new BaseModel,replicationFactorFetchData=new BaseModel,generationFactorFetchData=new BaseModel,indexCollectionForMainDropdown=new IndexCollection,indexCollection=new IndexCollection,bucketCollection=new BucketCollection,fixupSearchFactorCollection=new FixupCollection(null,{fetchData:searchFactorFetchData}),fixupReplicationFactorCollection=new FixupCollection(null,{fetchData:replicationFactorFetchData}),fixupGenerationCollection=new FixupCollection(null,{fetchData:generationFactorFetchData});this.classicurlDfd=$.Deferred(),this.tabDfd=$.Deferred(),this.clusterConfigDfd=$.Deferred(),this.clusterConfig.fetch().done(function(){this.clusterConfigDfd.resolve()}.bind(this)),indexCollectionForMainDropdown.fetchData.set("count",-1),indexCollection.fetchData.set("count",20),bucketCollection.fetchData.set({count:20,filter:{search_state:"PendingSearchable"}}),fixupSearchFactorCollection.fetchData.set({level:"search_factor",count:20}),fixupReplicationFactorCollection.fetchData.set({level:"replication_factor",count:20}),fixupGenerationCollection.fetchData.set({level:"generation",count:20}),this.bucketDetailsMaster=new BucketDetailsMaster({classicurlDfd:this.classicurlDfd,tabDfd:this.tabDfd,model:{application:this.model.application},collection:{indexCollectionForMainDropdown:indexCollectionForMainDropdown,indexCollection:indexCollection,bucketCollection:bucketCollection,fixupSearchFactorCollection:fixupSearchFactorCollection,fixupReplicationFactorCollection:fixupReplicationFactorCollection,fixupGenerationCollection:fixupGenerationCollection}}),this.bucketDetailsMaster.listenTo(classicurl,"change",this.bucketDetailsMaster.updateParamsFromClassicUrl)},page:function(locale,app,page){BaseRouter.prototype.page.apply(this,arguments),classicurl.fetch().done(function(){this.classicurlDfd.resolve()}.bind(this)),$.when(this.clusterConfigDfd,this.deferreds.pageViewRendered).done(function(){var mode=this.clusterConfig.entry.content.get("mode");"disabled"==mode?(this.mainView=new EnableClusteringView({model:{clusterConfig:this.clusterConfig,application:this.model.application}}),this.pageView.$(".main-section-body").append(this.mainView.render().el)):"master"==mode?($(".preload").replaceWith(this.pageView.el),$(".main-section-body").append(this.bucketDetailsMaster.render().$el)):$(".main-section-body").text(_("This view is only available on Cluster Master.").t()),this.tabDfd.resolve()}.bind(this))},fetchLooper:function(toFetch){for(var self=this,i=0,len=toFetch.length;i<len;i++)toFetch[i].safeFetch();window.setTimeout(function(){self.fetchLooper(toFetch)},DEFAULT_POLL_DELAY)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/BucketDetailsModal":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/backbone"),__webpack_require__("require/underscore"),module,__webpack_require__("views/shared/Modal"),__webpack_require__("util/splunkd_utils"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function($,backbone,_,module,Modal,splunkdUtils,splunkUtils){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME,initialize:function(options){Modal.prototype.initialize.apply(this,arguments),this.bucketId=this.options.bucketId;var data={output_mode:"json"};$.ajax({url:splunkdUtils.fullpath("cluster/master/buckets/"+this.bucketId),type:"GET",contentType:"application/json",data:data}).done(function(response){var responseContent=response.entry[0].content,peers=responseContent.peers?_.map(responseContent.peers,function(peer){return{instanceName:peer.server_name?peer.server_name:_("N/A").t(),bucketFlags:peer.bucket_flags?peer.bucket_flags:_("N/A").t(),bucketSizeVote:peer.bucket_size_vote?peer.bucket_size_vote:_("N/A").t(),status:peer.status?peer.status:_("N/A").t(),searchState:peer.search_state?peer.search_state:_("N/A").t()}}):[],bucketDetails={bucketSize:responseContent.bucket_size?responseContent.bucket_size:_("Unreported. Bucket might be hot.").t(),forceRoll:responseContent.force_roll?responseContent.force_roll:_("N/A").t(),frozen:responseContent.frozen?1===responseContent.frozen:_("N/A").t(),index:responseContent.index?responseContent.index:_("N/A").t(),originSite:responseContent.origin_site?responseContent.origin_site:_("N/A").t(),standalone:responseContent.standalone?1===responseContent.standalone:_("N/A").t(),peers:peers,repCountBySite:responseContent.rep_count_by_site?responseContent.rep_count_by_site:[],searchCountBySite:responseContent.search_count_by_site?responseContent.search_count_by_site:[]};this.$(Modal.BODY_SELECTOR).append(_.template(this.detailsTemplate,bucketDetails))}.bind(this))},render:function(){return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Bucket:  ").t()+this.bucketId),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CLOSE),this},detailsTemplate:'\t                <div>\t                    <h4> <%= _("Bucket Details").t() %> </h4>\t                    <div> <%= _("Bucket Size: ").t() %> <%= bucketSize %> </div>\t                    <div> <%= _("Force Roll: ").t() %> <%= forceRoll %> </div>\t                    <div> <%= _("Frozen: ").t() %> <%= frozen %> </div>\t                    <div> <%= _("Index: ").t() %> <%= index %> </div>\t                    <div> <%= _("Origin Site: ").t() %> <%= originSite %> </div>\t                    <div> <%= _("Standalone: ").t() %> <%= standalone %> </div>\t                    <h4> <%= _("Peers").t() %> </h4>\t                    <% _.each(peers, function(peer) { %> \t                            <div>\t                                <div> <%= _("Instance Name: ").t() %> <%= peer.instanceName %> </div>\t                                <div> <%= _("Bucket Flags: ").t() %> <%= peer.bucketFlags %> </div>\t                                <div> <%= _("Bucket Size Vote: ").t() %> <%= peer.bucketSizeVote %> </div>\t                                <div> <%= _("Status: ").t() %> <%= peer.status %> </div>\t                                <div> <%= _("Search State: ").t() %> <%= peer.searchState %> </div>\t                                <br/>\t                            </div>\t                    <% }) %>\t                    <h4> <%= _("Replication Count by Site").t() %> </h4>\t                    <% _.each(repCountBySite, function(value, key) { %> \t                        <div> <%= key + ": " + value %> </div>\t                    <% }) %>\t                    <h4> <%= _("Search Count by Site").t() %> </h4>\t                    <% _.each(searchCountBySite, function(value, key) { %> \t                        <div> <%= key + ": " + value %> </div>\t                    <% }) %>\t                </div>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/ResyncBucketModal":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/backbone"),__webpack_require__("require/underscore"),module,__webpack_require__("collections/shared/FlashMessages"),__webpack_require__("views/shared/FlashMessagesLegacy"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/controls/ControlGroup"),__webpack_require__("views/clustering/master/bucketdetails/components/SuccessDialog"),__webpack_require__("util/splunkd_utils"),__webpack_require__("views/clustering/master/bucketdetails/components/ResyncBucketModal.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,backbone,_,module,FlashMessagesCollection,FlashMessagesLegacyView,Modal,ControlGroup,SuccessDialog,splunkdUtils,css){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME,initialize:function(options){Modal.prototype.initialize.apply(this,arguments),this.stateModel=new backbone.Model,this.children.peers=new ControlGroup({controlType:"SyntheticSelect",className:"peers control-group",controlOptions:{modelAttribute:"peer",model:this.stateModel,items:options.peers,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},controlClass:"controls-block btn"}),this.flashMessages=new FlashMessagesCollection,this.children.flashMessagesLegacy=new FlashMessagesLegacyView({collection:this.flashMessages})},events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){e.preventDefault();var bucketId=this.options.bucketId,peer=this.stateModel.get("peer")||this.options.peers[0].value,data={peer:peer,bucket_id:bucketId};$.ajax({url:splunkdUtils.fullpath("cluster/master/control/control/resync_bucket_from_peer"),type:"POST",contentType:"application/json",data:data}).done(function(response){this.hide();var successDialog=new SuccessDialog({title:_("Resync Operation Scheduled").t(),message:_("Operation resync has been scheduled.").t(),bucketId:bucketId,peer:peer,onHiddenRemove:!0});$("body").append(successDialog.render().$el),successDialog.show()}.bind(this)).fail(function(response){var errorText=$($.parseXML(response.responseText)).find("msg").text();this.flashMessages.reset([{type:"error",html:errorText}])}.bind(this))}}),render:function(){return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Bucket:  ").t()+this.options.bucketId),this.$(Modal.BODY_SELECTOR).append(this.children.flashMessagesLegacy.render().el),this.$(Modal.BODY_SELECTOR).append(_("Resync the copy of this bucket on peer: ").t()),this.$(Modal.BODY_SELECTOR).append(this.children.peers.render().el),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+_("Resync").t()+"</a>"),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/SuccessDialog":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("require/backbone"),__webpack_require__("views/shared/Modal")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,Backbone,Modal){return Modal.extend({moduleId:module.id,render:function(){return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(this.options.title),this.$(Modal.BODY_SELECTOR).append(this.options.message),this.$(Modal.BODY_SELECTOR).append("<br/><br/>"),this.$(Modal.BODY_SELECTOR).append(_("Bucket: ").t()+this.options.bucketId),this.$(Modal.BODY_SELECTOR).append("<br/><br/>"),this.$(Modal.BODY_SELECTOR).append(_("Peer: ").t()+this.options.peer),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CLOSE),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/ResyncBucketModal.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(601);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"models/services/cluster/master/Fixup":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/StaticIdSplunkDBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(BaseModel){return BaseModel.extend({initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)}},{id:"cluster/master/fixup"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/DeleteBucketModal":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/backbone"),__webpack_require__("require/underscore"),module,__webpack_require__("collections/shared/FlashMessages"),__webpack_require__("views/shared/FlashMessagesLegacy"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/controls/ControlGroup"),__webpack_require__("views/clustering/master/bucketdetails/components/SuccessDialog"),__webpack_require__("views/clustering/master/bucketdetails/components/WarningDialog"),__webpack_require__("util/splunkd_utils"),__webpack_require__("views/clustering/master/bucketdetails/components/DeleteBucketModal.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,backbone,_,module,FlashMessagesCollection,FlashMessagesLegacyView,Modal,ControlGroup,SuccessDialog,WarningDialog,splunkdUtils,css){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME,initialize:function(options){Modal.prototype.initialize.apply(this,arguments),options.peers.unshift({label:_("All Peers").t(),value:null}),this.stateModel=new backbone.Model,this.children.peers=new ControlGroup({controlType:"SyntheticSelect",className:"peers control-group",controlOptions:{modelAttribute:"peer",model:this.stateModel,items:options.peers,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},controlClass:"controls-block btn"}),this.flashMessages=new FlashMessagesCollection,this.children.flashMessagesLegacy=new FlashMessagesLegacyView({collection:this.flashMessages})},events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){e.preventDefault();var bucketId=this.options.bucketId,peer=this.stateModel.get("peer");if(peer)$.ajax({url:splunkdUtils.fullpath("cluster/master/buckets/"+bucketId+"/remove_from_peer"),type:"POST",contentType:"application/json",data:{peer:peer}}).done(function(response){this.hide();var successDialog=new SuccessDialog({title:_("Delete Operation Scheduled").t(),message:_("Operation delete has been scheduled.").t(),bucketId:bucketId,peer:peer,onHiddenRemove:!0});$("body").append(successDialog.render().$el),successDialog.show()}.bind(this)).fail(function(response){var errorText=$($.parseXML(response.responseText)).find("msg").text();this.flashMessages.reset([{type:"error",html:errorText}])}.bind(this));else{this.hide();var warningDialog=new WarningDialog({bucketId:bucketId,onHiddenRemove:!0});$("body").append(warningDialog.render().$el),warningDialog.show()}}}),render:function(){return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Delete Bucket:  ").t()+this.options.bucketId),this.$(Modal.BODY_SELECTOR).append(this.children.flashMessagesLegacy.render().el),this.$(Modal.BODY_SELECTOR).append(_("Delete the copy of this bucket on peer: ").t()),this.$(Modal.BODY_SELECTOR).append(this.children.peers.render().el),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+_("Delete").t()+"</a>"),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/WarningDialog":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("require/backbone"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/clustering/master/bucketdetails/components/SuccessDialog"),__webpack_require__("util/splunkd_utils"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,Backbone,Modal,SuccessDialog,splunkdUtils,splunkUtils){return Modal.extend({moduleId:module.id,events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){e.preventDefault(),$.ajax({url:splunkdUtils.fullpath("cluster/master/buckets/"+this.options.bucketId+"/remove_all"),type:"POST",contentType:"application/json"}).done(function(response){this.hide();var successDialog=new SuccessDialog({title:_("Delete All Copies Operation Scheduled").t(),message:_("Operation to delete all copies has been scheduled.").t(),bucketId:this.options.bucketId,peer:_("All Peers").t(),onHiddenRemove:!0});$("body").append(successDialog.render().$el),successDialog.show()}.bind(this))}}),render:function(){var message=splunkUtils.sprintf(_("Are you sure you want to delete all copies of bucket %s? This will permanently delete all data contained in this bucket.").t(),this.options.bucketId);return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Delete All Bucket Copies").t()),this.$(Modal.BODY_SELECTOR).append(message),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+_("Delete All Copies").t()+"</a>"),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/DeleteBucketModal.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(602);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"collections/services/cluster/master/Indexes":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/services/cluster/master/Index"),__webpack_require__("collections/SplunkDsBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(Model,SplunkDsBaseCollection){return SplunkDsBaseCollection.extend({url:"cluster/master/indexes/",model:Model,initialize:function(){SplunkDsBaseCollection.prototype.initialize.apply(this,arguments)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/components/ConfirmDialog":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/shared/Modal"),__webpack_require__(603)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,Modal,Template){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME,initialize:function(options){Modal.prototype.initialize.apply(this,arguments)},events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){e.preventDefault(),this.model.trigger("confirmed",this.options.$target,this.options.indexName)}}),render:function(){this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Remove Excess Buckets").t());var indexName=this.options.indexName?this.options.indexName+" index":"all indexes",html=this.compiledTemplate({indexName:indexName});return this.$(Modal.BODY_SELECTOR).append(html).show(),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+_("Confirm").t()+"</a>"),this},template:Template})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/cluster/master/Index":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/StaticIdSplunkDBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(BaseModel){return BaseModel.extend({initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)}},{id:"cluster/master/indexes"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"collections/services/cluster/master/Buckets":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("models/Base"),__webpack_require__("models/services/cluster/master/Bucket"),__webpack_require__("collections/SplunkDsBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,BaseFetchDataModel,Model,SplunkDsBaseCollection){var FetchData=BaseFetchDataModel.extend({defaults:{filter:{}},toJSON:function(options){var json=BaseFetchDataModel.prototype.toJSON.apply(this,arguments);if(json.sortKey&&(json.sort_key=json.sortKey,json.sort_dir=json.sortDirection),delete json.sortKey,delete json.sortDirection,_(json.filter).size()>0){var keyValues=[];_(json.filter).each(function(match,key){keyValues.push(key+"="+match)}),json.filter=keyValues.join(",")}return json}});return SplunkDsBaseCollection.extend({url:"cluster/master/buckets",model:Model,initialize:function(){var options={};options.fetchData=new FetchData,SplunkDsBaseCollection.prototype.initialize.call(this,null,options)},getModel:function(bucketName){return this.get("/services/cluster/master/buckets/"+bucketName)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/FixupBuckets":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("require/backbone"),__webpack_require__("models/classicurl"),__webpack_require__("views/Base"),__webpack_require__("views/shared/controls/ControlGroup"),__webpack_require__("views/shared/controls/SyntheticRadioControl"),__webpack_require__("views/shared/CollectionPaginator"),__webpack_require__("views/shared/TableHead"),__webpack_require__("views/clustering/master/bucketdetails/components/TableRow"),__webpack_require__("mixins/ViewPane"),__webpack_require__(605),__webpack_require__("views/clustering/master/bucketdetails/FixupBuckets.pcss"),__webpack_require__("util/time"),__webpack_require__("stubs/i18n")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,Backbone,classicurl,BaseView,ControlGroup,SyntheticRadioControl,Paginator,TableHead,TableRow,ViewPaneMixin,Template,css,time_utils,i18n){var FIXUP_COLLECTIONS={search_factor:"fixupSearchFactorCollection",replication_factor:"fixupReplicationFactorCollection",generation:"fixupGenerationCollection"},FixupView=BaseView.extend({moduleId:module.id,template:Template,initialize:function(options){BaseView.prototype.initialize.apply(this,arguments),this.viewPaneInitialize(options),this.$el.html(this.compiledTemplate()),this.$thead||(this.$table=this.$el.find("table")),this.$tbody||(this.$tbody=this.$el.find("tbody")),this.fixupLevelsModel=new Backbone.Model({level:"search_factor"}),$.when(this.options.classicurlDfd).done(function(){var level=classicurl.get("level");level&&this.fixupLevelsModel.set("level",level)}.bind(this)),this.children.fixupLevels=new SyntheticRadioControl({model:this.fixupLevelsModel,modelAttribute:"level",items:[{label:_("Search Factor (0)").t(),value:"search_factor"},{label:_("Replication Factor (0)").t(),value:"replication_factor"},{label:_("Generation (0)").t(),value:"generation"}]}),this.children.fixupTime=new ControlGroup({controlType:"SyntheticSelect",className:"fixup-time control-group",controlOptions:{modelAttribute:"filter",model:this.fixupLevelsModel,items:[{label:_("Unconstrained").t(),value:"minutes_in_fixup>0"},{label:_("1 hour").t(),value:"minutes_in_fixup>60"},{label:_("4 hours").t(),value:"minutes_in_fixup>240"},{label:_("24 hours").t(),value:"minutes_in_fixup>1440"},{label:_("7 days").t(),value:"minutes_in_fixup>10080"}],popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},controlClass:"controls-block btn"}),this.children.fixupLevels.render().$el.appendTo(this.$el.find(".fixup-level-select")),this.children.fixupTime.render().$el.appendTo(this.$el.find(".fixup-time-select")),this.listenTo(this.collection.fixupSearchFactorCollection,"change reset",this.render),this.listenTo(this.collection.fixupReplicationFactorCollection,"change reset",this.render),this.listenTo(this.collection.fixupGenerationCollection,"change reset",this.render),this.listenTo(this.fixupLevelsModel,"change",function(){this.collection.fixupSearchFactorCollection.fetchData.set("filter",this.fixupLevelsModel.get("filter")),this.collection.fixupReplicationFactorCollection.fetchData.set("filter",this.fixupLevelsModel.get("filter")),this.collection.fixupGenerationCollection.fetchData.set("filter",this.fixupLevelsModel.get("filter")),this.updateClassicUrlFromParams(),this.render()})},_renderThead:function(collection){this.$table.find("thead").remove(),this.children.thead=new TableHead({model:collection.fetchData,columns:[{label:_("Bucket Name").t(),className:"col-name"},{label:_("Action").t(),className:"col-action"},{label:_("Index").t(),className:"col-index"},{label:_("Fixup Reason").t(),className:"col-initial-reason"},{label:_("Time in Fixup").t(),className:"col-initial-timestamp"},{label:_("Current Status").t(),className:"col-latest-reason"}]}),this.children.thead.render().$el.prependTo(this.$table)},_renderTbody:function(collection){this.$tbody.empty();var attributes=this._reduceAttributes(collection);attributes&&attributes.forEach(function(rowData,index){var row=new TableRow({rowData:rowData,model:collection.at(index)});row.render().$el.appendTo(this.$tbody)},this)},_reduceAttributes:function(collection){var allRowsData=[];return collection.forEach(function(model){var rowData=[];rowData.push(model.entry.get("name")),rowData.push('<a class="action-menu">'+_("Action").t()+'<span class="caret"></span></a>'),rowData.push(model.entry.content.get("index")||""),rowData.push(model.entry.content.get("initial").reason),rowData.push(this._formatTime(model.entry.content.get("initial").timestamp)),rowData.push(model.entry.content.get("latest").reason),allRowsData.push(rowData)},this),allRowsData},_formatTime:function(time){var timeStringArray=[],secondsDiff=new Date/1e3-time,minutesDiff=Math.floor(secondsDiff/60)%60,hoursDiff=Math.floor(secondsDiff/3600)%24,daysDiff=Math.floor(secondsDiff/86400);return daysDiff>0&&timeStringArray.push(daysDiff,_("day(s)").t()),hoursDiff>0&&timeStringArray.push(hoursDiff,_("hour(s)").t()),(minutesDiff>0||0===daysDiff&&0===hoursDiff)&&timeStringArray.push(minutesDiff,_("minute(s)").t()),
secondsDiff>=0?timeStringArray.join(" "):_("Invalid timestamp.").t()},updateClassicUrlFromParams:function(){_.debounce(function(){classicurl.save(this.fixupLevelsModel.attributes)}.bind(this),0)()},getFixupCounts:function(){var fixupSearchFactorCount=this.collection.fixupSearchFactorCollection.length>0?this.collection.fixupSearchFactorCollection.models[0].paging.get("total"):0,fixupReplicationFactorCount=this.collection.fixupReplicationFactorCollection.length>0?this.collection.fixupReplicationFactorCollection.models[0].paging.get("total"):0,fixupGenerationCount=this.collection.fixupGenerationCollection.length>0?this.collection.fixupGenerationCollection.models[0].paging.get("total"):0;return{searchFactor:fixupSearchFactorCount,replicationFactor:fixupReplicationFactorCount,generation:fixupGenerationCount,total:fixupSearchFactorCount+fixupReplicationFactorCount+fixupGenerationCount}},updateTabCount:function($el){var $fixupTab=$el?$el.find(".fixup-buckets-tab"):$(".fixup-buckets-tab"),htmlText=$fixupTab.html(),fixupCounts=this.getFixupCounts();htmlText&&(htmlText=htmlText.replace(/\(\d+\)/,"("+fixupCounts.total+")"),$fixupTab.html(htmlText));var $replicationFactorTab=this.$el.find("button[data-value='replication_factor']"),$searchFactorTab=this.$el.find("button[data-value='search_factor']"),$generationTab=this.$el.find("button[data-value='generation']"),replicationFactorHtml=$replicationFactorTab.html(),searchFactorHtml=$searchFactorTab.html(),generationHtml=$generationTab.html();replicationFactorHtml=replicationFactorHtml.replace(/\(\d+\)/,"("+fixupCounts.replicationFactor+")"),searchFactorHtml=searchFactorHtml.replace(/\(\d+\)/,"("+fixupCounts.searchFactor+")"),generationHtml=generationHtml.replace(/\(\d+\)/,"("+fixupCounts.generation+")"),$replicationFactorTab.html(replicationFactorHtml),$searchFactorTab.html(searchFactorHtml),$generationTab.html(generationHtml)},_renderPaginator:function(collection){var $controlSection=this.$el.find(".control-section");$controlSection.empty(),this.children.paginator=new Paginator({collection:collection}),this.children.paginator.render().$el.appendTo($controlSection)},render:function(){var collectionToRender=this.collection[FIXUP_COLLECTIONS[this.fixupLevelsModel.get("level")]];return this._renderThead(collectionToRender),this._renderTbody(collectionToRender),this._renderPaginator(collectionToRender),this.updateTabCount(),this}});return _.extend(FixupView.prototype,ViewPaneMixin),FixupView}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/cluster/master/Bucket":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/StaticIdSplunkDBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(BaseModel){return BaseModel.extend({initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)}},{id:"cluster/master/buckets"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/FixupBuckets.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(606);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"views/clustering/EnableClustering":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),module,__webpack_require__("require/backbone"),__webpack_require__("views/Base"),__webpack_require__("views/clustering/config/Master"),__webpack_require__("uri/route"),__webpack_require__(573)],__WEBPACK_AMD_DEFINE_RESULT__=function($,module,Backbone,BaseView,ConfigDialog,route,EnableClusteringTemplate){return BaseView.extend({moduleId:module.id,template:EnableClusteringTemplate,initialize:function(options){BaseView.prototype.initialize.call(this,options)},events:{"click #enable_clustering":function(e){this.children.configDialog=new ConfigDialog({model:this.model,onHiddenRemove:!0}),this.$el.append(this.children.configDialog.render().el),this.children.configDialog.show(),e.preventDefault()}},render:function(){var root=this.model.application.get("root"),locale=this.model.application.get("locale"),link=route.docHelp(root,locale,"manager.clustering.configureClustering"),html=this.compiledTemplate({learnmoreLink:link});this.$el.html(html)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/AllBuckets":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/CollectionPaginator"),__webpack_require__("views/shared/delegates/ColumnSort"),__webpack_require__("views/shared/TableHead"),__webpack_require__("views/clustering/master/bucketdetails/components/TableRow"),__webpack_require__("mixins/ViewPane"),__webpack_require__(607)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,Paginator,ColumnSort,TableHead,TableRow,ViewPaneMixin,Template){var AllBucketsView=BaseView.extend({moduleId:module.id,template:Template,initialize:function(options){BaseView.prototype.initialize.apply(this,arguments),this.viewPaneInitialize(options),this._initializeRender(),this.listenTo(this.collection,"change reset",this.render)},_initializeRender:function(){this.$el.html(this.compiledTemplate()),this.$table=this.$el.find("table"),this.$tbody=this.$el.find("tbody"),this.$controlSection=this.$el.find(".section-controls"),this.children.paginator=new Paginator({collection:this.collection}),this.children.paginator.render().$el.appendTo(this.$controlSection),this.children.thead=new TableHead({model:this.collection.fetchData,columns:[{label:_("Bucket Name").t(),sortKey:"name"},{label:_("Index Name").t(),sortKey:"index"},{label:_("Peers").t()}]}),this.children.thead.render().$el.prependTo(this.$table)},_flattenAttributes:function(element){var attributes=[];if(!element.entry||!element.entry.content)return attributes;var name=element.entry.get("name"),index=element.entry.content.get("index"),peersCollection=_(element.entry.content.get("peers")).pairs(),peerNames=$("<div>");return peersCollection.forEach(function(peer){var $peer=$("<div>").html(peer[1].server_name);peerNames.append($peer)},this),attributes.push(name),attributes.push(index),attributes.push(peerNames),attributes},updateTabCount:function($el){var $thisTab=$el?$el.find(".all-buckets-tab"):$(".all-buckets-tab"),htmlText=$thisTab.html(),bucketsCount=this.collection.length>0?this.collection.models[0].paging.get("total"):0;htmlText&&(htmlText=htmlText.replace(/\(\d+\)/,"("+bucketsCount+")"),$thisTab.html(htmlText))},render:function(){return this.$tbody.empty(),this.collection.forEach(function(element){var rowData=this._flattenAttributes(element),row=new TableRow({rowData:rowData});row.render().$el.appendTo(this.$tbody)},this),this.updateTabCount(),this}});return _.extend(AllBucketsView.prototype,ViewPaneMixin),AllBucketsView}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/config/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("collections/services/Messages"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/RestartRequired"),__webpack_require__("views/shared/Restart"),__webpack_require__("views/clustering/SuccessContents"),__webpack_require__("views/clustering/config/NodeType"),__webpack_require__("views/clustering/config/MasterSetup"),__webpack_require__("views/clustering/config/PeerSetup"),__webpack_require__("views/clustering/config/SearchHeadSetup"),__webpack_require__("uri/route"),__webpack_require__("util/console")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,MessageCollection,Modal,RestartRequired,Restart,SuccessContents,NodeType,MasterSetup,PeerSetup,SearchSetup,route,console){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME,initialize:function(options){Modal.prototype.initialize.apply(this,arguments),this.messages=new MessageCollection,this.model=$.extend({},this.model,{wizard:this.model.wizard}),this.model.wizard.on("success",function(){this.hide();var return_to=route.manager(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),"clustering"),successModal=new RestartRequired({model:{serverInfo:this.model.serverInfo},bodyView:new SuccessContents({model:this.model}),restartCallback:function(){successModal.hide();var restartModal=new Restart({model:{serverInfo:this.model.serverInfo}});$("body").append(restartModal.render().el),restartModal.show()}.bind(this),return_to:return_to});$("body").append(successModal.render().el),successModal.show()},this),this.children.start=new NodeType({model:this.model}),this.children.master=new MasterSetup({model:this.model}),this.children.peer=new PeerSetup({model:this.model}),this.children.search=new SearchSetup({model:this.model}),this.options&&this.options.startView?this.model.wizard.set("startPage",this.options.startView):this.model.wizard.set("startPage","start"),this.model.wizard.set("currentPage",this.model.wizard.get("startPage")),this.model.wizard.on("next",function(){var pageId=this.model.wizard.get("currentPage"),page=this.children.hasOwnProperty(pageId)?this.children[pageId]:null;if("start"===pageId){var nextPageId=this.model.wizard.get("mode"),nextPage=this.children.hasOwnProperty(nextPageId)?this.children[nextPageId]:null;nextPage?(page.$el.hide(),nextPage.$el.show(),this.model.wizard.set("currentPage",nextPageId)):console.error("Cannot navigate to "+nextPageId)}else _.contains(["master","peer","search"],pageId)&&this.messages.fetch().done(function(){var restartRequired=this.messages.find(function(i){return"restart_required"==i.entry.get("name")});restartRequired?(this.model.wizard.set("currentPage","restart"),this.model.wizard.trigger("success")):this.hide()}.bind(this))},this),this.model.wizard.on("back",function(){this.refreshConfig();var pageId=this.model.wizard.get("currentPage"),page=this.children.hasOwnProperty(pageId)?this.children[pageId]:null;this.model.wizard.set("currentPage","start"),page.$el.hide(),this.children.start.$el.show()},this)},refreshConfig:function(){this.model.clusterConfig.fetch().done(function(){this.model.clusterConfig.transposeFromRest()}.bind(this))},render:function(){this.refreshConfig(),this.$el.append(this.children.start.render().el),this.$el.append(this.children.master.render().el),this.$el.append(this.children.peer.render().el),this.$el.append(this.children.search.render().el);var v;for(v in this.children)this.children.hasOwnProperty(v)&&(v===this.model.wizard.get("startPage")?this.children[v].$el.show():this.children[v].$el.hide());return this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/SuccessContents":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("uri/route"),__webpack_require__(571)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,route,RestartTemplate){return BaseView.extend({moduleId:module.id,template:RestartTemplate,render:function(){var root=this.model.application.get("root"),locale=this.model.application.get("locale"),learnmoreIndexesLink=route.docHelp(root,locale,"learnmore.peers.index"),learnmoreForwardersLink=route.docHelp(root,locale,"learnmore.peers.forwarders"),html=this.compiledTemplate({mode:this.model.wizard.get("mode")||"",learnmoreIndexesLink:learnmoreIndexesLink,learnmoreForwardersLink:learnmoreForwardersLink});return this.$el.html(html),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/master/bucketdetails/Master.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(609);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"views/clustering/master/bucketdetails/components/ActionMenu":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/shared/PopTart"),__webpack_require__("views/clustering/master/bucketdetails/components/BucketDetailsModal"),__webpack_require__("views/clustering/master/bucketdetails/components/ResyncBucketModal"),__webpack_require__("views/clustering/master/bucketdetails/components/DeleteBucketModal"),__webpack_require__("views/clustering/master/bucketdetails/components/SuccessDialog"),__webpack_require__("util/splunkd_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,PopTart,BucketDetailsModal,ResyncBucketModal,DeleteBucketModal,SuccessDialog,splunkdUtils){return PopTart.extend({moduleId:module.id,className:"dropdown-menu",events:{"click .action-details":function(e){e.preventDefault();var bucketDetailsModal=new BucketDetailsModal({bucketId:this.bucketId,onHiddenRemove:!0});$("body").append(bucketDetailsModal.render().$el),bucketDetailsModal.show()},"click .action-roll":function(e){e.preventDefault();var data={bucket_id:this.bucketId};$.ajax({url:splunkdUtils.fullpath("cluster/master/control/control/roll-hot-buckets"),type:"POST",contentType:"application/json",data:data}).done(function(response){var successDialog=new SuccessDialog({title:_("Roll Operation Scheduled").t(),message:_("Roll operation has been scheduled.").t(),bucketId:this.bucketId,peer:_("All").t(),onHiddenRemove:!0});$("body").append(successDialog.render().$el),successDialog.show()}.bind(this))},"click .action-resync":function(e){e.preventDefault();var resyncBucketModal=new ResyncBucketModal({bucketId:this.bucketId,peers:this.peers,onHiddenRemove:!0});$("body").append(resyncBucketModal.render().$el),resyncBucketModal.show()},"click .action-delete":function(e){e.preventDefault();var deleteBucketModal=new DeleteBucketModal({bucketId:this.bucketId,peers:this.peers,onHiddenRemove:!0});$("body").append(deleteBucketModal.render().$el),deleteBucketModal.show()}},initialize:function(options){options=_.defaults(options,{mode:"menu"}),PopTart.prototype.initialize.call(this,options),this.bucketId=this.model.entry.get("name"),this.peers=null;var data={output_mode:"json"};$.ajax({url:splunkdUtils.fullpath("cluster/master/buckets/"+this.bucketId),type:"GET",contentType:"application/json",data:data}).done(function(response){var peersObject=response.entry[0].content.peers,peersKeys=Object.keys(peersObject);this.peers=peersKeys.map(function(peerKey){return{label:peersObject[peerKey].server_name,value:peerKey}},this)}.bind(this))},render:function(){return this.el.innerHTML=PopTart.prototype.template_menu,this.$el.append(this.compiledTemplate({_:_})),this},template:'\t                <ul class="first-group">\t                    <li>\t                        <a href="#" class="action-details"><%- _("View Bucket Details").t() %></a>\t                    </li>\t                    <li>\t                        <a href="#" class="action-roll"><%- _("Roll").t() %></a>\t                    </li>\t                    <li>\t                        <a href="#" class="action-resync"><%- _("Resync").t() %></a>\t                    </li>\t                    <li>\t                        <a href="#" class="action-delete"><%- _("Delete Copy").t() %></a>\t                    </li>\t                </ul>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});