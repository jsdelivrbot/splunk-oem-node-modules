webpackJsonp([39],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/lite")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("routers/Embed"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(EmbedRouter,router_utils){new EmbedRouter;router_utils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/Embed":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("shim/jquery"),__webpack_require__("shim/splunk.util"),__webpack_require__("routers/Base"),__webpack_require__("models/Base"),__webpack_require__("models/search/Report"),__webpack_require__("models/search/Job"),__webpack_require__("models/services/search/jobs/Result"),__webpack_require__("models/services/search/jobs/Summary"),__webpack_require__("models/services/configs/Visualization"),__webpack_require__("models/shared/fetchdata/ResultsFetchData"),__webpack_require__("collections/services/saved/searches/Histories"),__webpack_require__("collections/search/SelectedFields"),__webpack_require__("collections/services/data/ui/WorkflowActions"),__webpack_require__("views/embed/Master")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,splunkutil,BaseRouter,BaseModel,ReportModel,JobModel,ResultModel,SummaryModel,ExternalVisualizationModel,ResultsFetchDataModel,HistoriesCollection,SelectedFieldsCollection,WorkflowActionCollection,MasterView){return BaseRouter.extend({routes:$.extend(!0,{},{":locale/embed":"embed",":locale/embed?*params":"embed",":locale/embed/":"embed",":locale/embed/?*params":"embed","*root/:locale/embed":"embedRooted","*root/:locale/embed?*params":"embedRooted","*root/:locale/embed/":"embedRooted","*root/:locale/embed/?*params":"embedRooted"},BaseRouter.prototype.routes),initialize:function(){BaseRouter.prototype.initialize.apply(this,arguments),$(document).off("ajaxError"),this.setPageTitle(_("Embedded Report").t()),this.enablePageView=!1,this.fetchVisualizations=!0,this.fetchVisualizationFormatters=!1,this.model.report=new ReportModel,this.model.job=new JobModel({},{delay:JobModel.DEFAULT_POLLING_INTERVAL,processKeepAlive:!1}),this.model.result=new ResultModel,this.model.summary=new SummaryModel,this.collection.histories=new HistoriesCollection,this.collection.selectedFields=new SelectedFieldsCollection,this.collection.workflowActions=new WorkflowActionCollection,this.views.master=new MasterView({el:$("body"),model:{application:this.model.application,report:this.model.report,job:this.model.job,result:this.model.result,summary:this.model.summary},collection:{histories:this.collection.histories,selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},deferreds:{visualizations:this.deferreds.visualizations}}),this.model.classicurl.on("change:s",function(){this.deferreds.appLocals.resolve(),this.bootstrapVisualizations({oid:this.model.classicurl.get("oid")}),this.model.report.fetchAbort(),this.model.report.clear(),this.model.report.set("id",this.model.classicurl.get("s")),this.model.report.fetch({data:{oid:this.model.classicurl.get("oid")},migrateViewState:!1}),this.model.application.set("oid",this.model.classicurl.get("oid"))},this),this.model.report.on("sync",function(){this.setPageTitle(this.model.report.entry.get("name")),this.model.report.entry.content.set({"display.events.list.drilldown":"none","display.events.raw.drilldown":"none","display.events.table.drilldown":"0","display.statistics.drilldown":"none","display.visualizations.charting.drilldown":"none","display.visualizations.custom.drilldown":"none"}),this.collection.histories.fetchAbort(),this.collection.histories.reset(),this.collection.histories.url=this.model.report.entry.links.get("history"),this.collection.histories.fetch({data:{count:1,isDone:!0,sort_key:"start",sort_dir:"desc",oid:this.model.classicurl.get("oid")}}),this.collection.selectedFields.reset(this.model.report.getDisplayEventsFields({key:"name"}))},this),this.collection.histories.on("sync",function(){var history=this.collection.histories.at(0);this.model.job.clear(),this.model.job.fetchAbort(),this.model.job.stopPolling(),history&&(this.model.job.set("id",history.entry.get("name")),this.model.job.fetch({data:{oid:this.model.classicurl.get("oid")}}))},this),this.model.job.on("sync",function(){this.model.job.startPolling()},this),this.model.job.entry.links.on("change:events",function(){var events=this.model.job.entry.links.get("events");events?this.model.result.set("id",events):this.model.result.fetchAbort()},this),this.model.job.on("jobProgress",function(){this.model.job.isReportSearch()||this.fetchEvents()},this)},fetchEvents:function(){var fields=_(this.model.report.getDisplayEventsFields()).union(["_raw","_time","_audit","_decoration","eventtype","linecount","_fulllinecount"]);this.model.job.isRealtime()&&fields.push("_serial","splunk_server");var options={data:{offset:0,count:10,earliest_time:this.model.report.entry.content.get("display.events.timelineEarliestTime"),latest_time:this.model.report.entry.content.get("display.events.timelineLatestTime"),segmentation:"none",max_lines:this.model.report.getNearestMaxlines(),field_list:splunkutil.fieldListToString(fields),truncation_mode:"abstract",oid:this.model.classicurl.get("oid")},sparseMode:!0};this.model.result.safeFetch(options)},embed:function(locale){this.model.application.set({locale:locale,app:"-",page:"embed"}),this.model.classicurl.fetch(),this.views.master.render(),window.router=this},embedRooted:function(root,locale){this.model.application.set({root:root},{silent:!0}),this.embed(locale)},setPageTitle:function(title){document.title=title}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/embed/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[module,__webpack_require__("require/underscore"),__webpack_require__("views/Base"),__webpack_require__("views/shared/JobDispatchState"),__webpack_require__("views/embed/Results"),__webpack_require__("views/embed/Error"),__webpack_require__("views/embed/Master.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function(module,_,BaseView,JobDispatchStateView,ResultsView,ErrorView,css){return BaseView.extend({moduleId:module.id,initialize:function(options){BaseView.prototype.initialize.apply(this,arguments),this.children.jobDispatchState=new JobDispatchStateView({mode:"auto",model:{searchJob:this.model.job,application:this.model.application}}),this.children.results=new ResultsView({model:{application:this.model.application,job:this.model.job,report:this.model.report,result:this.model.result,resultJSONRows:this.model.resultJSONRows,summary:this.model.summary,mapState:this.model.mapState},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},deferreds:{visualizations:options.deferreds.visualizations}}),this.visualizationsDfd=options.deferreds.visualizations,this.children.error=new ErrorView({model:this.model.report,collection:this.collection.histories}),this.activate()},startListening:function(){this.listenTo(this.model.job.entry.content,"change:resultCount change:resultPreviewCount change:eventCount change:eventAvailableCount change:dispatchState",_.debounce(this.visibility)),this.visualizationsDfd.done(this.render.bind(this))},visibility:function(){var type=this.model.report.entry.content.get("display.general.type");if("events"===type)0===this.model.job.entry.content.get("eventCount")||0===this.model.job.entry.content.get("eventAvailableCount")?this.children.results.$el.hide():this.children.results.$el.show();else if("statistics"===type||"visualizations"===type){var resultCount=this.model.job.entry.content.get("isPreviewEnabled")?this.model.job.entry.content.get("resultPreviewCount"):this.model.job.entry.content.get("resultCount");0===resultCount?this.children.results.$el.hide():this.children.results.$el.show()}else this.children.results.$el.hide()},render:function(){return"resolved"===this.visualizationsDfd.state()&&(this.visibility(),this.$el.append(this.children.error.render().el),this.$el.append(this.children.jobDispatchState.render().el),this.$el.append(this.children.results.render().el)),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/embed/Results":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/ReportVisualizer"),__webpack_require__("views/shared/eventsviewer/LazyEventsViewer"),__webpack_require__("models/search/Job"),__webpack_require__("stubs/splunk.config"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,module,BaseView,ReportVisualizer,LazyEventsViewerView,Job,splunkConfig,splunkUtils){return BaseView.extend({moduleId:module.id,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){this.listenTo(this.model.job,"prepared",this.render)},render:function(){if(this.removeChildren(),this.model.job.isNew()||this.model.job.isPreparing())return this;if(this.model.job.isReportSearch()){var showVisualization=splunkUtils.normalizeBoolean(this.model.report.entry.content.get("display.visualizations.show"));this.children.display=new ReportVisualizer({model:{config:this.model.report.entry.content,application:this.model.application},allowResize:!1,sortableFields:!1,tableDockOffset:-1,generalTypeOverride:showVisualization?ReportVisualizer.GENERAL_TYPES.VISUALIZATIONS:ReportVisualizer.GENERAL_TYPES.STATISTICS}),this.bindDataSources(),this.listenTo(this.children.display,"dataSourcesChange",this.bindDataSources)}else this.children.display=new LazyEventsViewerView({model:{result:this.model.result,summary:this.model.summary,searchJob:this.model.job,report:this.model.report,application:this.model.application},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},selectableFields:!1,sortableFields:!1,headerMode:"dock",headerOffset:-1,allowRowExpand:!1,allowModalize:!1,defaultDrilldown:!1});this.children.display.load(),this.$el.append(this.children.display.activate({deep:!0}).render().el);var html=this.compiledTemplate({splunkConfig:splunkConfig});return this.$el.append(html),this},remove:function(){return this.unbindDataSources(),BaseView.prototype.remove.apply(this,arguments)},bindDataSources:function(){this.unbindDataSources(),this.primaryDataSource=this.children.display.getPrimaryDataSource(),this.primaryDataSource&&(this.primaryDataSource.updateFetchParams({oid:this.model.application.get("oid")}),this.primaryDataSource.connectToSearchJob(this.model.job))},unbindDataSources:function(){this.primaryDataSource&&(this.primaryDataSource.disconnect(),this.stopListening(this.primaryDataSource),this.primaryDataSource=null)},template:'\t                <% if (splunkConfig.EMBED_FOOTER) { %>\t                    <footer>\t                        <div>\t                        <% if (splunkConfig.EMBED_FOOTER.toLowerCase() === "splunk>") { %>\t                            <span class="icon-splunk"></span><span class="icon-greater"></span>\t                        <% } else { %>\t                            <%- splunkConfig.EMBED_FOOTER %>\t                        <% } %>\t                        </div>\t                    </footer>\t                <% } %>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/embed/Error":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/FlashMessagesLegacy"),__webpack_require__("collections/shared/FlashMessages")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,module,BaseView,FlashMessagesLegacyView,FlashMessagesCollection){return BaseView.extend({moduleId:module.id,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.collection={histories:this.collection,messages:new FlashMessagesCollection},this.children.flashMessages=new FlashMessagesLegacyView({collection:this.collection.messages}),this.activate()},startListening:function(){this.listenTo(this.collection.histories,"sync",function(){this.collection.histories.length?(this.$el.hide(),this.collection.messages.reset([])):(this.collection.messages.reset([{type:"error",html:_("This scheduled report has not yet run. Try again soon.").t()}]),this.$el.show())}),this.listenTo(this.model,"error",function(){this.collection.messages.reset([{type:"error",html:_("Report not available.").t()}]),this.$el.show()})},render:function(){return this.$el.append(this.children.flashMessages.render().el),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/embed/Master.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(1086);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},1086:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".embed{background-color:#fff;min-width:0}.embed .highcharts-container{line-height:0}.embed footer div{color:#666;float:right;padding:10px 20px}.alerts,.lazy-view-container.loading,.shared-jobdispatchstate,.shared-reportvisualizer .visualization-message{position:absolute;left:0;top:50%;right:0;height:45px;text-align:center}.alert-error,.lazy-view-container.loading .alert,.shared-jobdispatchstate .alert,.shared-reportvisualizer .visualization-message .alert{color:#999;display:inline-block;margin-top:-20px}",""])}});