webpackJsonp([16],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/enterprise")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("routers/AuthenticationUsers"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(AuthenticationUsersRouter,routerUtils){new AuthenticationUsersRouter;routerUtils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},556:function(module,exports){module.exports='<td class="col-username">\n    <a href="<%- editURL %>" class="model-username"><%- username %></a>\n</td>\n<td class="col-auth">\n    <span class="model-auth"><%- auth %></span>\n</td>\n<td class="col-fullname">\n    <span class="model-fullname"><%- fullname %></span>\n</td>\n<td class="col-email">\n    <span class="model-email"><%- email %></span>\n</td>\n<td class="col-timezone">\n    <span class="model-timezone"><%- timeZone %></span>\n</td>\n<td class="col-app">\n    <span class="model-app"><%- defaultApp %></span>\n</td>\n<td class="col-inherited">\n    <span class="model-inherited"><%- inheritedApp %></span>\n</td>\n<td class="col-roles">\n    <span class="model-roles"><%- roles %></span>\n</td>\n<td class="col-actions">\n    <a href="<%- cloneURL %>" class="btn-clone"><%- _("Clone").t() %></a>\n    <% if (showDelete) { %>\n        | <a href="#" class="btn-delete"><%- _("Delete").t() %></a>\n    <% } %>\n</td>\n'},557:function(module,exports){module.exports='<table class="table table-chrome table-striped table-row-expanding">\n    <thead class="item-table-head-placeholder"></thead>\n    <tbody class="item-table-body"></tbody>\n</table>\n'},558:function(module,exports){module.exports='<div class="section-header section-padded">\n    <h2 class="section-title"><%- _("Access controls").t() %></h2>\n    <%- _("Specify authentication method, manage user settings, and manage roles").t() %>\n</div>\n<div class="section-toolbar section-padded clearfix">\n    <div class="toolbar-left pull-left">\n        <a href="<%- newURL %>" class="btn btn-primary new-user-button"><%- _("New").t() %></a>\n    </div>\n    <div class="toolbar-right pull-right"></div>\n</div>\n'},559:function(module,exports){module.exports='<div class="pull-left">\n    <% if (canEditUsers && (maxUsers > 1)) { %>\n        <h2 class="section-title"><%- _("Manage Accounts").t() %></h2>\n        <% if (isSplunkAuth) { %>\n            <%- sprintf(_("You can manage up to %s accounts").t(), maxUsers) %>\n        <% } %>\n    <% } else { %>\n        <h2 class="section-title"><%- _("Manage Account").t() %></h2>\n    <% } %>\n</div>\n\n<% if (canEditUsers && isSplunkAuth && (numUsers < maxUsers)) { %>\n    <button class="btn btn-primary pull-right add-new"><%- _("Add new").t() %></button>\n<% } %>\n'},560:function(module,exports){module.exports='<div>\n    <table class="detail-table">\n        <tr>\n            <td></td>\n            <td class="detail-messages"></td>\n        </tr>\n        <tr class="detail-pair-roles">\n            <td class="detail-name"><%- _("Role").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <tr class="detail-pair-username">\n            <td class="detail-name"><%- _("Username").t() %></td>\n            <td class="detail-value"><%- username %></td>\n        </tr>\n        <tr class="detail-pair-email">\n            <td class="detail-name"><%- _("Email address").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <tr class="detail-pair-password">\n            <td class="detail-name"><%- _("Password").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <tr class="detail-pair-confirmpassword">\n            <td class="detail-name"><%- _("Confirm password").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <tr class="detail-pair-fullname">\n            <td class="detail-name"><%- _("Full name").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <tr class="detail-pair-timezone">\n            <td class="detail-name"><%- _("Time zone").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <tr class="detail-pair-candelete">\n            <td class="detail-name"><%- _("Permission to Delete Data").t() %></td>\n            <td class="detail-value"></td>\n        </tr>\n        <% if (!isNew && isSelf) { %>\n            <tr>\n                <td><h3><%- _("Search Preferences").t() %></h3></td>\n                <td></td>\n            </tr>\n            <tr class="detail-pair-src-assistant">\n                <td class="detail-name"><%- _("Search assistant").t() %></td>\n                <td class="detail-value"></td>\n            </tr>\n            <tr class="detail-pair-syntaxhighlight">\n                <td class="detail-name"><%- _("Syntax highlighting").t() %></td>\n                <td class="detail-value"></td>\n            </tr>\n            <tr class="detail-pair-autoformat">\n                <td class="detail-name"><%- _("Search auto-format").t() %></td>\n                <td class="detail-value"></td>\n            </tr>\n            <tr class="detail-pair-linenumbers">\n                <td class="detail-name"><%- _("Search line numbers").t() %></td>\n                <td class="detail-value"></td>\n            </tr>\n        <% } %>\n        <tr>\n            <td></td>\n            <td class="detail-buttons">\n                <% if (isNew) { %>\n                    <button class="btn detail-cancel"><%- _("Cancel").t() %></button>\n                <% } else if (canEditUsers && isSplunkAuth && !isSelf) { %>\n                    <button class="btn detail-delete"><%- _("Delete").t() %></button>\n                <% } %>\n                <button class="btn btn-primary detail-save"><%- _("Save").t() %></button>\n            </td>\n        </tr>\n    </table>\n</div>\n'},561:function(module,exports){module.exports='<div class="tile-shape"></div>\n<p class="tile-name"><%- _("New user").t() %></p>\n'},562:function(module,exports){module.exports='<svg class="scroll-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="36" viewBox="0 0 20 36">\n    <polygon fill="#676767" points="1.868,35.678 0.454,34.264 16.718,18 0.454,1.736 1.868,0.322 19.546,18"\n        <% if (direction === "left") { %>\n            transform="translate(20) scale(-1 1)"\n        <% } %>\n    />\n</svg>\n'},563:function(module,exports){module.exports='<div class="tile-shape">\n    <span class="tile-icon"><%- initials %></span>\n</div>\n<p class="tile-name"><%- fullname %></p>\n'},564:function(module,exports){module.exports='<div class="tile-list-wrapper">\n    <div class="tile-list-container"></div>\n</div>\n'},"views/authentication_users/tiles/Title":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var _=(__webpack_require__("shim/jquery"),__webpack_require__("require/underscore")),i18n=__webpack_require__("stubs/i18n"),SplunkUtil=__webpack_require__("shim/splunk.util"),BaseView=__webpack_require__("views/Base"),template=__webpack_require__(559);return BaseView.extend({moduleId:module.id,template:template,className:"section-header clearfix",initialize:function(){BaseView.prototype.initialize.apply(this,arguments)},render:function(){var numUsers=0;return this.collection.users.each(function(user){"Splunk"===user.entry.content.get("type")&&numUsers++},this),this.$el.html(this.compiledTemplate({_:_,sprintf:SplunkUtil.sprintf,ungettext:i18n.ungettext,canEditUsers:this.model.user.canEditUsers(),isSplunkAuth:"Splunk"===this.model.user.entry.content.get("type"),maxUsers:this.model.serverInfo.entry.content.get("max_users"),numUsers:numUsers})),this}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/table/Table":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),_=__webpack_require__("require/underscore"),RowIterator=__webpack_require__("helpers/grid/RowIterator"),BaseView=__webpack_require__("views/Base"),Row=__webpack_require__("views/authentication_users/table/Row"),TableHead=__webpack_require__("views/shared/TableHead"),template=__webpack_require__(557);return BaseView.extend({moduleId:module.id,template:template,rows:[],events:{"click .model-title":function(e){e.preventDefault();var target=$(e.target),id=target.closest("tr").data("row-expand-collapse-id");this.model.eventModel.trigger("edit",id)}},initialize:function(options){BaseView.prototype.initialize.call(this,options),this.collection.users.on("reset add remove",this.debouncedRender,this),this.children.head=new TableHead({model:this.model.metadataModel,columns:[{label:_("Username").t(),className:"col-username",sortKey:"name"},{label:_("Authentication system").t(),className:"col-auth",sortKey:"type"},{label:_("Full name").t(),className:"col-fullname",sortKey:"realname"},{label:_("Email address").t(),className:"col-email",sortKey:"email"},{label:_("Time zone").t(),className:"col-timezone",sortKey:"tz"},{label:_("Default app").t(),className:"col-app",sortKey:"defaultApp"},{label:_("Default app inherited from").t(),className:"col-inherited",sortKey:"defaultAppSourceRole"},{label:_("Roles").t(),className:"col-roles",sortKey:"roles"},{label:_("Actions").t(),className:"col-actions"}]})},render:function(){_(this.rows).each(function(row){row.off(),row.detach()},this);var $html=$(this.compiledTemplate({}));this.rows=[];var rowIterator=new RowIterator;return rowIterator.eachRow(this.collection.users,function(model,index,rowNumber,isExpanded){var models=$.extend({},this.model,{rowModel:model}),rowView=new Row({model:models,isExpanded:isExpanded,index:index,rowNumber:rowNumber});rowView.on("all",function(){this.trigger.apply(this,arguments)},this),this.rows.push(rowView),$html.find(".item-table-body").append(rowView.render().el)},this),$html.find(".item-table-head-placeholder").replaceWith(this.children.head.render().el),this.$el.html($html),this}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/AuthenticationUsers":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("collections/services/authentication/Users"),__webpack_require__("models/shared/EAIFilterFetchData"),__webpack_require__("routers/BaseListings"),__webpack_require__("views/authentication_users/Master")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,UsersCollection,EAIFilterFetchData,BaseListingsRouter,UsersView){return BaseListingsRouter.extend({initialize:function(){BaseListingsRouter.prototype.initialize.apply(this,arguments),this.setPageTitle(_("Manage Accounts").t()),this.enableAppBar=!1,this.model.metadataModel=new EAIFilterFetchData({sortKey:"name",sortDirection:"asc",count:0,offset:0,ownerSearch:"*",visible:!1}),this.model.metadataModel.on("change",this.fetchListCollection,this),this.collection.users=new UsersCollection},initializeAndRenderViews:function(){this.usersView=new UsersView({model:this.model,collection:this.collection,deferreds:this.deferreds}),this.pageView.$(".main-section-body").html(this.usersView.render().el)},fetchListCollection:function(){var search=this.model.metadataModel.getCalculatedSearch();this.collection.users.fetch({data:{search:search,app:"-",owner:"-",sort_dir:this.model.metadataModel.get("sortDirection"),sort_key:this.model.metadataModel.get("sortKey").split(","),sort_mode:["auto","auto"],count:this.model.metadataModel.get("count"),offset:this.model.metadataModel.get("offset")}})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/table/Row":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),_=__webpack_require__("require/underscore"),SplunkUtil=__webpack_require__("shim/splunk.util"),BaseView=__webpack_require__("views/Base"),TextDialog=__webpack_require__("views/shared/dialogs/TextDialog"),template=__webpack_require__(556);return BaseView.extend({moduleId:module.id,tagName:"tr",template:template,events:{"click .btn-delete":function(e){e.preventDefault();var deleteDialog=new TextDialog({id:"modal_delete"});deleteDialog.settings.set("primaryButtonLabel",_("Delete").t()),deleteDialog.settings.set("cancelButtonLabel",_("Cancel").t()),deleteDialog.settings.set("titleLabel",_("Delete User").t()),deleteDialog.setText(SplunkUtil.sprintf(_("Are you sure you want to delete user %s?").t(),"<em>"+_.escape(this.model.rowModel.entry.get("name"))+"</em>")),deleteDialog.on("click:primaryButton",function(){this.model.rowModel.destroy({wait:!0,success:function(model,response,options){deleteDialog.hide()},error:function(model,response,options){deleteDialog.hide()}})},this),deleteDialog.on("hidden",function(){deleteDialog.remove()},this),deleteDialog.render().appendTo($("body")),deleteDialog.show()}},initialize:function(options){BaseView.prototype.initialize.call(this,options),this.model.rowModel.entry.acl.on("change",this.debouncedRender,this),this.model.rowModel.entry.content.on("change",this.debouncedRender,this)},render:function(){var rowModel=this.model.rowModel,entry=rowModel.entry,content=entry.content,id=rowModel.get("id"),username=entry.get("name"),auth=content.get("type")||"",fullname=content.get("realname")||"",email=content.get("email")||"",timeZone=content.get("tz")||_("None").t(),defaultApp=content.get("defaultApp")||"",inheritedApp=content.get("defaultAppIsUserOverride")?"":content.get("defaultAppSourceRole")||"",roles=content.get("roles");roles=roles?roles.join(", "):"";var application=this.model.application,app=application.get("app"),editURL=SplunkUtil.make_url("manager/"+app+"/authentication/users/"+username+"?uri="+encodeURIComponent(id)+"&action=edit"),cloneURL=SplunkUtil.make_url("manager/"+app+"/authentication/users/_new?uri="+encodeURIComponent(id)+"&action=edit"),showDelete=username!==this.model.user.entry.get("name"),html=this.compiledTemplate({_:_,username:username,auth:auth,fullname:fullname,email:email,timeZone:timeZone,defaultApp:defaultApp,inheritedApp:inheritedApp,roles:roles,editURL:editURL,cloneURL:cloneURL,showDelete:showDelete});return this.$el.html(html),this}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/tiles/UserTileList":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),_=__webpack_require__("require/underscore"),BaseView=__webpack_require__("views/Base"),EmptyTile=__webpack_require__("views/authentication_users/tiles/EmptyTile"),ScrollButton=__webpack_require__("views/authentication_users/tiles/ScrollButton"),UserTile=__webpack_require__("views/authentication_users/tiles/UserTile"),template=__webpack_require__(564);return BaseView.extend({moduleId:module.id,template:template,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.children.scrollButtonLeft=new ScrollButton({direction:"left"}),this.children.scrollButtonLeft.on("scroll",this.scrollLeft,this),this.children.scrollButtonRight=new ScrollButton({direction:"right"}),this.children.scrollButtonRight.on("scroll",this.scrollRight,this),this.children.tiles=[],this.activate()},startListening:function(){this.listenTo(this.collection.users,"reset add remove",this.debouncedRender)},render:function(){this.el.innerHTML||(this.$el.html(this.compiledTemplate({})),this.children.scrollButtonLeft.render().appendTo(this.$el),this.children.scrollButtonRight.render().appendTo(this.$el)),_(this.children.tiles).each(function(tile){tile.remove()},this);var numUsers=0;this.children.tiles=this.collection.users.map(function(user){return"Splunk"===user.entry.content.get("type")&&numUsers++,new UserTile({model:{user:user}})},this);var maxUsers=this.model.serverInfo.entry.content.get("max_users");this.model.user.canEditUsers()&&"Splunk"===this.model.user.entry.content.get("type")&&numUsers<maxUsers&&this.children.tiles.push(new EmptyTile({}));var container=this.$(".tile-list-container");return _(this.children.tiles).each(function(tile){tile.render().appendTo(container)},this),this._highlighter&&this.highlightUser(this._highlighterUsername),this._updateScrollButtons(),this},highlightUser:function(username){this.unhighlightUser();var highlightIndex=-1;if(username?this.collection.users.find(function(user,index){if(user.entry.get("name")===username)return highlightIndex=index,!0}):highlightIndex=this.children.tiles.length-1,!(highlightIndex<0)){var tileWidth=180,tileLeft=tileWidth*highlightIndex;this._highlighterUsername=username,this._highlighter=$("<div></div>").addClass("highlighter").css({left:tileLeft+"px"}).appendTo(this.$(".tile-list-container"));var container=this.$(".tile-list-container");container.scrollLeft(Math.max(Math.min(container.scrollLeft(),tileLeft),tileLeft+tileWidth-container.width())),this._updateScrollButtons()}},unhighlightUser:function(){this._highlighter&&(this._highlighter.remove(),this._highlighter=null,this._highlighterUsername=null)},scrollLeft:function(){var container=this.$(".tile-list-container");container.scrollLeft(container.scrollLeft()-10),this._updateScrollButtons()},scrollRight:function(){var container=this.$(".tile-list-container");container.scrollLeft(container.scrollLeft()+10),this._updateScrollButtons()},_updateScrollButtons:function(){var container=this.$(".tile-list-container"),scrollLeft=container.scrollLeft(),scrollMax=container[0].scrollWidth-container.width();scrollLeft>0?this.children.scrollButtonLeft.$el.show():this.children.scrollButtonLeft.$el.hide(),scrollLeft<scrollMax?this.children.scrollButtonRight.$el.show():this.children.scrollButtonRight.$el.hide()}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/tiles/EmptyTile":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var _=(__webpack_require__("shim/jquery"),__webpack_require__("require/underscore")),BaseView=__webpack_require__("views/Base"),template=__webpack_require__(561);return BaseView.extend({moduleId:module.id,template:template,initialize:function(){BaseView.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(this.compiledTemplate({_:_})),this}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},565:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".authenticationusers-table .toolbar-left>*{float:left}.authenticationusers-table .toolbar-right>*{float:right}.authenticationusers-table .page-label{margin-left:12px;margin-right:12px}",""])},"views/authentication_users/tiles/ScrollButton":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),BaseView=__webpack_require__("views/Base"),template=__webpack_require__(562);return BaseView.extend({moduleId:module.id,template:template,tagName:"a",events:{mousedown:function(e){e.preventDefault(),this._onMouseDown()},click:function(e){e.preventDefault()}},_isScrolling:!1,_scrollInterval:0,initialize:function(options){BaseView.prototype.initialize.apply(this,arguments),"left"===options.direction?this.$el.addClass("scroll-button-left"):this.$el.addClass("scroll-button-right"),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this)},render:function(){return this.el.innerHTML||this.$el.html(this.compiledTemplate({direction:this.options.direction})),this},_onMouseDown:function(){this._isScrolling||(this._isScrolling=!0,this._scrollInterval=setInterval(this._onMouseDown,1e3/60),$(document).on("mouseup",this._onMouseUp)),this.trigger("scroll")},_onMouseUp:function(){this._isScrolling&&(this._isScrolling=!1,clearInterval(this._scrollInterval),$(document).off("mouseup",this._onMouseUp))}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var BaseView=(__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("views/Base")),TableView=__webpack_require__("views/authentication_users/table/Master"),TilesView=__webpack_require__("views/authentication_users/tiles/Master");__webpack_require__("views/authentication_users/Master.pcss");return BaseView.extend({moduleId:module.id,initialize:function(){BaseView.prototype.initialize.apply(this,arguments)},render:function(){return this.children.main||(this.model.serverInfo.isLite()?this.children.main=new TilesView({model:this.model,collection:this.collection}):this.children.main=new TableView({model:this.model,collection:this.collection}),this.children.main.render().appendTo(this.$el)),this}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/tiles/UserTile":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var BaseView=(__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("views/Base")),template=__webpack_require__(563);return BaseView.extend({moduleId:module.id,template:template,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){this.listenTo(this.model.user,"change",this.debouncedRender)},render:function(){var user=this.model.user,username=user.entry.get("name"),fullname=user.entry.content.get("realname")||username||"",initials=this._extractInitials(fullname);return this.$el.attr("data-username",username),this.$el.html(this.compiledTemplate({fullname:fullname,initials:initials})),this},_extractInitials:function(fullname){var names=fullname.split(/\s/),first=names.length>0?names[0].charAt(0):"",last=names.length>1?names[names.length-1].charAt(0):"";return first+last}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/table/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var _=(__webpack_require__("shim/jquery"),__webpack_require__("require/underscore")),SplunkUtil=__webpack_require__("shim/splunk.util"),BaseView=__webpack_require__("views/Base"),Table=__webpack_require__("views/authentication_users/table/Table"),CollectionPaginator=__webpack_require__("views/shared/CollectionPaginator"),LabelControl=__webpack_require__("views/shared/controls/LabelControl"),TextControl=__webpack_require__("views/shared/controls/TextControl"),template=__webpack_require__(558);return BaseView.extend({moduleId:module.id,template:template,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.children.filter=new TextControl({model:this.model.metadataModel,modelAttribute:"nameFilter",inputClassName:"search-query",placeholder:_("filter").t(),updateOnKeyUp:!0}),this.children.pageLabel=new LabelControl({additionalClassNames:"page-label"}),this.children.paginator=new CollectionPaginator({model:this.model.metadataModel,collection:this.collection.users}),this.children.table=new Table({model:this.model,collection:this.collection}),this.collection.users.on("reset add remove",this.updatePageLabel,this)},render:function(){if(!this.el.innerHTML){var application=this.model.application,app=application.get("app"),newURL=SplunkUtil.make_url("manager/"+app+"/authentication/users/_new?action=edit"),html=this.compiledTemplate({_:_,newURL:newURL});this.$el.html(html)}return this.updatePageLabel(),this.children.filter.render().appendTo(this.$(".toolbar-right")),this.children.pageLabel.render().appendTo(this.$(".toolbar-right")),this.children.paginator.render().appendTo(this.$(".toolbar-right")),this.children.table.render().appendTo(this.$el),this},updatePageLabel:function(){var text="",paging=this.collection.users.paging,total=paging.get("total");if(total>1){var offset=paging.get("offset"),perPage=paging.get("perPage"),start=offset+1,end=Math.min(offset+perPage,total);text=SplunkUtil.sprintf(_("Showing %d-%d of %d items").t(),start,end,total)}else total>0&&(text=_("Showing 1 of 1 item").t());this.children.pageLabel.setValue(text)}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/tiles/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),BaseView=(__webpack_require__("require/underscore"),__webpack_require__("views/Base")),TitleView=__webpack_require__("views/authentication_users/tiles/Title"),UserFormView=__webpack_require__("views/authentication_users/tiles/UserForm"),UserTileListView=__webpack_require__("views/authentication_users/tiles/UserTileList");return BaseView.extend({moduleId:module.id,events:{"click .authenticationusers-tiles-usertile":function(e){e.preventDefault();var username=$(e.currentTarget).attr("data-username");username!==this.currentSelectedUser&&username&&this.showUserForm(username)},"click .authenticationusers-tiles-emptytile":function(e){e.preventDefault(),this.showUserForm()},"click .authenticationusers-tiles-title .add-new":function(e){e.preventDefault(),this.showUserForm()}},initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.children.title=new TitleView({model:{user:this.model.user,serverInfo:this.model.serverInfo},collection:{users:this.collection.users}}),this.children.userTileList=new UserTileListView({model:{user:this.model.user,serverInfo:this.model.serverInfo},collection:{users:this.collection.users}}),this.activate()},startListening:function(){this.listenTo(this.collection.users,"reset add remove",this.debouncedRender)},render:function(){if(this.children.title.render().appendTo(this.$el),this.children.userTileList.render().appendTo(this.$el),this._userFormFirstShow)this.children.userForm&&this.children.userForm.render().appendTo(this.$el);else{var username=this.model.user.entry.get("name");username&&this.showUserForm(username)}return this},showUserForm:function(username){if(username||this.model.user.canEditUsers()){this.hideUserForm();var userEdit=null;if(username){if(userEdit=this.collection.users.find(function(user){return user.entry.get("name")===username}),!userEdit)return;this.currentSelectedUser=username,$(".tile-list-container div").not(".highlighter").filter('[data-username="'+username+'"]').addClass("active")}this._userFormFirstShow=!0,this.children.userForm=new UserFormView({model:{user:this.model.user,userEdit:userEdit},collection:{users:this.collection.users}}),this.children.userForm.on("saved deleted cancelled",this.hideUserForm,this),this.children.userForm.render().appendTo(this.$el),this.children.userTileList.highlightUser(username)}},hideUserForm:function(){this.children.userForm&&(this.children.userTileList.unhighlightUser(),this.children.userForm.remove(),this.children.userForm=null,this.currentSelectedUser=null,$(".tile-list-container div").not(".highlighter").removeClass("active"))}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/authentication_users/Master.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(565);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"views/authentication_users/tiles/UserForm":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),_=__webpack_require__("require/underscore"),Backbone=__webpack_require__("require/backbone"),SplunkUtil=__webpack_require__("shim/splunk.util"),UserModel=__webpack_require__("models/services/authentication/User"),BaseView=__webpack_require__("views/Base"),FlashMessages=__webpack_require__("views/shared/FlashMessages"),SyntheticRadioControl=__webpack_require__("views/shared/controls/SyntheticRadioControl"),SyntheticSelectControl=__webpack_require__("views/shared/controls/SyntheticSelectControl"),TextControl=__webpack_require__("views/shared/controls/TextControl"),TimeZoneControl=__webpack_require__("views/shared/controls/TimeZone"),TextDialog=__webpack_require__("views/shared/dialogs/TextDialog"),template=__webpack_require__(560);return BaseView.extend({moduleId:module.id,template:template,events:{"click .detail-save":function(e){this.model.userEdit?this.saveUser():this.createUser()},"click .detail-delete":function(e){this.deleteUser()},"click .detail-cancel":function(e){this.cancel()}},initialize:function(){if(BaseView.prototype.initialize.apply(this,arguments),this.model.userEdit){var roles=this.model.userEdit.entry.content.get("roles");this._workingModel=new Backbone.Model({role:_.indexOf(roles,"admin")>=0||_.indexOf(roles,"sc_admin")>=0?"admin":"user",can_delete:_.indexOf(roles,"can_delete")>=0,email:this.model.userEdit.entry.content.get("email"),realname:this.model.userEdit.entry.content.get("realname"),tz:this.model.userEdit.entry.content.get("tz"),search_assistant:this.model.userEdit.entry.content.get("search_assistant"),
search_syntax_highlighting:this.model.userEdit.getSearchSyntaxHighlighting(),search_auto_format:this.model.userEdit.entry.content.get("search_auto_format"),search_line_numbers:this.model.userEdit.entry.content.get("search_line_numbers")})}else this._workingModel=new Backbone.Model({role:"user",can_delete:!1,search_assistant:UserModel.SEARCH_ASSISTANT.COMPACT,search_syntax_highlighting:UserModel.EDITOR_THEMES.DEFAULT,search_auto_format:!1,search_line_numbers:!1});this.children.rolesInput=new SyntheticRadioControl({model:this._workingModel,modelAttribute:"role",items:[{label:_("Admin").t(),value:"admin"},{label:_("User").t(),value:"user"}]}),this.model.userEdit||(this.children.usernameInput=new TextControl({model:this._workingModel,modelAttribute:"name"})),this.children.canDeleteInput=new SyntheticRadioControl({model:this._workingModel,modelAttribute:"can_delete",items:[{label:_("Yes").t(),value:!0},{label:_("No").t(),value:!1}]}),this.children.emailInput=new TextControl({model:this._workingModel,modelAttribute:"email",placeholder:this.model.userEdit?"":_("name@example.com").t()}),this.children.passwordInput=new TextControl({model:this._workingModel,modelAttribute:"password",placeholder:this.model.userEdit?_("Change password").t():"",password:!0,updateOnKeyUp:!0}),this.children.passwordInput.on("change",this._toggleConfirmPassword,this),this.children.confirmPasswordInput=new TextControl({model:this._workingModel,modelAttribute:"confirmPassword",password:!0}),this.children.fullnameInput=new TextControl({model:this._workingModel,modelAttribute:"realname"}),this.children.timezoneInput=new TimeZoneControl({model:this._workingModel,modelAttribute:"tz",showDefaultLabel:!1}),this.model.userEdit&&this.isSelf()&&(this.children.searchAssistant=new SyntheticSelectControl({toggleClassName:"btn",model:this._workingModel,modelAttribute:"search_assistant",items:[{label:_("Compact").t(),value:UserModel.SEARCH_ASSISTANT.COMPACT},{label:_("Full").t(),value:UserModel.SEARCH_ASSISTANT.FULL},{label:_("None").t(),value:UserModel.SEARCH_ASSISTANT.NONE}]}),this.children.syntaxHighlighting=new SyntheticSelectControl({toggleClassName:"btn",model:this._workingModel,modelAttribute:"search_syntax_highlighting",items:[{label:_("Black on white").t(),value:UserModel.EDITOR_THEMES.BLACK_WHITE},{label:_("Light theme").t(),value:UserModel.EDITOR_THEMES.DEFAULT},{label:_("Dark theme").t(),value:UserModel.EDITOR_THEMES.DARK}]}),this.children.autoFormat=new SyntheticRadioControl({model:this._workingModel,modelAttribute:"search_auto_format",items:[{label:_("On").t(),value:!0},{label:_("Off").t(),value:!1}]}),this.children.lineNumbers=new SyntheticRadioControl({model:this._workingModel,modelAttribute:"search_line_numbers",items:[{label:_("On").t(),value:!0},{label:_("Off").t(),value:!1}]}))},isSelf:function(){return!!this.model.userEdit&&this.model.user.entry.get("name")===this.model.userEdit.entry.get("name")},render:function(){if(this.el.innerHTML||this.$el.html(this.compiledTemplate({_:_,username:this.model.userEdit?this.model.userEdit.entry.get("name"):"",canEditUsers:this.model.user.canEditUsers(),isSplunkAuth:!!this.model.userEdit&&"Splunk"===this.model.userEdit.entry.content.get("type"),isSelf:this.isSelf(),isNew:null==this.model.userEdit})),this.children.rolesInput.render().appendTo(this.$("tr.detail-pair-roles td.detail-value")),this.children.usernameInput&&this.children.usernameInput.render().appendTo(this.$("tr.detail-pair-username td.detail-value")),this.children.canDeleteInput.render().appendTo(this.$("tr.detail-pair-candelete td.detail-value")),this.children.emailInput.render().appendTo(this.$("tr.detail-pair-email td.detail-value")),this.children.passwordInput.render().appendTo(this.$("tr.detail-pair-password td.detail-value")),this.children.confirmPasswordInput.render().appendTo(this.$("tr.detail-pair-confirmpassword td.detail-value")),this.children.fullnameInput.render().appendTo(this.$("tr.detail-pair-fullname td.detail-value")),this.children.timezoneInput.render().appendTo(this.$("tr.detail-pair-timezone td.detail-value")),this.children.searchAssistant&&this.children.searchAssistant.render().appendTo(this.$("tr.detail-pair-src-assistant td.detail-value")),this.children.syntaxHighlighting&&this.children.syntaxHighlighting.render().appendTo(this.$("tr.detail-pair-syntaxhighlight td.detail-value")),this.children.autoFormat&&this.children.autoFormat.render().appendTo(this.$("tr.detail-pair-autoformat td.detail-value")),this.children.lineNumbers&&this.children.lineNumbers.render().appendTo(this.$("tr.detail-pair-linenumbers td.detail-value")),!this.model.user.canEditUsers()||this.isSelf()){var role=this._workingModel.get("role")||"N/A";this.$("tr.detail-pair-roles td.detail-value").html(role.charAt(0).toUpperCase()+role.substring(1))}return this.model.user.isAdmin()||this.model.user.isCloudAdmin()||this.children.canDeleteInput.disable(),this.model.userEdit&&"Splunk"!==this.model.userEdit.entry.content.get("type")&&(this.children.rolesInput.disable(),this.children.canDeleteInput.disable(),this.children.emailInput.disable(),this.children.passwordInput.disable(),this.children.confirmPasswordInput.disable(),this.children.fullnameInput.disable(),this.$("tr.detail-pair-password").hide(),this.children.searchAssistant&&this.children.searchAssistant.disable(),this.children.syntaxHighlighting&&this.children.syntaxHighlighting.disable(),this.children.autoFormat&&this.children.autoFormat.disable(),this.children.lineNumbers&&this.children.lineNumbers.disable()),this._toggleConfirmPassword(),this},saveUser:function(){if(this.model.userEdit){var self=this,attributes=_(this._workingModel.attributes).clone(),password=attributes.password,confirmPassword=attributes.confirmPassword,roles=attributes.roles=[];return roles.push(attributes.role),attributes.can_delete&&roles.push("can_delete"),delete attributes.role,delete attributes.can_delete,password||delete attributes.password,delete attributes.confirmPassword,password&&password!==confirmPassword?(this.model.userEdit.error.set("messages",[{type:"error",message:_("Passwords don't match").t()}]),void this._showError(this.model.userEdit)):void this.model.userEdit.save(attributes,{patch:!0,wait:!0,success:function(model,response,options){self.trigger("saved")},error:function(model,response,options){self._showError(model)}})}},createUser:function(){if(!this.model.userEdit){var self=this,attributes=_(this._workingModel.attributes).clone(),username=attributes.name,password=attributes.password,confirmPassword=attributes.confirmPassword,roles=attributes.roles=[];roles.push(attributes.role),attributes.can_delete&&roles.push("can_delete"),delete attributes.role,delete attributes.can_delete,password||delete attributes.password,delete attributes.confirmPassword;var newUser=new UserModel;return newUser.entry.content.set(attributes),username?password?password!==confirmPassword?(newUser.error.set("messages",[{type:"error",message:_("Passwords don't match").t()}]),void this._showError(newUser)):void this.collection.users.create(newUser,{wait:!0,success:function(model,response,options){self.trigger("saved")},error:function(model,response,options){self._showError(model)}}):(newUser.error.set("messages",[{type:"error",message:_("Password required").t()}]),void this._showError(newUser)):(newUser.error.set("messages",[{type:"error",message:_("Username required").t()}]),void this._showError(newUser))}},deleteUser:function(){if(this.model.userEdit){var self=this,deleteDialog=new TextDialog({id:"modal_delete"});deleteDialog.settings.set("primaryButtonLabel",_("Delete").t()),deleteDialog.settings.set("cancelButtonLabel",_("Cancel").t()),deleteDialog.settings.set("titleLabel",_("Delete User").t()),deleteDialog.setText(SplunkUtil.sprintf(_("Are you sure you want to delete user %s?").t(),"<em>"+_.escape(this.model.userEdit.entry.get("name"))+"</em>")),deleteDialog.on("click:primaryButton",function(){self.model.userEdit.destroy({wait:!0,success:function(model,response,options){deleteDialog.hide(),self.trigger("deleted")},error:function(model,response,options){deleteDialog.hide(),self._showError(model)}})},this),deleteDialog.on("hidden",function(){deleteDialog.remove()},this),deleteDialog.render().appendTo($("body")),deleteDialog.show()}},cancel:function(){this.trigger("cancelled")},_toggleConfirmPassword:function(){var password=this.children.passwordInput.getValue();!password&&this.model.userEdit?(this.$("tr.detail-pair-confirmpassword").css({visibility:"hidden"}).appendTo(this.$("table.detail-table tbody")),this.children.confirmPasswordInput.setValue("")):this.$("tr.detail-pair-confirmpassword").css({visibility:""}).insertAfter(this.$("tr.detail-pair-password"))},_showError:function(model){this.children.flashMessages&&this.children.flashMessages.remove(),this.children.flashMessages=new FlashMessages({model:model}),this.children.flashMessages.render().appendTo(this.$(".detail-messages"))}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});