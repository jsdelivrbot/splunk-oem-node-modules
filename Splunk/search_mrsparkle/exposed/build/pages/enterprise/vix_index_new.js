webpackJsonp([74],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/enterprise")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("routers/VixIndexNew"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(VixIndexNewRouter,router_utils){new VixIndexNewRouter;router_utils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/VixIndexNew":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("routers/Base"),__webpack_require__("models/services/data/vix/Index"),__webpack_require__("models/classicurl"),__webpack_require__("collections/services/data/vix/Providers"),__webpack_require__("views/virtual_indexes/config/IndexSetup")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,BaseRouter,IndexModel,ClassicurlModel,ProvidersCollection,IndexSetupView){return BaseRouter.extend({initialize:function(){BaseRouter.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.indexModel=new IndexModel,this.providersCollection=new ProvidersCollection},page:function(locale,app,page){BaseRouter.prototype.page.apply(this,arguments),ClassicurlModel.fetch({success:function(model,response){var indexDfd,providersDfd=this.providersCollection.fetch();$.when(providersDfd).done(_(function(){var id=ClassicurlModel.get("id");id?(this.indexModel.set(this.indexModel.idAttribute,id),this.indexModel.set({mode:"edit"},{silent:!0}),this.setPageTitle(_("Edit virtual index").t()),indexDfd=this.indexModel.fetch()):(this.indexModel.set({mode:"new"},{silent:!0}),this.setPageTitle(_("New virtual index").t()),indexDfd=$.Deferred(),indexDfd.resolve()),$.when(indexDfd,this.deferreds.pageViewRendered).done(_(function(){this.indexSetup=new IndexSetupView({model:{index:this.indexModel,application:this.model.application},collection:{providers:this.providersCollection}}),$(".preload").replaceWith(this.pageView.el),this.pageView.$(".main-section-body").append(this.indexSetup.render().el)}).bind(this))}).bind(this))}.bind(this)})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/virtual_indexes/config/IndexSetup":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/virtual_indexes/config/forms/ProviderAdditionalSettings"),__webpack_require__("views/virtual_indexes/config/forms/ProviderNewSettings"),__webpack_require__("views/Base"),__webpack_require__("collections/shared/TimeZones"),__webpack_require__("views/shared/controls/TimeZone"),__webpack_require__("views/virtual_indexes/custom_controls/TimeSecondsControl"),__webpack_require__("views/shared/controls/ControlGroup"),__webpack_require__("views/shared/controls/Section"),__webpack_require__("views/shared/FlashMessages"),__webpack_require__(1163),__webpack_require__("uri/route"),__webpack_require__("util/splunkd_utils"),__webpack_require__("util/string_utils"),__webpack_require__("views/virtual_indexes/shared.pcss"),__webpack_require__("views/virtual_indexes/config/IndexSetup.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,ProviderAdditionalSettings,ProviderNewSettings,BaseView,TimeZoneTable,TimeZoneControl,TimeSecondsControl,ControlGroup,Section,FlashMessagesView,Template,route,splunkdUtils,utils,cssShared,css){return BaseView.extend({moduleId:module.id,template:Template,events:{"click .btn-primary":function(e){e.preventDefault(),this.model.index.entry.content.set(this.model.additionalSettings.attributes);var filteredKeys=this.model.newSettings.keys().filter(function(key){return 0!==key.indexOf("vix.")});filteredKeys.length?this.children.flashMessages.flashMsgHelper.addGeneralMessage(this.noVixPrefixErrorMessageId,{type:splunkdUtils.ERROR,html:_("Keys that do not start with 'vix.' are invalid. Invalid keys are: ").t()+filteredKeys}):this.children.flashMessages.flashMsgHelper.removeGeneralMessage(this.noVixPrefixErrorMessageId);var duplicates=_.intersection(this.model.newSettings.keys(),this.model.additionalSettings.keys());if(duplicates.length?this.children.flashMessages.flashMsgHelper.addGeneralMessage(this.duplicateKeyErrorMessageId,{type:splunkdUtils.ERROR,html:_("Adding duplicate keys is not allowed. Duplicate keys are: ").t()+duplicates}):this.children.flashMessages.flashMsgHelper.removeGeneralMessage(this.duplicateKeyErrorMessageId),filteredKeys.length||duplicates.length)return void $("html, body").animate({scrollTop:0},"fast");this.model.index.entry.content.set(this.model.newSettings.attributes),this.model.index.entry.content.set({name:this.model.index.entry.get("name")},{silent:!0});var inputPath=this.model.index.entry.content.get("vix.input.1.path"),recursiveProcess=this.formModel.get("recursiveProcess"),inputPathChanged=!1;inputPath&&(recursiveProcess?utils.strEndsWith(inputPath,"/")?(inputPath+="...",inputPathChanged=!0):utils.strEndsWith(inputPath,"...")||(inputPath+="/...",inputPathChanged=!0):utils.strEndsWith(inputPath,"...")&&(inputPath=inputPath.substring(0,inputPath.length-3),inputPathChanged=!0),inputPathChanged&&this.model.index.entry.content.set({"vix.input.1.path":inputPath},{silent:!0})),this.formModel.get("customizeTimestamp")||this.sections.time.clear();var validContent=this.model.index.entry.content.set({},{validate:!0}),validEntry=this.model.index.entry.set({},{validate:!0});validContent&&validEntry&&(this.model.index.save({},{silent:!0}).done(function(){window.location.href=this._getVirtualIndexesRoute()}.bind(this)),$("html, body").animate({scrollTop:0},"fast"))},"click .cancel":function(e){e.preventDefault(),window.location.href=this._getVirtualIndexesRoute()}},initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.formModel=new Backbone.Model,this.sections={},this.children.flashMessages=new FlashMessagesView({model:{index:this.model.index,indexEntry:this.model.index.entry,indexContent:this.model.index.entry.content}}),this.noVixPrefixErrorMessageId=_.uniqueId("no-vix-prefix-error-"),this.duplicateKeyErrorMessageId=_.uniqueId("dup-key-error-");var that=this;if(this.isEditMode()){var hdfsPath=this.model.index.entry.content.get("vix.input.1.path");utils.strEndsWith(hdfsPath,"/...")?(hdfsPath=4==hdfsPath.length?"/":hdfsPath.slice(0,hdfsPath.lastIndexOf("/")),this.model.index.entry.content.set({"vix.input.1.path":hdfsPath}),this.formModel.set({recursiveProcess:!0})):this.formModel.set({recursiveProcess:!1})}else this.model.index.entry.set("name",""),this.formModel.set({recursiveProcess:!0});this.children.name=new ControlGroup({className:"index-name control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"name",model:this.model.index.entry,save:!1},label:_("Name").t()}),this.providerNames=this.collection.providers.map(function(model){return{label:model.entry.get("name"),value:model.entry.get("name")}}),this.children.provider=new ControlGroup({className:"index-provider control-group",controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{modelAttribute:"vix.provider",model:this.model.index.entry.content,items:this.providerNames,className:"btn-group view-count",menuWidth:"wide",maxLabelLength:80,toggleClassName:"btn"},label:_("Provider").t()}),this.children.description=new ControlGroup({className:"index-description control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"vix.description",model:this.model.index.entry.content,save:!1,placeholder:"optional"},label:_("Description").t()}),this.formModel.trigger("update","provider"),!this.model.index.entry.content.get("vix.provider")&&this.providerNames&&this.providerNames.length>0&&this.model.index.entry.content.set("vix.provider",this.providerNames[0].value),this.providerNames.length<=1?this.children.provider.disable():this.children.provider.enable(),this.children.pathHdfs=new ControlGroup({className:"index-path-hdfs control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"vix.input.1.path",model:this.model.index.entry.content,save:!1},label:_("Path to data in HDFS").t(),help:_("Example: /home/data/apache/logs/").t(),tooltip:_("Root path to the data that belongs in this virtual index").t()}),this.children.recursiveProcess=new ControlGroup({className:"index-recursive control-group",controlType:"SyntheticCheckbox",controlClass:"controls-block",controlOptions:{modelAttribute:"recursiveProcess",model:this.formModel,save:!1},label:_("Recursively process the directory").t()}),this.children.whitelist=new ControlGroup({className:"index-whitelist control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"vix.input.1.accept",model:this.model.index.entry.content,save:!1,placeholder:"optional"},label:_("Whitelist").t(),help:_("Regex that matches the file path. Example: \\.gz$").t(),tooltip:_("Regular expression that file paths that belong in this virtual index should match").t()}),this.children.customizeTimestamp=new ControlGroup({className:"index-whitelist control-group",controlType:"SyntheticCheckbox",controlClass:"controls-block",controlOptions:{modelAttribute:"customizeTimestamp",model:this.formModel,save:!1},label:_("Customize timestamp format").t()}),this.children.timeRegex=new ControlGroup({className:"index-time-regex control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"vix.input.1.et.regex",model:this.model.index.entry.content,save:!1},label:_("Time capturing regex").t(),help:_("Regex to capture date/time from path. Example: /home/data/(\\d+)/(\\d+)/").t(),tooltip:_("Regex with capturing groups to extract time components from paths. The capture groups are concatenated and interpreted using the format below").t()}),this.children.timeFormat=new ControlGroup({className:"index-time-format control-group",controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"vix.input.1.et.format",model:this.model.index.entry.content,save:!1},label:_("Time Format").t(),help:_("Format to interpret the extracted time string as. Example: yyyyMMddHH").t(),tooltip:_("Format string to interpret the time string extracted from the path. The format is Java's SimpleDateFormat").t()}),this.children.timeOffset=new ControlGroup({className:"control-group",controlClass:"controls-block",controlType:"TimeSecondsControl",controlTypes:{TimeSecondsControl:TimeSecondsControl},controlOptions:{modelAttribute:"vix.input.1.et.offset",model:this.model.index.entry.content,save:!1},label:_("Time Adjustment").t(),help:_("Earliest time offset (1h, 1d, etc.)").t()}),this.children.timeRange=new ControlGroup({className:"control-group",controlClass:"controls-block",controlType:"TimeSecondsControl",controlTypes:{TimeSecondsControl:TimeSecondsControl},controlOptions:{modelAttribute:"vix.input.1.lt.offset",model:this.model.index.entry.content,save:!1},label:_("Time Range").t(),help:_("How much data is contained in the dir (1h, 1d, etc.)").t()}),this.children.timeZone=new ControlGroup({className:"index-time-offset control-group",controlClass:"controls-block",controlType:"TimeZone",controlTypes:{TimeZone:TimeZoneControl},controlOptions:{modelAttribute:"vix.input.1.et.timezone",model:this.model.index.entry.content,save:!1},label:_("Time Zone").t()}),this.listenTo(this.model.index.entry.content,"change:vix.input.1.et.regex reset:vix.input.1.et.regex change:vix.input.1.et.format reset:vix.input.1.et.format change:vix.input.1.et.timezone reset:vix.input.1.et.timezone",function(){var regex=this.model.index.entry.content.get("vix.input.1.et.regex"),format=this.model.index.entry.content.get("vix.input.1.et.format"),timezone=this.model.index.entry.content.get("vix.input.1.et.timezone");this.model.index.entry.content.set({"vix.input.1.lt.regex":regex,"vix.input.1.lt.format":format,"vix.input.1.lt.timezone":timezone})}),this.sections.basic=new Section({label:"",id:"basic",children:this.children,model:{form:this.formModel,data:this.model.provider},order:["name","description","provider"]}),this.sections.paths=new Section({label:_("Paths").t(),id:"paths",children:this.children,model:{data:this.model.index},order:["pathHdfs","recursiveProcess","whitelist"]}),this.sections.time=new Section({label:_("Time").t(),id:"time",children:this.children,model:{data:this.model.index},order:["timeRegex","timeFormat","timeOffset","timeRange","timeZone"]}),this._initAdditionalSettings();var sectionDfds=_.map(this.sections,function(section){return section.getLoadStatusDfd()},this);$.when.apply($,sectionDfds).then(function(){this.formModel.trigger("loadComplete")}.bind(this)),this.formModel.on("change:customizeTimestamp",function(){this.toggleCustomizeTimestamp()},this),this.initializeCustomizeTimestamp(),this.model.index.entry.content.on("change:vix.provider",function(){var providerName=that.model.index.entry.content.get("vix.provider"),provider=that.collection.providers.find(function(prov){return prov.entry.get("name")==providerName}),family=provider.entry.content.get("vix.family");"hadoop"==family?(that.children.paths.show(!0),that.children.customizeTimestamp.show(),that.toggleCustomizeTimestamp()):(that.children.paths.hide(!0),that.children.customizeTimestamp.hide(),that.sections.time.hide(!0))},this)},toggleCustomizeTimestamp:function(){this.formModel.get("customizeTimestamp")?this.sections.time.show(!0):this.sections.time.hide(!0)},initializeCustomizeTimestamp:function(){var groupHasValues=!!_.find(["time"],function(section){return!!this.sections.hasOwnProperty(section)&&!!_.find(this.sections[section].getChildren(),function(child){if("function"==typeof child.getModelAttributes){var attr=child.getModelAttributes()[0],val=this.model.index.entry.content.get(attr);return val}return!1},this)},this);this.formModel.set("customizeTimestamp",groupHasValues)},_initAdditionalSettings:function(){var filteredKeys=this.model.index.entry.content.keys().filter(function(key){return 0==key.indexOf("vix.")}),filteredAttrs=_(this.model.index.entry.content.omit(this._getChildrenAttributes())).pick(filteredKeys);this.model.additionalSettings=new Backbone.Model(filteredAttrs),this.model.newSettings=new Backbone.Model,this.children.additionalSettingsView=new ProviderAdditionalSettings({model:this.model.additionalSettings}),this.children.newSettingsView=new ProviderNewSettings({model:this.model.newSettings}),this.sections.additionalSettings=new Section({label:_("Settings").t(),id:"additional-settings",description:_("").t(),children:this.children,model:{data:this.model.index},order:["additionalSettingsView","newSettingsView"]}),this.sections.additionalSettings.loadStatusDfd.resolve()},_getChildrenAttributes:function(){var results=_.map(this.children,function(child){return child.hasOwnProperty("childList")?child.childList[0].getModelAttribute():""});return results.push("vix.input.1.lt.regex","vix.input.1.lt.format","vix.input.1.lt.timezone","vix.input.roots","vix.provider.description"),results},managerRoute:function(page,options){return route.manager(this.model.application.get("root"),this.model.application.get("locale"),"system",page,options)},_getVirtualIndexesRoute:function(){return route.manager(this.model.application.get("root"),this.model.application.get("locale"),"system","virtual_indexes",{data:{t:"indexes"}})},isEditMode:function(){return"edit"==this.model.index.get("mode")},render:function(){var html=this.compiledTemplate({isEdit:this.isEditMode(),managerRoute:this.managerRoute.bind(this)}),$html=$(html);return this.el.innerHTML||($html.find(".admin-content").append(this.children.flashMessages.render().el),$html.find(".admin-content").append(this.sections.basic.render().el),$html.find(".admin-content").append(this.sections.paths.render().el),$html.find(".admin-content").append(this.children.customizeTimestamp.render().el),$html.find(".admin-content").append(this.sections.time.render().el),$html.find(".admin-content").append(this.sections.additionalSettings.render().el),$html.find(".admin-content").append('<div class="button-wrapper" />'),$html.find(".admin-content .button-wrapper").append('<a href="#" class="btn cancel pull-left">'+_("Cancel").t()+"</a>"),$html.find(".admin-content .button-wrapper").append('<a href="#" class="btn btn-primary pull-right">'+_("Save").t()+"</a>")),this.$el.html($html),this.isEditMode()&&this.children.name.childList[0].disable(),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/virtual_indexes/config/forms/ProviderAdditionalSettings":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/controls/ControlGroup")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,BaseView,ControlGroup){return BaseView.extend({moduleId:module.id,initialize:function(options){BaseView.prototype.initialize.call(this,options)},createSetting:function(attribute){return new ControlGroup({controlType:"Text",controlOptions:{modelAttribute:attribute,model:this.model,canClear:!0},label:attribute})},render:function(){return this.children&&_(this.children).each(function(control){control.detach()},this),this.$el.html(this.compiledTemplate({})),_(this.model.keys()).each(function(key){_(this.children).has(key)||(this.children[key]=this.createSetting(key))},this),_(this.children).each(function(control,key){this.model.has(key)?this.children[key].render().appendTo(this.$(".controls-placeholder")):delete this.children[key]},this),this},template:'\t                <div class="controls-placeholder form form-horizontal"></div>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/virtual_indexes/config/forms/ProviderNewSettings":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/Base"),__webpack_require__("views/virtual_indexes/config/forms/ProviderNewSettingRow")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,BaseView,ProviderNewSettingRow){return BaseView.extend({moduleId:module.id,events:{"click .create-new-setting":function(e){e.preventDefault();var newRow=new ProviderNewSettingRow({model:this.model,numRow:this.settingRows.length});this.settingRows.push(newRow),newRow.render().appendTo(this.$(".new-setting-placeholder")),this.listenTo(newRow,"closeRow",this.onCloseRow)}},initialize:function(options){BaseView.prototype.initialize.call(this,options),this.settingRows=[]},onCloseRow:function(row,key){var rowIndex=_(this.settingRows).indexOf(row);this.stopListening(row),row.detach(),rowIndex!=-1&&this.settingRows.splice(rowIndex,1)},render:function(){return this.$el.html(this.compiledTemplate({})),this},template:'\t                <div class="new-setting-placeholder"></div>\t                <div><a href="#" class="create-new-setting"><%- _("New Setting").t() %></a></div>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/virtual_indexes/config/forms/ProviderNewSettingRow":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/controls/KeyValueControl")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,BaseView,KeyValueControl){return BaseView.extend({moduleId:module.id,className:"clearfix",events:{"click .close-row":"onCloseRow","keypress .close-row":function(e){13===e.keyCode&&this.onCloseRow(e)}},initialize:function(options){BaseView.prototype.initialize.call(this,options),this.children.keyValueControl=new KeyValueControl({model:this.model,keyTextControlOptions:{modelAttribute:"vix.newSetting.key"+this.options.numRow},valueTextControlOptions:{modelAttribute:"vix.newSetting.value"+this.options.numRow}})},onCloseRow:function(e){var key=this.children.keyValueControl.getKey();this.children.keyValueControl.unsetKey(),this.trigger("closeRow",this,key)},render:function(){return this.children.keyValueControl&&this.children.keyValueControl.detach(),this.$el.html(this.compiledTemplate({})),this.children.keyValueControl.render().appendTo(this.$(".key-value-control-placeholder")),this},template:'\t                <span class="key-value-control-placeholder" ></span>\t                <span tabindex="0" class="font-icon close-row">⊗</span>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/shared/controls/Section":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView){return BaseView.extend({moduleId:module.id,initialize:function(){BaseView.prototype.initialize.apply(this,arguments);var defaults={id:"",label:"",children:[],isVisible:!0};_.defaults(this.options,defaults),this.order=this.options.order,this.children=this.options.children,this.loadStatusDfd=$.Deferred(),this.waitingList=[],this.doneList=[],_.each(this.order,function(name){this.children.hasOwnProperty(name)||this.waitingList.push(name)},this),0==this.waitingList.length&&this.loadStatusDfd.resolve(),this.model=this.model||{},this.model.form&&this.model.form.on("update",function(childName){$("#"+childName+"-placeholder").replaceWith(this.children[childName].render().el),$.inArray(childName,this.waitingList)>-1&&this.doneList.push(childName),this.doneList.length==this.waitingList.length&&this.loadStatusDfd.resolve()},this)},events:{"click .section-toggle":function(e){$(e.currentTarget).toggle(),e.preventDefault()}},getLoadStatusDfd:function(){return this.loadStatusDfd},getChildren:function(){return _.map(this.order,function(childName){if(this.children.hasOwnProperty(childName))return this.children[childName]},this)},show:function(disableAnimation){this.options.isVisible=!0,disableAnimation?this.$el.show():this.$el.show("fast"),this.model.data&&this.model.data.hasOwnProperty("enableAttr")&&_.each(this.order,function(childName){this.children.hasOwnProperty(childName)&&this.children[childName].hasOwnProperty("getModelAttributes")&&_.each(this.children[childName].getModelAttributes(),function(attr){this.model.data.enableAttr(attr)},this)},this)},hide:function(disableAnimation){this.options.isVisible=!1,disableAnimation?this.$el.hide():this.$el.hide("fast"),this.model.data&&this.model.data.hasOwnProperty("disableAttr")&&_.each(this.order,function(childName){this.children.hasOwnProperty(childName)&&this.children[childName].hasOwnProperty("getModelAttributes")&&_.each(this.children[childName].getModelAttributes(),function(attr){this.model.data.disableAttr(attr)},this)},this)},clear:function(){_.each(this.getChildren(),function(child){_.each(child.children,function(grandChild){grandChild.model.set(grandChild.options.modelAttribute,"",{silent:!0})},this)},this)},isHidden:function(){return!this.options.isVisible},render:function(){var html=this.compiledTemplate({options:this.options});return this.$el.html(html),_.each(this.order,function(childName){var el;el=this.children.hasOwnProperty(childName)?this.children[childName].render().el:'<div id="'+childName+'-placeholder"/>',this.$(".children").append(el)},this),this},template:'\t                <h5 class="section"><%- options.label %></h5>\t                <p><%- options.description %></p>\t                <div class="children"></div>\t                '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},1163:function(module,exports){module.exports="<div class=\"index-setup section-padded section-header\">\n    <div class=\"ManagerBar\">\n        <h2 class=\"ManagerPageTitle section-title\">\n            <% if (!isEdit) { %>\n            <%= _('New virtual index').t() %>\n            <% } else { %>\n            <%= _('Edit virtual index').t() %>\n            <% } %>\n        </h2>\n        <div class=\"breadcrumb section-description\">\n            <a href=\"<%- managerRoute('virtual_indexes', {data:{t: 'indexes'}}) %>\"><%= _('Virtual indexes').t() %></a> »\n            <% if (!isEdit) { %>\n            <%= _('Add new index').t() %>\n            <% } else { %>\n            <%= _('Edit index').t() %>\n            <% } %>\n        </div>\n    </div>\n\n    <div class=\"admin-content dashboard-panel clearfix\"></div>\n    <div class=\"additional-settings-placeholder\"></div>\n</div>\n"},"views/virtual_indexes/config/IndexSetup.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(1164);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},1164:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".shared-controls-syntheticcheckboxcontrol label.checkbox{padding:0}.index-recursive .checkbox,.index-recursive .control,.index-recursive .control-label,.index-recursive .controls,.index-whitelist .checkbox,.index-whitelist .control,.index-whitelist .control-label,.index-whitelist .controls{display:inline}.index-recursive .checkbox,.index-whitelist .checkbox{margin-left:1em}.shared-dynamicfields .elements td{padding:5px}.key-text-control-placeholder .shared-controls-textcontrol{float:right}.shared-controls-keyvaluecontrol{margin-bottom:10px}.form-horizontal .control-label{width:300px}.form-horizontal .controls{margin-left:310px}.virtualindexes-config-forms-provideradditionalsettings .shared-controls-textcontrol .control-clear{right:60px}.virtualindexes-config-forms-providernewsettingrow{margin-bottom:10px}.virtualindexes-config-forms-providernewsettingrow .key-text-control-placeholder{width:310px}.virtualindexes-config-forms-providernewsettingrow .key-value-control-placeholder{float:left}.virtualindexes-config-forms-providernewsettingrow .close-row{line-height:26px;font-size:16px;color:#999;cursor:pointer}",""])}});