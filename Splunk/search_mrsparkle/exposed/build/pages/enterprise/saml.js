webpackJsonp([60],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/enterprise")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("routers/SAML"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(SAMLRouter,router_utils){new SAMLRouter;router_utils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},1124:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".apply-metadata-button{float:right}.upload-file-button{margin-left:20px;margin-bottom:10px}.section-divider{padding-bottom:15px}.section-desc{margin-bottom:10px}.alias-header,.aqr-header{cursor:pointer}.accumulator{width:600px!important}.availableOptionsContainer,.selectedOptionsContainer{width:280px!important}.download-file-button{margin-left:20px}.saml-signatureAlgorithm .btn,.saml-sloBinding .btn,.saml-ssoBinding .btn{width:120px}.saml-nameIdFormat .dropdown-toggle{vertical-align:-10px;width:auto}.warning-text{color:red}",""])},"views/saml/PageController":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("controllers/BaseManagerPageController"),__webpack_require__("collections/services/admin/SAML-groups"),__webpack_require__("collections/services/authorization/Roles"),__webpack_require__("models/services/authentication/providers/SAML"),__webpack_require__("models/shared/EAIFilterFetchData"),__webpack_require__("models/services/admin/SAML-idp-metadata"),__webpack_require__("models/services/admin/SAML-groups"),__webpack_require__("models/services/authentication/providers/services"),__webpack_require__("views/saml/ConfigEditDialog"),__webpack_require__("views/saml/GroupEditDialog"),__webpack_require__("views/saml/GridRow"),__webpack_require__("views/saml/NewButtons"),__webpack_require__("views/shared/pcss/basemanager.pcss"),__webpack_require__("views/saml/PageController.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,BaseController,SAMLGroupsCollection,RolesCollection,SAMLModel,SAMLFetchData,SAMLMetadataModel,SAMLGroupModel,AuthModuleModel,ConfigEditDialog,GroupEditDialog,GridRow,NewButtons,cssShared,css){return BaseController.extend({moduleId:module.id,initialize:function(options){this.collection=this.collection||{},this.model=this.model||{},this.deferreds=this.deferreds||{},this.model.controller=new Backbone.Model,this.model.saml=new SAMLModel,this.model.samlMetadata=new SAMLMetadataModel,this.model.authModule=new AuthModuleModel,this.deferreds.authModule=this.refreshAuthModule(),this.collection.roles=new RolesCollection,this.deferreds.roles=this.collection.roles.fetch({data:{count:"-1"}}),options.header={pageDesc:_("Map the groups from your SAML server to roles in Splunk Enterprise. <br>").t()+_("Once mapped, SAML groups possess the abilities and permissions of the assigned Splunk roles. <br>").t()+_("Click SAML Configuration to modify your existing SAML setup. Click New Group to add a new SAML group.").t(),learnMoreLink:"learnmore.launcher.saml"},options.entitiesPlural=_("SAML Groups").t(),options.entitySingular=_("SAML Group").t(),options.grid={noEntitiesMessage:_("No SAML Groups are defined.").t(),showAppFilter:!1,showOwnerFilter:!1,showSharingColumn:!1},options.model=this.model,options.collection=this.collection,options.deferreds=this.deferreds,options.entitiesCollectionClass=SAMLGroupsCollection,options.entityModelClass=SAMLGroupModel,options.customViews={AddEditDialog:GroupEditDialog,NewButtons:NewButtons,GridRow:GridRow},BaseController.prototype.initialize.call(this,options)},initEventHandlers:function(options){BaseController.prototype.initEventHandlers.call(this,options),this.listenTo(this.model.controller,"configSAML",this.onConfigSAML),this.listenTo(this.model.controller,"fetchMetadata",this.onFetchMetadata)},refreshAuthModule:function(){return this.model.authModule.fetch()},onConfigSAML:function(){this.showConfigDialog()},onSaveDialogHidden:function(){this.stopListening(this.children.editDialog,"samlSaved",this.onSAMLSaved),this.stopListening(this.children.editDialog,"hidden",this.onSaveDialogHidden)},onFetchMetadata:function(metadataXml){this.fetchSAMLMetadata(metadataXml).done(function(){this.model.controller.trigger("metadataComplete",this.model.samlMetadata)}.bind(this))},onSAMLSaved:function(){this.fetchEntitiesCollection(),this.refreshAuthModule()},fetchSAMLMetadata:function(metadataXml){return this.model.samlMetadata.id="",this.model.samlMetadata.fetch({data:{idpMetadataPayload:metadataXml}})},showConfigDialog:function(){this.model.saml.clear({silent:!0}),"SAML"===this.model.authModule.entry.content.get("active_authmodule")?(this.model.saml.isSAMLMode=!0,this.model.saml.set(this.model.saml.idAttribute,"")):this.model.saml.isSAMLMode=!1,this.model.saml.fetch().done(function(){var dialogOptions={};dialogOptions.model=this.model,dialogOptions.collection=this.collection,this.children.editDialog=new ConfigEditDialog(dialogOptions),this.listenTo(this.children.editDialog,"samlSaved",this.onSAMLSaved),this.listenTo(this.children.editDialog,"hidden",this.onSaveDialogHidden),this.children.editDialog.render().appendTo($("body")),this.children.editDialog.show()}.bind(this))},render:function(){return $.when(this.renderDfd).then(function(){var authMode=this.model.authModule.getAuthMode();this.children.masterView&&(this.children.masterView.detach(),this.children.masterView.render().appendTo(this.$el),"SAML"!==authMode&&this.model.controller.trigger("configSAML"))}.bind(this)),this}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/admin/SAML-idp-metadata":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("models/SplunkDBase"),__webpack_require__("util/splunkd_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,BaseModel,splunkDUtils){return BaseModel.extend({url:"admin/SAML-idp-metadata",urlRoot:"admin/SAML-idp-metadata",initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)},isNew:function(){return!1},_onerror:function(collection,response,options){var messages=splunkDUtils.xhrErrorResponseParser(response,this.id);_.each(messages,function(msgObj){msgObj.message&&msgObj.message.indexOf("In handler '")>-1&&(msgObj.message=msgObj.message.substring(msgObj.message.indexOf("': ")+3))}),this.trigger("serverValidated",!1,this,messages)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"collections/services/admin/SAML-groups":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/services/admin/SAML-groups"),__webpack_require__("collections/SplunkDsBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(SAMLGroupsModel,SplunkDsBaseCollection){return SplunkDsBaseCollection.extend({initialize:function(){SplunkDsBaseCollection.prototype.initialize.apply(this,arguments)},url:"admin/SAML-groups",model:SAMLGroupsModel})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/admin/SAML-groups":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/SplunkDBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(BaseModel){return BaseModel.extend({url:"admin/SAML-groups",urlRoot:"admin/SAML-groups",initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)},sync:function(method,model,options){return options=options||{},"update"!==method&&"create"!==method||(options.traditional=!0),BaseModel.prototype.sync.call(this,method,model,options)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/authentication/providers/SAML":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("models/services/data/inputs/BaseInputModel"),__webpack_require__("util/splunkd_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,BaseInputModel,splunkd_utils){return BaseInputModel.extend({url:"authentication/providers/SAML",urlRoot:"authentication/providers/SAML",isSAMLMode:!1,initialize:function(){BaseInputModel.prototype.initialize.apply(this,arguments)},isNew:function(){return!this.isSAMLMode},validation:{"ui.entityId":[{required:!0,msg:_("Entity ID is required.").t()}],"ui.idpSSOUrl":[{required:!0,msg:_("SSO URI is required.").t()}]},_onerror:function(collection,response,options){var messages=splunkd_utils.xhrErrorResponseParser(response,this.id);_.each(messages,function(msgObj){msgObj.message&&(msgObj.message.indexOf("The following required arguments are missing:")>-1&&delete msgObj.message,msgObj.message.indexOf("In handler '")>-1&&(msgObj.message=msgObj.message.substring(msgObj.message.indexOf("': ")+3)))}),this.trigger("serverValidated",!1,this,messages)},parse:function(response,options){if(response.entry.length>0){var attr,val,protocolEndpoints=response.entry[0].content.protocol_endpoints,attributeAliases=response.entry[0].content.attribute_aliases;for(attr in protocolEndpoints)protocolEndpoints.hasOwnProperty(attr)&&(val=protocolEndpoints[attr],response.entry[0].content[attr]=val);for(attr in attributeAliases)attributeAliases.hasOwnProperty(attr)&&(val=attributeAliases[attr],response.entry[0].content[attr]=val);response.entry[0].content.signatureAlgorithm=response.entry[0].content.signatureAlgorithm.name}BaseInputModel.prototype.parse.apply(this,arguments)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/SAML":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),__webpack_require__("routers/Base"),__webpack_require__("views/saml/PageController")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,BaseRouter,PageController){return BaseRouter.extend({initialize:function(){BaseRouter.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.model.controller=new Backbone.Model},page:function(locale,app,page){BaseRouter.prototype.page.apply(this,arguments),this.setPageTitle(_("SAML Groups").t()),$.when(this.deferreds.pageViewRendered).done(_(function(){$(".preload").replaceWith(this.pageView.el),this.pageController&&this.pageController.detach(),this.pageController=new PageController({model:this.model,collection:this.collection}),this.pageView.$(".main-section-body").append(this.pageController.render().el)}).bind(this))}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/saml/ConfigEditDialog":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/shared/FlashMessages"),__webpack_require__("views/shared/Modal"),__webpack_require__("views/shared/controls/ControlGroup"),__webpack_require__("uri/route")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,FlashMessages,Modal,ControlGroup,route){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME+" edit-dialog-modal modal-wide",events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){this.model.saml.transposeToRest();var saveDfd=this.model.saml.save();saveDfd&&saveDfd.done(_(function(){this.trigger("samlSaved"),this.hide()}).bind(this))},"click .upload-file-button":function(e){e.preventDefault(),this.$("#inputReference").click()},"click .apply-metadata-button":function(e){e.preventDefault(),this.model.controller.trigger("fetchMetadata",this.model.saml.get("metadata"))},"click .aqr-header":function(e){this.$(".aqr-header").toggleClass("icon-triangle-down"),this.$(".aqr-body").toggle()},"click .alias-header":function(e){this.$(".alias-header").toggleClass("icon-triangle-down"),this.$(".alias-body").toggle()}}),initialize:function(options){Modal.prototype.initialize.apply(this,arguments),options=options||{},this.children.flashMessagesView=new FlashMessages({model:{saml:this.model.saml,metadata:this.model.samlMetadata},helperOptions:{removeServerPrefix:!0}}),this.children.rawMetadata=new ControlGroup({controlType:"Textarea",className:"saml-rawmetadata control-group",controlOptions:{modelAttribute:"metadata",model:this.model.saml},controlClass:"controls-block",label:_("Metadata Contents").t()}),this.children.idpSSOUrl=new ControlGroup({controlType:"Text",className:"saml-idpSSOUrl control-group",controlOptions:{modelAttribute:"ui.idpSSOUrl",model:this.model.saml},controlClass:"controls-block",tooltip:_("This is the protected endpoint on your IdP to which Splunk will send authentication requests.").t(),label:_("Single Sign On (SSO) URL").t()}),this.children.idpSLOUrl=new ControlGroup({controlType:"Text",className:"saml-idpSLOUrl control-group",controlOptions:{modelAttribute:"ui.idpSLOUrl",model:this.model.saml,placeholder:_("optional").t()},controlClass:"controls-block",tooltip:_("This is the IdP protocol endpoint. If you do not provide this URL, the user will not be logged out.").t(),label:_("Single Log Out (SLO) URL").t()}),this.children.idpCertPath=new ControlGroup({controlType:"Text",className:"saml-idpCertPath control-group",controlOptions:{modelAttribute:"ui.idpCertPath",model:this.model.saml,placeholder:_("optional").t()},controlClass:"controls-block",tooltip:_("Location of IdP certificate file or, if there are multiple IdP certificates, the directory where those certificates reside.").t(),label:_("IdP certificate path").t(),help:_("Leave blank if you store IdP certificates under $SPLUNK_HOME/etc/auth/idpCerts").t(),enabled:!this.model.serverInfo.isCloud()}),this.children.idpRepCerts=new ControlGroup({controlType:"SyntheticCheckbox",className:"saml-idpRepCerts control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.replicateCertificates",model:this.model.saml},label:_("Replicate Certificates").t(),tooltip:_("Replicate SAML IdP certificates in a Search Head Cluster. This setting will have no effect if search head clustering is disabled.").t()}),this.children.idpCertChains=new ControlGroup({controlType:"Textarea",className:"saml-idpCertChains control-group",controlOptions:{modelAttribute:"ui.idpCertChains",model:this.model.saml},controlClass:"controls-block",tooltip:_("Upload the certificate chain in this order - root, intermediate(s) and leaf. This is to ensure that the saml response is verified with the correct chain of trust.").t(),label:_("IdP certificate chains").t()}),this.children.issuerId=new ControlGroup({controlType:"Text",className:"saml-issuerId control-group",controlOptions:{modelAttribute:"ui.issuerId",model:this.model.saml},controlClass:"controls-block",tooltip:_("Entity ID of IDP.").t(),label:_("Issuer Id").t()}),this.children.entityId=new ControlGroup({controlType:"Text",className:"saml-entityId control-group",controlOptions:{modelAttribute:"ui.entityId",model:this.model.saml},controlClass:"controls-block",tooltip:_("An identifier for this Splunk instance that is unique across all entities on the IdP.").t(),label:_("Entity ID").t()}),this.children.signAuthnRequest=new ControlGroup({controlType:"SyntheticCheckbox",className:"saml-signAuthnRequest control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.signAuthnRequest",model:this.model.saml},label:_("Sign AuthnRequest").t()}),this.children.signedAssertion=new ControlGroup({controlType:"SyntheticCheckbox",className:"saml-signedAssertion control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.signedAssertion",model:this.model.saml},tooltip:_("Enable this setting for verification of the signed SAML response against the IdP certificate.").t(),label:_("Verify SAML response").t()}),this.children.idpAttributeQueryUrl=new ControlGroup({controlType:"Text",className:"saml-idpAttributeQueryUrl control-group",controlOptions:{modelAttribute:"ui.idpAttributeQueryUrl",model:this.model.saml},controlClass:"controls-block",tooltip:_("This is the endpoint on the IdP to which queries over SOAP should be sent.").t(),label:_("Attribute query URL").t()}),this.children.attributeQueryRequestSigned=new ControlGroup({controlType:"SyntheticCheckbox",className:"saml-attributeQueryRequestSigned control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.attributeQueryRequestSigned",model:this.model.saml},label:_("Sign attribute query request").t()}),this.children.attributeQueryResponseSigned=new ControlGroup({controlType:"SyntheticCheckbox",className:"saml-attributeQueryResponseSigned control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.attributeQueryResponseSigned",model:this.model.saml},label:_("Sign attribute query response").t()}),this.children.attributeAliasRole=new ControlGroup({controlType:"Text",className:"saml-attributeAliasRole control-group",controlOptions:{modelAttribute:"ui.attributeAliasRole",model:this.model.saml},controlClass:"controls-block",label:_("Role alias").t()}),this.children.attributeAliasRealName=new ControlGroup({controlType:"Text",className:"saml-attributeAliasRealName control-group",controlOptions:{modelAttribute:"ui.attributeAliasRealName",model:this.model.saml},controlClass:"controls-block",label:_("RealName alias").t()}),this.children.attributeAliasMail=new ControlGroup({controlType:"Text",className:"saml-attributeAliasMail control-group",controlOptions:{modelAttribute:"ui.attributeAliasMail",model:this.model.saml},controlClass:"controls-block",label:_("Mail alias").t()}),this.children.attributeQuerySoapUsername=new ControlGroup({controlType:"Text",className:"saml-attributeQuerySoapUsername control-group",controlOptions:{modelAttribute:"ui.attributeQuerySoapUsername",model:this.model.saml},controlClass:"controls-halfblock",label:_("Username").t()}),this.children.attributeQuerySoapPassword=new ControlGroup({controlType:"Text",className:"saml-attributeQuerySoapPassword control-group",controlOptions:{modelAttribute:"ui.attributeQuerySoapPassword",model:this.model.saml,password:!0},controlClass:"controls-halfblock",label:_("Password").t()}),this.children.fqdn=new ControlGroup({controlType:"Text",className:"saml-fqdn control-group",controlOptions:{modelAttribute:"ui.fqdn",model:this.model.saml,placeholder:_("optional").t()},controlClass:"controls-block",tooltip:_("Provide the host name or IP address. Required if you want to use load balancing.").t(),label:_("Fully qualified domain name or IP of the load balancer").t()}),this.children.redirectPort=new ControlGroup({controlType:"Text",className:"saml-redirectPort control-group",controlOptions:{modelAttribute:"ui.redirectPort",model:this.model.saml,placeholder:_("optional").t()},controlClass:"controls-block",tooltip:_("Provide a redirect port for the load balancer.").t(),label:_("Redirect port - load balancer port").t()}),this.children.redirectAfterLogoutToUrl=new ControlGroup({controlType:"Text",className:"saml-redirectAfterLogoutToUrl control-group",controlOptions:{modelAttribute:"ui.redirectAfterLogoutToUrl",model:this.model.saml,placeholder:_("optional").t()},controlClass:"controls-block",tooltip:_("URL to which the user will be redirected upon a logout.").t(),label:_("Redirect to URL after logout").t()}),this.children.ssoBinding=new ControlGroup({controlType:"SyntheticRadio",className:"saml-ssoBinding control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.ssoBinding",model:this.model.saml,items:[{label:_("HTTP Post").t(),value:"HTTPPost"},{label:_("HTTP Redirect").t(),value:"HTTPRedirect"}]},defaultValue:this.model.saml.get("ssoBinding"),label:_("SSO Binding").t(),tooltip:_("The protocol binding to be used for the saml single on request sent to the IdP.").t()}),this.children.sloBinding=new ControlGroup({controlType:"SyntheticRadio",className:"saml-sloBinding control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.sloBinding",model:this.model.saml,items:[{label:_("HTTP Post").t(),value:"HTTPPost"},{label:_("HTTP Redirect").t(),value:"HTTPRedirect"}]},defaultValue:this.model.saml.get("sloBinding"),label:_("SLO Binding").t(),tooltip:_("The protocol binding to be used for the saml logout request sent to the IdP.").t()}),this.children.signatureAlgorithm=new ControlGroup({controlType:"SyntheticRadio",className:"saml-signatureAlgorithm control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.signatureAlgorithm",model:this.model.saml,items:[{label:_("SHA1").t(),value:"RSA-SHA1"},{label:_("SHA256").t(),value:"RSA-SHA256"}]},defaultValue:this.model.saml.get("signatureAlgorithm"),label:_("Signature Algorithm").t(),tooltip:_("Algorithm for signing saml single sign on request for HTTP Redirect Binding.").t()}),this.children.nameIdFormat=new ControlGroup({controlType:"SyntheticSelect",className:"saml-nameIdFormat control-group",controlClass:"controls-block",controlOptions:{modelAttribute:"ui.nameIdFormat",model:this.model.saml,items:[{label:"--------------",value:""},{label:_("Transient").t(),value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient"},{label:_("Persistent").t(),value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"},{label:_("Unspecified").t(),value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"},{label:_("Email Address").t(),value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"},{label:_("X509 Subject Name").t(),value:"urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName"},{label:_("Windows Domain Qualified Name").t(),value:"urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName"},{label:_("Kerberos").t(),value:"urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos"},{label:_("Entity").t(),value:"urn:oasis:names:tc:SAML:2.0:nameid-format:entity"}],popdownOptions:{attachDialogTo:$("body")[0]},toggleClassName:"btn"},defaultValue:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",label:_("Name Id Format").t(),tooltip:_("Leave this empty or pick what is configured on IDP.").t()}),this.model.saml.entry.content.set("name","saml"),this.model.controller.on("metadataComplete",function(model){this.model.saml.set("ui.signAuthnRequest",model.entry.content.get("signAuthnRequest")),this.model.saml.set("ui.idpAttributeQueryUrl",model.entry.content.get("protocol_endpoints").idpAttributeQueryUrl),this.model.saml.set("ui.idpSLOUrl",model.entry.content.get("protocol_endpoints").idpSLOUrl),this.model.saml.set("ui.idpSSOUrl",model.entry.content.get("protocol_endpoints").idpSSOUrl),this.model.saml.set("ui.issuerId",model.entry.content.get("issuerId")),this.model.saml.set("ui.idpCertPath",model.entry.content.get("idpCertPath")),this.model.saml.set("ui.idpCertificatePayload",model.entry.content.get("idpCertificatePayload"))},this),this.listenTo(this.model.saml,"change:ui.ssoBinding",function(e){"HTTPRedirect"===this.model.saml.get("ui.ssoBinding")?this.$(".saml-signatureAlgorithm").show():this.$(".saml-signatureAlgorithm").hide()},this)},updateSelectedFileLabel:function(filename){filename?this.$(".source-label").text(filename):this.$(".source-label").text(_("No file selected").t())},render:function(){var rootUrl=this.model.application.get("root"),locale=this.model.application.get("locale"),helpLink=route.docHelp(rootUrl,locale,"learnmore.SAML.getstarted"),aqrUrl=this.model.saml.get("ui.idpAttributeQueryUrl"),aqrUsername=this.model.saml.get("ui.attributeQuerySoapUsername"),aqrPassword=this.model.saml.get("ui.attributeQuerySoapPassword"),showAqr=aqrUrl&&aqrUsername&&aqrPassword,aliasRole=this.model.saml.get("ui.attributeAliasRole"),aliasRealname=this.model.saml.get("ui.attributeAliasRealName"),aliasMail=this.model.saml.get("ui.attributeAliasMail"),showAlias=aliasRole||aliasRealname||aliasMail,showSignatureAlgorithm="HTTPRedirect"===this.model.saml.get("ui.ssoBinding");this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("SAML Configuration").t()),this.$(Modal.BODY_SELECTOR).show(),this.$(Modal.BODY_SELECTOR).append(Modal.FORM_HORIZONTAL),this.$(Modal.BODY_FORM_SELECTOR).html(_(this.dialogFormBodyTemplate).template({helpLink:helpLink,spMetadataLink:route.spmetadata(rootUrl,locale),isCloud:this.model.serverInfo.isCloud()})),this.children.flashMessagesView.render().appendTo(this.$(".flash-messages-view-placeholder")),this.children.rawMetadata.render().appendTo(this.$(".rawmetadata-placeholder")),this.children.idpSSOUrl.render().appendTo(this.$(".idpSSOUrl-placeholder")),this.children.idpSLOUrl.render().appendTo(this.$(".idpSLOUrl-placeholder")),this.children.idpCertPath.render().appendTo(this.$(".idpCertPath-placeholder")),this.children.idpCertChains.render().appendTo(this.$(".idpCertChains-placeholder")),this.children.idpRepCerts.render().appendTo(this.$(".idpRepCerts-placeholder")),this.children.issuerId.render().appendTo(this.$(".issuerId-placeholder")),this.children.entityId.render().appendTo(this.$(".entityId-placeholder")),this.children.signAuthnRequest.render().appendTo(this.$(".signAuthnRequest-placeholder")),this.children.ssoBinding.render().appendTo(this.$(".ssoBinding-placeholder")),this.children.sloBinding.render().appendTo(this.$(".sloBinding-placeholder")),this.children.signatureAlgorithm.render().appendTo(this.$(".signatureAlgorithm-placeholder")),this.children.signedAssertion.render().appendTo(this.$(".signedAssertion-placeholder")),this.children.idpAttributeQueryUrl.render().appendTo(this.$(".idpAttributeQueryUrl-placeholder")),this.children.attributeQueryRequestSigned.render().appendTo(this.$(".attributeQueryRequestSigned-placeholder")),this.children.attributeQueryResponseSigned.render().appendTo(this.$(".attributeQueryResponseSigned-placeholder")),this.children.attributeQuerySoapUsername.render().appendTo(this.$(".attributeQuerySoapUsername-placeholder")),this.children.attributeQuerySoapPassword.render().appendTo(this.$(".attributeQuerySoapPassword-placeholder")),this.children.attributeAliasRole.render().appendTo(this.$(".attributeAliasRole-placeholder")),this.children.attributeAliasRealName.render().appendTo(this.$(".attributeAliasRealName-placeholder")),this.children.attributeAliasMail.render().appendTo(this.$(".attributeAliasMail-placeholder")),this.children.fqdn.render().appendTo(this.$(".fqdn-placeholder")),this.children.redirectPort.render().appendTo(this.$(".redirectPort-placeholder")),this.children.redirectAfterLogoutToUrl.render().appendTo(this.$(".redirectAfterLogoutToUrl-placeholder")),this.children.nameIdFormat.render().appendTo(this.$(".nameIdFormat-placeholder")),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_SAVE),showAqr?this.$(".aqr-header").toggleClass("icon-triangle-down"):this.$(".aqr-body").hide(),showAlias?this.$(".alias-header").toggleClass("icon-triangle-down"):this.$(".alias-body").hide(),showSignatureAlgorithm?this.$(".saml-signatureAlgorithm").show():this.$(".saml-signatureAlgorithm").hide(),_.isUndefined(this.model.saml.get("ui.replicateCertificates"))&&this.model.saml.set("ui.replicateCertificates",!0);var that=this;return this.$("#inputReference").on("change",function(e){var file=e.target.files[0],reader=new FileReader,readerCallback=function(e){var metadata=e.target.result;that.model.controller.trigger("fetchMetadata",metadata)};reader.onload=readerCallback,reader.readAsText(file),that.updateSelectedFileLabel(file.name)}),this},dialogFormBodyTemplate:'\t                <% if (isCloud) { %>\t                <div>\t                    <p>\t                        <span class="warning-text"> <%- _("WARNING:").t() %> </span> \t                        <%- _("An error in configuring SAML could result in users and admins \t                        being locked out of Splunk Cloud. Use this link to access the local login \t                        and revert back to None for authentication if you are locked out:").t() %> \t                    </p>\t                    <p>\t                        <%- _("https://{name}.splunkcloud.com/en-US/account/login?loginType=splunk \t                        [replace {name} with your account name]").t() %>\t                    </p>\t                    <p>\t                        <%- _("Be sure to copy this information to a safe place before closing this window.").t() %>\t                    </p>\t                </div>\t                <br/>\t                <% } %>\t                <div class="flash-messages-view-placeholder"></div>\t                <p class="control-heading">\t                    <%- _("Configure SAML for Splunk.").t() %>\t                    <a href="<%- helpLink %>" class="external learnMoreLink" target="_blank"><%= _("Learn More").t() %></a>\t                </p>\t                <br/>\t                <p class="control-heading">\t                    <div class="section-desc"><%- _("Download the SPMetadata from Splunk and add it to your SAML environment to connect to Splunk.").t() %></div>\t                </p>\t                 <label class="control-label" style="display: inline-block;"><%= _("SP Metadata File").t() %></label>\t                 <a href="<%- spMetadataLink %>" class="btn download-file-button" target="_blank"><%- _("Download File").t() %></a>\t                <p class="control-heading">\t                    <div class="section-desc"><%- _("Import Identity Provider (IdP) metadata by browsing to an XML file, or copy and paste the information into the Metadata Contents text box.").t() %></div>\t                </p>\t                 <label class="control-label" style="display: inline-block;"><%= _("Metadata XML File").t() %></label>\t                 <a href="#" class="btn upload-file-button"><%= _("Select File").t() %></a>\t                 <span class="source-label"></span>\t                 <input type="file" id="inputReference" name="spl-file" style="display:none;"/>\t                <div class="rawmetadata-placeholder"></div>\t                <a href="#" class="btn btn-secondary apply-metadata-button"><%- _("Apply").t() %></a>\t                <div class="section-divider clearfix"></div>\t                <p class="control-heading">\t                    <strong><%- _("General Settings").t() %></strong>\t                </p>\t                <div class="idpSSOUrl-placeholder"></div>\t                <div class="idpSLOUrl-placeholder"></div>\t                <div class="idpCertPath-placeholder"></div>\t                <div class="idpCertChains-placeholder"></div>\t                <div class="idpRepCerts-placeholder"></div>\t                <div class="issuerId-placeholder"></div>\t                <div class="entityId-placeholder"></div>\t                <div class="signAuthnRequest-placeholder"></div>\t                <div class="signedAssertion-placeholder"></div>\t                <p class="control-heading aqr-header icon-triangle-right">\t                    <strong><%- _("Attribute Query Requests").t() %></strong>\t                </p>\t                <div class="aqr-body">\t                    <div class="section-desc"><%- _("Attribute query requests are required for scheduled searches.").t() %></div>\t                    <div class="idpAttributeQueryUrl-placeholder"></div>\t                    <div class="attributeQueryRequestSigned-placeholder"></div>\t                    <div class="attributeQueryResponseSigned-placeholder"></div>\t                    <div class="attributeQuerySoapUsername-placeholder"></div>\t                    <div class="attributeQuerySoapPassword-placeholder"></div>\t                </div>\t                <p class="control-heading alias-header icon-triangle-right">\t                    <strong><%- _("Alias").t() %></strong>\t                </p>\t                <div class="alias-body">\t                    <div class="attributeAliasRole-placeholder"></div>\t                    <div class="attributeAliasRealName-placeholder"></div>\t                    <div class="attributeAliasMail-placeholder"></div>\t                </div>\t                <p class="control-heading">\t                    <strong><%- _("Advanced Settings").t() %></strong>\t                </p>\t                <div class="nameIdFormat-placeholder"></div>\t                <div class="fqdn-placeholder"></div>\t                <div class="redirectPort-placeholder"></div>\t                <div class="redirectAfterLogoutToUrl-placeholder"></div>\t                <div class="ssoBinding-placeholder"></div>\t                <div class="signatureAlgorithm-placeholder"></div>\t                <div class="sloBinding-placeholder"></div>\t            '
})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/saml/GroupEditDialog":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/shared/FlashMessages"),__webpack_require__("views/shared/basemanager/EditDialog"),__webpack_require__("views/shared/controls/ControlGroup")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,FlashMessages,BaseDialog,ControlGroup){return BaseDialog.extend({moduleId:module.id,setFormControls:function(){this.children.flashMessagesView=new FlashMessages({model:this.model.entity}),this.children.name=new ControlGroup({controlType:"Text",className:"samlgroup-name control-group",controlOptions:{modelAttribute:"name",model:this.model.entity.entry},controlClass:"controls-block",label:_("Group Name").t()});var availableItems=_.map(this.collection.roles.models,function(model){return{label:model.entry.get("name"),value:model.entry.get("name")}}),selectedItems=this.model.entity.entry.content.get("roles");this.children.roles=new ControlGroup({controlType:"Accumulator",className:"samlgroup-roles control-group",controlOptions:{modelAttribute:"roles",model:this.model.entity.entry.content,availableItems:availableItems,selectedItems:selectedItems},controlClass:"controls-block",label:_("Splunk Roles").t()})},renderFormControls:function($modalBody){BaseDialog.prototype.renderFormControls.apply(this,arguments),this.children.roles.render().appendTo(this.$(".roles-placeholder"))},formControlsTemplate:'\t                <div class="flash-messages-view-placeholder"></div>\t                <div class="name-placeholder"></div>\t                <div class="roles-placeholder"></div>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/saml/GridRow":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/shared/basemanager/GridRow")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView){return BaseView.extend({},{columns:[{id:"name",title:_("Name").t(),sorts:!0},{id:"roles",title:_("Roles").t(),sorts:!0}]})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/saml/NewButtons":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/shared/basemanager/NewButtons")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView){return BaseView.extend({moduleId:module.id,events:$.extend({},BaseView.prototype.events,{"click .saml-config-button":"onSAMLConfigButton"}),initialize:function(options){BaseView.prototype.initialize.call(this,options),this.listenTo(this.model.authModule,"change reset",this.checkSAMLConfigured)},onSAMLConfigButton:function(){this.model.controller.trigger("configSAML")},checkSAMLConfigured:function(){var authMode=this.model.authModule.getAuthMode(),$warningIcon=this.$(".saml-disabled-warning");if("SAML"!==authMode){var tooltipText=_("SAML is not configured.").t();$warningIcon.tooltip({animation:!1,title:tooltipText,container:$warningIcon,placement:"bottom"}),$warningIcon.show()}else $warningIcon.hide()},render:function(){var html=this.compiledTemplate({entitySingular:this.options.entitySingular});return this.$el.html(html),this.checkSAMLConfigured(),this},template:'\t            <div class="saml-disabled-warning alert-error red-triangle-warning"><i class="icon-alert"/></div>\t            <a href="#" class="btn btn-primary saml-config-button"><%- _("SAML Configuration").t() %></a>\t            <a href="#" class="btn btn-primary new-entity-button"><%- _("New Group").t() %></a>'})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/saml/PageController.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(1124);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"models/services/authentication/providers/services":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/StaticIdSplunkDBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(SplunkDBaseModel){return SplunkDBaseModel.extend({urlRoot:"authentication/providers/services",initialize:function(){SplunkDBaseModel.prototype.initialize.apply(this,arguments)},getAuthMode:function(){return this.entry.content.get("active_authmodule")},sync:function(method,model,options){return model.id="active_authmodule",SplunkDBaseModel.prototype.sync.call(this,method,model,options)}},{id:"active_authmodule"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});