webpackJsonp([20],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/enterprise")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("routers/ClusteringPush"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function($,ClusteringPushRouter,router_utils){new ClusteringPushRouter;router_utils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},577:function(module,exports){module.exports='<% if( errors.length > maxErrors) { %>\n    <div class="section-padded cluster-errors-short">\n        <% _.each(errors.slice(0, maxErrors), function(error) { %>\n            <p><span style="display:block;"><i class="icon-alert alert-error"></i><%- error %></span></p>\n        <% }); %>\n        <p><a href="#" class="cluster-errors-more"><%- _("More").t() %></a></p>\n    </div>\n    <div class="section-padded cluster-errors-full">\n        <% _.each(errors, function(error) { %>\n            <p><span style="display:block;"><i class="icon-alert alert-error"></i><%- error %></span></p>\n        <% }); %>\n        <p><a href="#" class="cluster-errors-less"><%- _("Less").t() %></a></p>\n    </div>\n<% } else { %>\n    <div class="section-padded cluster-errors">\n        <% _.each(errors, function(error) { %>\n            <p><span style="display:block;"><i class="icon-alert alert-error"></i><%- error %></span></p>\n        <% }); %>\n    </div>\n<% } %>'},578:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".alert-error{color:#d6563c;font-size:1.2em;padding-right:5px}",""])},579:function(module,exports){module.exports='<div class="section-padded">\n    <div class="success-info">\n        <h3><%- title %>\n            <%if (lastRunAction) {%>\n                <%if (lastActionSuccess) {%>\n                    <i class="icon-check"></i> <%= _(\'Successful\').t() %>\n                <%} else {%>\n                    <i class="icon-alert"></i> <%= _(\'Unsuccessful\').t() %>\n                <%} %>\n            <%}%>\n        </h3>\n        <dl class="list-dotted">\n            <% if ((lastRunAction === actions.CHECK_RESTART)) { %>\n                <% if (restartRequired) { %>\n                    <dt style=""><%= _(\'Restart\').t() %><sup><a href="#" class="tooltip-link" rel="tooltip" data-title="<%= _(\'The changes to the bundle require a restart of all peers.\').t() %>">?</a></sup></dt>\n                    <dd><%= _(\'Required\').t() %></dd>\n                <% } else { %>\n                    <dt style=""><%= _(\'Restart\').t() %><sup><a href="#" class="tooltip-link" rel="tooltip" data-title="<%= _(\'The changes to the bundle do not require a restart of all peers.\').t() %>">?</a></sup></dt>\n                    <dd><%= _(\'Not Required\').t() %></dd>\n                <% } %>\n            <% } %>\n            <dt style=""><%= _(\'Updated Time\').t() %></dt>\n            <dd><%-timeLastPush%></dd>\n            <dt style=""><%= _(\'Active Bundle ID\').t() %><sup><a href="#" class="tooltip-link" rel="tooltip" data-title="<%= _(\'The Bundle ID denotes the active configuration bundle used by all peers.\').t() %>">?</a></sup></dt>\n            <dd><%-activeBundleId%></dd>\n            <dt style=""><%= _(\'Latest Bundle ID\').t() %><sup><a href="#" class="tooltip-link" rel="tooltip" data-title="<%= _(\'The Bundle ID denotes the latest configuration bundle downloaded and validated by all peers.\').t() %>">?</a></sup></dt>\n            <dd><%-latestBundleId%></dd>\n            <dt style=""><%= _(\'Previous Bundle ID\').t() %><sup><a href="#" class="tooltip-link" rel="tooltip" data-title="<%= _(\'The Bundle ID denotes the previous configuration bundle downloaded and validated by all peers.\').t() %>">?</a></sup></dt>\n            <dd><%-previousBundleId%></dd>\n            <% if ((lastRunAction === actions.CHECK_RESTART) && checkRestartBundleId) { %>\n                <dt style=""><%= _(\'Latest Check Restart Bundle\').t() %><sup><a href="#" class="tooltip-link" rel="tooltip" data-title="<%= _(\'The Bundle ID denotes the latest configuration bundle validated and check restarted by all peers.\').t() %>">?</a></sup></dt>\n                <dd><%-checkRestartBundleId%></dd>\n            <% } %>\n        </dl>\n   </div>\n</div>'},580:function(module,exports){module.exports='<div class="section-padded">\n    <div class="progress-label">\n    \t<%= label %>\n    \t<span class="peer-num"><%=count%></span> <%= _(\'of\').t() %> <%=total%>\n    </div>\n    <div class="job-bar">\n        <div class="progress progress-striped active">\n            <div class="bar" style="width: <%=100*count/total%>%;">\n                <div class="block"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},581:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".clustering-push-actionprogress .job-bar .progress .bar{background-color:#a2cc3e}",""])},582:function(module,exports){module.exports='\n<div class="section-header section-padded">\n    <div class="btn-toolbar pull-right">\n        <div class="btn-group">\n            <a href="<%=docLink%>" class="btn" target="_blank"><%= _(\'Documentation\').t() %> <i class="icon-external"></i></a>\n        </div>\n    </div>\n    <h2 class="section-title"><%= _(\'Configuration Bundle Actions\').t() %></h2>\n    <p class="section-description"><%= _(\'Click Push to distribute the configuration bundle to the set of peers. Optionally, validate the bundle and check if peer restart is required without distributing the bundle, or rollback to the previous bundle.\').t() %>\n        <a href=\'<%=learnMoreLink%>\' class=\'external\' target=\'_blank\'><%= _(\'Learn More\').t() %></a>\n    </p>\n    <a href="clustering">\n        <i class="icon-chevron-left icon-no-underline"></i><span><%- _("Back to Master Node").t() %></span>\n    </a>\n</div>\n\n<div class="divider"></div>\n<div class="section-bg"></div>\n'},"models/services/cluster/master/Peer":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("models/SplunkDBase"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,SplunkDBaseModel,splunkUtil){return SplunkDBaseModel.extend({urlRoot:"cluster/master/peers/",url:"cluster/master/peers",initialize:function(){this.peerStatuses={Up:_("Up").t(),Pending:_("Pending").t(),Detention:_("Detention").t(),Restarting:_("Restarting").t(),ShuttingDown:_("Shutting down").t(),ReassigningPrimaries:_("Reassigning primaries").t(),Decommissioning:_("Decommissioning").t(),GracefulShutdown:_("Graceful shutdown").t(),Down:_("Down").t()},SplunkDBaseModel.prototype.initialize.apply(this,arguments)},isSearchable:function(){return splunkUtil.normalizeBoolean(this.entry.content.get("is_searchable"))},getTranslatedStatus:function(){var status=this.entry.content.get("status");return this.peerStatuses[status]||status}},{VALIDATED:"ValidationDone",RELOADING:"ReloadInProgress",CHECKING_RESTART:"DryRunInProgress",NONE:"None",PEER_STATUS_UP:"Up",PEER_STATUS_PENDING:"Pending",PEER_STATUS_DETENTION:"Detention",PEER_STATUS_RESTARTING:"Restarting",PEER_STATUS_SHUTTING_DOWN:"Shutting down",PEER_STATUS_REASSIGNING_PRIMARIES:"Reassigning primaries",PEER_STATUS_DECOMMISSIONING:"Decommissioning",PEER_STATUS_GRACEFUL_SHUTDOWN:"Graceful shutdown",PEER_STATUS_DOWN:"Down"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"collections/services/cluster/master/Peers":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("models/services/cluster/master/Peer"),__webpack_require__("collections/SplunkDsBase")],__WEBPACK_AMD_DEFINE_RESULT__=function(PeerModel,SplunkDsBaseCollection){return SplunkDsBaseCollection.extend({url:"cluster/master/peers",model:PeerModel,initialize:function(){SplunkDsBaseCollection.prototype.initialize.apply(this,arguments)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/push/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("models/Base"),__webpack_require__("models/clustering/Actions"),__webpack_require__("views/Base"),__webpack_require__("views/clustering/push/PushStatus"),__webpack_require__("views/clustering/push/ActionProgress"),__webpack_require__("views/clustering/push/PushErrors"),__webpack_require__("views/clustering/push/peer_nodes/table/Master"),__webpack_require__("views/clustering/push/system/Actions"),__webpack_require__("views/clustering/push/StatusMessage"),__webpack_require__("uri/route"),__webpack_require__(582),__webpack_require__("views/clustering/push/Master.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseModel,ActionsModel,BaseView,PushStatus,ActionProgressBar,PushErrors,StatusTableView,ActionsView,StatusMessageView,route,Template,css){return BaseView.extend({moduleId:module.id,template:Template,initialize:function(options){BaseView.prototype.initialize.call(this,options),this.children.pushStatus=new PushStatus({model:{pushModel:this.model.pushModel,masterInfo:this.model.masterInfo}}),this.children.validateProgress=new ActionProgressBar({model:{pushModel:this.model.pushModel,masterInfo:this.model.masterInfo},peerActionTypeKey:"peersValidated",label:_("Peers Validated:").t()}),this.children.restartProgress=new ActionProgressBar({model:{pushModel:this.model.pushModel,masterInfo:this.model.masterInfo},peerActionTypeKey:"peersRestarted",label:_("Restarting Peer:").t()}),this.children.reloadProgress=new ActionProgressBar({model:{pushModel:this.model.pushModel,masterInfo:this.model.masterInfo},peerActionTypeKey:"peersReloaded",label:_("Peers Reloaded:").t()}),this.children.checkRestartProgress=new ActionProgressBar({model:{pushModel:this.model.pushModel,masterInfo:this.model.masterInfo},peerActionTypeKey:"peersCheckRestarted",label:_("Peers Checked For Restart:").t()}),this.children.pushErrors=new PushErrors({model:{pushModel:this.model.pushModel}}),this.children.statusTableView=new StatusTableView({model:{state:this.collection.peers.fetchData,pushModel:this.model.pushModel},collection:{peers:this.collection.peers}}),this.children.actionsView=new ActionsView({model:this.model}),this.model.pushModel.on("action",function(){this.children.statusMessage&&this.children.statusMessage.remove(),this.children.statusMessage=new StatusMessageView({model:{masterInfo:this.model.masterInfo}}),this.children.pushStatus.$el.hide(),this.children.actionsView.disableButtons(),this.$(".section-bg").prepend(this.children.statusMessage.render().el),this.children.statusMessage.$el.show()},this),this.model.pushModel.on("change:state",function(){var state=this.model.pushModel.get("state");if("idle"!==state){var lastRunAction=this.model.pushModel.get("lastRunAction");lastRunAction===ActionsModel.actions.VALIDATE?(this.children.validateProgress.reset(),this.children.validateProgress.$el.show()):lastRunAction===ActionsModel.actions.CHECK_RESTART?(this.children.validateProgress.reset(),this.children.validateProgress.$el.show(),this.children.reloadProgress.reset(),this.children.reloadProgress.$el.show(),this.children.checkRestartProgress.reset(),this.children.checkRestartProgress.$el.show()):lastRunAction===ActionsModel.actions.ROLLBACK?(this.children.validateProgress.reset(),this.children.validateProgress.$el.show(),this.children.reloadProgress.reset(),this.children.reloadProgress.$el.show(),"restart"===state&&(this.children.restartProgress.reset(),this.children.restartProgress.$el.show())):lastRunAction===ActionsModel.actions.PUSH&&(this.children.validateProgress.reset(),this.children.validateProgress.$el.show(),this.children.reloadProgress.reset(),this.children.reloadProgress.$el.show(),"restart"===state&&(this.children.restartProgress.reset(),this.children.restartProgress.$el.show()))}else setTimeout(function(){this.children.pushStatus.$el.show(),this.children.validateProgress.$el.hide(),this.children.checkRestartProgress.$el.hide(),this.children.reloadProgress.$el.hide(),this.children.restartProgress.$el.hide(),this.children.statusMessage&&this.children.statusMessage.$el.hide(),this.children.actionsView.enableButtons()}.bind(this),1e3)},this),this.model.pushModel.on("tick",function(){_.isEmpty(this.model.pushModel.get("errors"))?this.children.pushErrors.$el.hide():this.children.pushErrors.$el.show()},this)},render:function(){var root=this.model.application.get("root"),locale=this.model.application.get("locale"),docLink=route.docHelp(root,locale,"manager.clustering.bundle"),learnMoreLink=route.docHelp(root,locale,"learnmore.clustering.bundle"),html=this.compiledTemplate({docLink:docLink,learnMoreLink:learnMoreLink});this.$el.html(html),this.$(".section-header").append(this.children.actionsView.render().el),this.$(".section-bg").append(this.children.pushStatus.render().el),this.$(".section-bg").append(this.children.validateProgress.render().el),this.$(".section-bg").append(this.children.reloadProgress.render().el),this.$(".section-bg").append(this.children.checkRestartProgress.render().el),this.$(".section-bg").append(this.children.restartProgress.render().el),this.$(".section-bg").append(this.children.pushErrors.render().el),this.$(".section-bg").append(this.children.statusTableView.render().el),this.children.validateProgress.$el.hide(),this.children.reloadProgress.$el.hide(),this.children.checkRestartProgress.$el.hide(),this.children.restartProgress.$el.hide()}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/push/PushErrors":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__(577),__webpack_require__("views/clustering/push/PushErrors.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,Template,css){return BaseView.extend({moduleId:module.id,template:Template,events:{"click .cluster-errors-more, .cluster-errors-less":function(e){e.preventDefault(),this.$(".cluster-errors-full, .cluster-errors-short").toggle()}},initialize:function(options){BaseView.prototype.initialize.call(this,options),this.model.pushModel.on("tick",this.render,this)},digestErrors:function(pushErrors){for(var flatErrors=[],i=0;i<pushErrors.length;i++)if(_.isArray(pushErrors[i].errors))for(var j=0;j<pushErrors[i].errors.length;j++)flatErrors.push([pushErrors[i].label,pushErrors[i].errors[j]]);else flatErrors.push([pushErrors[i].label,pushErrors[i].errors]);var dedupLabels=[],dedupErrors=[];_.each(flatErrors,function(error){var findDup=dedupErrors.indexOf(error[1]);findDup!==-1?error[0]&&dedupLabels[findDup].push(error[0]):(dedupLabels.push([error[0]]),dedupErrors.push(error[1]))});var errors=[];for(i=0;i<dedupLabels.length;i++){var error="",labels=_.without(dedupLabels[i],void 0);labels.length>0&&labels.length<=5?error=labels.join(", ")+": ":labels.length>5&&(error=labels.slice(0,5).join(", ")+_(", and more").t()+": "),error+=dedupErrors[i],errors.push(error)}return errors},render:function(){var pushErrors=this.model.pushModel.get("errors")||[],html=this.compiledTemplate({errors:this.digestErrors(pushErrors),maxErrors:3});this.$el.html(html),this.$(".cluster-errors-full").hide()}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},583:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,".success-info .icon-check{color:#65a637}.success-info .icon-alert{color:#d6563c}.clustering-push-pushstatus>.alerts{padding-left:20px;padding-right:20px}.section-bg{background-color:#eee;min-height:360px}.tooltip-link{padding:5px}.progress-msg{font-size:11px;color:#666}.progress-msg,.progress.progress-striped{display:inline-block;vertical-align:middle}.progress.progress-striped{width:160px;height:10px;margin-bottom:0;margin-left:5px;border-radius:2px}.progress.progress-striped .bar{background-color:#ccc;background-size:10px 10px;height:10px}.job-bar,.progress-label{display:inline-block;vertical-align:middle}.job-bar{width:200px}.job-bar .progress .bar{transition:width .6s ease}.clustering-push-peernodes-table-moreinfo .wait-spinner,.clustering-push-pushstatus .wait-spinner{display:inline-block;margin-right:6px}.clustering-push-peernodes-table-moreinfo .bundle-status-message,.clustering-push-pushstatus .bundle-status-message{display:inline-block}.clustering-push-peernodes-table-moreinfo .list-dotted dt,.clustering-push-pushstatus .list-dotted dt{width:200px}",""])},"views/clustering/push/PushErrors.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(578);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"models/services/cluster/master/Info":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("models/StaticIdSplunkDBase"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,BaseModel,splunkUtil){return BaseModel.extend({initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)},getAvailableSites:function(){var sites=[];return _.has(this.entry.content.attributes,"available_sites")&&(sites=this.entry.content.get("available_sites").replace("[","").replace("]","").split(",")),sites},isMultiSite:function(){return splunkUtil.normalizeBoolean(this.entry.content.get("multisite"))}},{id:"cluster/master/info/master"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/ClusteringPush":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),__webpack_require__("routers/Base"),__webpack_require__("models/services/cluster/master/Control"),__webpack_require__("models/services/cluster/master/ValidateControl"),__webpack_require__("models/services/cluster/master/Rollback"),__webpack_require__("models/services/cluster/master/Info"),__webpack_require__("models/clustering/Actions"),__webpack_require__("models/services/cluster/master/Peer"),__webpack_require__("collections/services/cluster/master/Peers"),__webpack_require__("views/clustering/push/Master"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,BaseRouter,MasterControlModel,ValidateControlModel,RollbackModel,MasterInfoModel,ActionsModel,PeerModel,PeersCollection,ClusteringPushView,util){return BaseRouter.extend({initialize:function(){BaseRouter.prototype.initialize.apply(this,arguments),this.enableAppBar=!1,this.setPageTitle(_("Distribute Configuration Bundle").t()),this.pushModel=new Backbone.Model,this.masterControl=new MasterControlModel,this.checkRestartControl=new ValidateControlModel,this.masterInfo=new MasterInfoModel,this.peers=new PeersCollection,this.rollbackModel=new RollbackModel,this.masterActiveBundle=null,this.masterLatestBundle=null,this.errors=[],this.validationProgress=[],this.restartProgress=[],this.reloadProgress=[],this.dryRunProgress=[],this.peersChecksumUpdated=[],this.deferreds.masterInfo=$.Deferred(),this.deferreds.peers=$.Deferred(),this.clusteringPushView=new ClusteringPushView({model:{application:this.model.application,pushModel:this.pushModel,masterInfo:this.masterInfo,masterControl:this.masterControl},collection:{peers:this.peers}}),this.firstRun=!0,this.pushModel.set("inProgress",!1),this.pushModel.set("peersValidated",0),this.pushModel.set("peersRestarted",0),this.pushModel.set("peersReloaded",0),this.pushModel.set("peersCheckRestarted",0),this.peers.on("reset change",function(){if(this.masterActiveBundle&&this.masterLatestBundle){var i;if(0==this.validationProgress.length)for(i=0;i<this.peers.length;i++)this.validationProgress[i]=!1;if(0==this.restartProgress.length)for(i=0;i<this.peers.length;i++)this.restartProgress[i]=!1;if(0==this.reloadProgress.length)for(i=0;i<this.peers.length;i++)this.reloadProgress[i]=!1;if(0==this.dryRunProgress.length)for(i=0;i<this.peers.length;i++)this.dryRunProgress[i]=!1;"validation"==this.pushModel.get("state")&&(this.errors=[]),this.peers.each(function(peer,index){var activeBundleId=peer.entry.content.get("active_bundle_id"),restartRequired=peer.entry.content.get("restart_required_for_applying_dry_run_bundle"),_applyBundleStatus=peer.entry.content.get("apply_bundle_status"),validationErrors=_applyBundleStatus.invalid_bundle.bundle_validation_errors,label=peer.entry.content.get("label"),status=this.getPeerState(peer),bundleActionStatus=this.getPeerBundleStatus(peer);util.normalizeBoolean(restartRequired)&&this.pushModel.set("restartRequired",!0),this.isActionComplete(this.validationProgress)&&!this.firstRun||(validationErrors&&validationErrors.length&&this.errors.push({label:label,errors:validationErrors}),this.firstRun||(bundleActionStatus===PeerModel.VALIDATING||status!==PeerModel.PEER_STATUS_UP)&&status===PeerModel.PEER_STATUS_UP||(this.validationProgress[index]=!0)),"restart"===this.pushModel.get("state")&&(status!==PeerModel.PEER_STATUS_RESTARTING&&status!==PeerModel.PEER_STATUS_DOWN||(this.restartProgress[index]=!0)),this.isActionComplete(this.validationProgress)&&bundleActionStatus!==PeerModel.RELOADING&&(this.reloadProgress[index]=!0,this.isActionComplete(this.reloadProgress)&&bundleActionStatus!==PeerModel.CHECKING_RESTART&&(this.dryRunProgress[index]=!0)),this.peersChecksumUpdated[index]=activeBundleId===this.masterActiveBundle},this),this.firstRun=!1;var peersValidated=this.getActionCount(this.validationProgress),peersRestarted=this.getActionCount(this.restartProgress),peersReloaded=this.getActionCount(this.reloadProgress),peersCheckRestarted=this.getActionCount(this.dryRunProgress);peersValidated>=this.pushModel.get("peersValidated")&&this.pushModel.set("peersValidated",peersValidated),peersRestarted>=this.pushModel.get("peersRestarted")&&this.pushModel.set("peersRestarted",peersRestarted),peersReloaded>=this.pushModel.get("peersReloaded")&&this.pushModel.set("peersReloaded",peersReloaded),peersCheckRestarted>=this.pushModel.get("peersCheckRestarted")&&this.pushModel.set("peersCheckRestarted",peersCheckRestarted),this.pushModel.set("peersTotal",this.peers.length),this.pushModel.set("errors",this.errors),this.pushModel.trigger("tick"),"idle"===this.pushModel.get("state")&&this.isActionComplete(this.validationProgress)&&this.peersChecksumUpdated.indexOf(!1)===-1&&(this.peers.stopPolling(),this.pushModel.set("lastActionSuccess",this.isActionSuccessful()),this.pushModel.set("inProgress",!1))}},this),this.masterInfo.on("change",function(){var _activeBundle=this.masterInfo.entry.content.get("active_bundle"),_latestBundle=this.masterInfo.entry.content.get("latest_bundle");if(_activeBundle&&_latestBundle){this.masterActiveBundle=_activeBundle.checksum,this.masterLatestBundle=_latestBundle.checksum;var _applyBundleStatus=this.masterInfo.entry.content.get("apply_bundle_status");this.masterApplyBundleStatus=_applyBundleStatus.status,this.masterValidationErrors=_applyBundleStatus.invalid_bundle.bundle_validation_errors_on_master;var label=this.masterInfo.entry.content.get("label");this.masterValidationErrors&&this.masterValidationErrors.length&&(this.peers.stopPolling(),this.errors=[],this.errors.push({label:label,errors:this.masterValidationErrors}),this.pushModel.set("lastActionSuccess",this.isActionSuccessful()),this.pushModel.set("inProgress",!1),this.pushModel.set("errors",this.errors),this.pushModel.trigger("tick"));var state=this.getState();this.pushModel.set("state",state),"idle"==state&&this.masterInfo.stopPolling()}},this),this.pushModel.on(ActionsModel.actions.PUSH,function(){this.pushModel.set("lastRunAction",ActionsModel.actions.PUSH),this.cleanupPushModel(),this.masterControl.save().done(function(){this.monitorPushStatus()}.bind(this)).fail(function(respErr){this.handleFail(_("Push Unnecessary").t(),respErr.responseJSON.messages[0].text)}.bind(this))},this),this.pushModel.on(ActionsModel.actions.CHECK_RESTART,function(){this.pushModel.set("lastRunAction",ActionsModel.actions.CHECK_RESTART),this.cleanupPushModel(),this.checkRestartControl.save({},{data:{"check-restart":"1"}}).done(function(){this.monitorPushStatus()}.bind(this)).fail(function(respErr){this.handleFail(_("Check Restart Unsuccessful").t(),respErr.responseJSON.messages[0].text)}.bind(this))},this),this.pushModel.on(ActionsModel.actions.ROLLBACK,function(){this.pushModel.set("lastRunAction",ActionsModel.actions.ROLLBACK),this.cleanupPushModel(),this.rollbackModel.save().done(function(){this.monitorPushStatus()}.bind(this)).fail(function(respErr){this.handleFail(_("Rollback Unsuccessful").t(),respErr.responseJSON.messages[0].text)}.bind(this))},this)},handleFail:function(errName,errText){this.errors=[],this.errors.push({label:errName,errors:errText}),this.pushModel.set("lastActionSuccess",!1),this.pushModel.set("inProgress",!1),this.pushModel.set("errors",this.errors),this.pushModel.set("state","idle"),this.pushModel.trigger("tick"),this.pushModel.trigger("change:state"),this.peers.fetch(),this.masterInfo.fetch()},getPeerState:function(peer){return peer.entry.content.get("status")},getPeerBundleStatus:function(peer){return peer.entry.content.get("apply_bundle_status").status},getState:function(){var status=this.masterInfo.entry.content.get("apply_bundle_status").status,validation="Bundle validation is in progress."===status,reload=this.masterInfo.entry.content.get("apply_bundle_status").reload_bundle_issued||"Bundle dryrun reload is in progress. Waiting for all peers to return the status."===status,restart=this.masterInfo.entry.content.get("rolling_restart_flag");return validation?"validation":reload?"reload":restart?"restart":"idle"},cleanupPushModel:function(){this.errors=[],this.pushModel.set("peersValidated",0),this.pushModel.set("errors",{}),this.pushModel.trigger("tick"),this.validationProgress.splice(0),this.reloadProgress.splice(0),this.dryRunProgress.splice(0),this.restartProgress.splice(0),this.pushModel.unset("restartRequired",{silent:!0})},getActionCount:function(actionProgressArray){return _.reduce(actionProgressArray,function(memo,item){return item?memo+1:memo},0)},isActionComplete:function(actionProgressArray){return _.reduce(actionProgressArray,function(memo,item){return memo&&item},!0)},isActionSuccessful:function(){var hasNoCriticalErrors=!0,hasNoPushUnnecessaryError=!0;_.each(this.errors,function(instance){var instanceErrors=instance.errors;"Push Unnecessary"===instance.label&&(hasNoPushUnnecessaryError=!1),_.isArray(instanceErrors)&&_.each(instanceErrors,function(error){var isCriticalError=error.indexOf("[Critical]")!==-1;isCriticalError&&(hasNoCriticalErrors=!1)})});var applyBundleStatus=this.masterInfo.entry.content.get("apply_bundle_status"),hasNoInvalidBundle=!0;return applyBundleStatus.invalid_bundle&&applyBundleStatus.invalid_bundle.checksum&&(hasNoInvalidBundle=!1),this.masterActiveBundle===this.masterLatestBundle&&hasNoCriticalErrors&&hasNoPushUnnecessaryError&&hasNoInvalidBundle},monitorPushStatus:function(){this.pushModel.set("state","validation"),this.pushModel.set("inProgress",!0),this.masterInfo.startPolling({delay:1e3}),this.peers.startPolling({delay:500,data:{count:-1}})},page:function(locale,app,page){BaseRouter.prototype.page.apply(this,arguments),this.masterInfo.fetch({data:{},success:function(model,response){this.deferreds.masterInfo.resolve()}.bind(this),error:function(model,response){this.deferreds.masterInfo.resolve()}.bind(this)}),this.peers.fetch({data:{},success:function(model,response){this.deferreds.peers.resolve()}.bind(this),error:function(model,response){this.deferreds.peers.resolve()}.bind(this)}),this.deferreds.pageViewRendered.done(function(){$(".preload").replaceWith(this.pageView.el),$.when(this.deferreds.masterInfo,this.deferreds.peers).then(function(){this.pageView.$(".main-section-body").append(this.clusteringPushView.render().el)}.bind(this))}.bind(this))}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/cluster/master/Control":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/backbone"),__webpack_require__("models/StaticIdBase"),__webpack_require__("util/splunkd_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function($,Backbone,BaseModel,splunkDUtils){return BaseModel.extend({initialize:function(){BaseModel.prototype.initialize.apply(this,arguments)},sync:function(method,model,options){var defaults={data:{output_mode:"json"}};switch(method){case"update":defaults.processData=!0,defaults.type="POST",defaults.url=splunkDUtils.fullpath(model.id),$.extend(!0,defaults,options);break;default:throw new Error("invalid method: "+method)}return Backbone.sync.call(this,method,model,defaults)}},{id:"cluster/master/control/default/apply"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/push/ActionProgress":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),module,__webpack_require__("views/Base"),__webpack_require__(580),__webpack_require__("views/clustering/push/ActionProgress.pcss"),__webpack_require__("util/console")],__WEBPACK_AMD_DEFINE_RESULT__=function($,module,BaseView,Template,css,console){
return BaseView.extend({moduleId:module.id,template:Template,initialize:function(options){options=options||{},BaseView.prototype.initialize.call(this,options),this.model.pushModel.on("tick",this.render,this),this.peerActionTypeKey=options.peerActionTypeKey,this.label=options.label},reset:function(){this.model.pushModel.set(this.peerActionTypeKey,0),this.render()},render:function(){var html=this.compiledTemplate({count:this.model.pushModel.get(this.peerActionTypeKey),total:this.model.pushModel.get("peersTotal"),label:this.label});this.$el.html(html)}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"models/services/cluster/master/ValidateControl":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__("shim/jquery"),_jquery2=_interopRequireDefault(_jquery),_backbone=__webpack_require__("require/backbone"),_backbone2=_interopRequireDefault(_backbone),_StaticIdBase=__webpack_require__("models/StaticIdBase"),_StaticIdBase2=_interopRequireDefault(_StaticIdBase),_splunkd_utils=__webpack_require__("util/splunkd_utils"),_splunkd_utils2=_interopRequireDefault(_splunkd_utils);exports.default=_StaticIdBase2.default.extend({initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_StaticIdBase2.default.prototype.initialize.apply(this,args)},sync:function(method,model,options){var defaults={data:{output_mode:"json"}};switch(method){case"update":defaults.processData=!0,defaults.type="POST",defaults.url=_splunkd_utils2.default.fullpath(model.id),_jquery2.default.extend(!0,defaults,options);break;default:throw new Error("invalid method: "+method)}return _backbone2.default.sync.call(this,method,model,defaults)}},{id:"cluster/master/control/control/validate_bundle"}),module.exports=exports.default},"views/clustering/push/ActionProgress.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(581);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"models/services/cluster/master/Rollback":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__("shim/jquery"),_jquery2=_interopRequireDefault(_jquery),_backbone=__webpack_require__("require/backbone"),_backbone2=_interopRequireDefault(_backbone),_StaticIdBase=__webpack_require__("models/StaticIdBase"),_StaticIdBase2=_interopRequireDefault(_StaticIdBase),_splunkd_utils=__webpack_require__("util/splunkd_utils"),_splunkd_utils2=_interopRequireDefault(_splunkd_utils),_splunk=__webpack_require__("shim/splunk.util"),_splunk2=_interopRequireDefault(_splunk);exports.default=_StaticIdBase2.default.extend({initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_StaticIdBase2.default.prototype.initialize.apply(this,args)},sync:function(method,model,options){var defaults={data:{output_mode:"json"}};switch(method){case"update":defaults.processData=!0,defaults.type="POST",defaults.url=_splunkd_utils2.default.fullpath(model.id),_jquery2.default.extend(!0,defaults,options);break;default:throw new Error(_splunk2.default.sprintf("invalid method: %s",method))}return _backbone2.default.sync.call(this,method,model,defaults)}},{id:"cluster/master/control/control/rollback"}),module.exports=exports.default},"views/clustering/push/peer_nodes/table/Master":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__("shim/jquery"),_jquery2=_interopRequireDefault(_jquery),_underscore=__webpack_require__("require/underscore"),_underscore2=_interopRequireDefault(_underscore),_Base=__webpack_require__("views/Base"),_Base2=_interopRequireDefault(_Base),_TableHead=__webpack_require__("views/shared/TableHead"),_TableHead2=_interopRequireDefault(_TableHead),_TableRow=__webpack_require__("views/clustering/push/peer_nodes/table/TableRow"),_TableRow2=_interopRequireDefault(_TableRow),_TableDock=__webpack_require__("views/shared/delegates/TableDock"),_TableDock2=_interopRequireDefault(_TableDock),_TableRowToggle=__webpack_require__("views/shared/delegates/TableRowToggle"),_TableRowToggle2=_interopRequireDefault(_TableRowToggle),_MoreInfo=__webpack_require__("views/clustering/push/peer_nodes/table/MoreInfo"),_MoreInfo2=_interopRequireDefault(_MoreInfo);exports.default=_Base2.default.extend({moduleId:module.id,initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_Base2.default.prototype.initialize.apply(this,args),this.children.tableRowToggle=new _TableRowToggle2.default({el:this.el,collapseOthers:!1}),this.tableHeaders=[],this.tableHeaders.push({label:(0,_underscore2.default)("i").t(),className:"col-info",html:'<i class="icon-info"></i>'}),this.tableHeaders.push({label:(0,_underscore2.default)("Peer").t(),sortKey:"label"}),this.tableHeaders.push({label:(0,_underscore2.default)("Site").t(),className:"col-actions"}),this.tableHeaders.push({label:(0,_underscore2.default)("Status").t(),className:"col-status"}),this.tableHeaders.push({label:(0,_underscore2.default)("Action Status").t(),className:"col-action-status"}),this.children.head=new _TableHead2.default({model:this.model.state,columns:this.tableHeaders}),this.children.rows=this.rowsFromCollection(),this.activate(),this.children.tableDock=new _TableDock2.default({el:this.el,offset:36,dockScrollBar:!1,defaultLayout:"fixed",flexWidthColumn:1})},startListening:function(){this.listenTo(this.collection.peers,"reset",this.updateAndRenderRows)},rowsFromCollection:function(){var _this=this;return _underscore2.default.flatten(this.collection.peers.map(function(model,i){return[new _TableRow2.default({model:{peer:model,state:_this.model.state,pushModel:_this.model.pushModel},index:i}),new _MoreInfo2.default({model:{peer:model,pushModel:_this.model.pushModel},index:i,colSpan:_this.tableHeaders.length-1})]},this))},renderRows:function(){var _this2=this;(0,_underscore2.default)(this.children.rows).each(function(row){row.render().appendTo(_this2.$(".peer-nodes"))},this),this.children.tableDock.update()},updateAndRenderRows:function(){(0,_underscore2.default)(this.children.rows).each(function(row){row.remove()},this),this.children.rows=this.rowsFromCollection(),this.renderRows()},render:function(){var $html=(0,_jquery2.default)(this.compiledTemplate({}));return $html.find(".item-table-head-placeholder").replaceWith(this.children.head.render().el),this.$el.html($html),this.renderRows(),this},template:'\n        <table class="table table-chrome table-striped table-row-expanding table-listing">\n        <thead class="item-table-head-placeholder"></thead>\n        <tbody class="peer-nodes"></tbody>\n        </table>\n    '}),module.exports=exports.default},"views/clustering/push/peer_nodes/table/TableRow":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _underscore=__webpack_require__("require/underscore"),_underscore2=_interopRequireDefault(_underscore),_Base=__webpack_require__("views/Base"),_Base2=_interopRequireDefault(_Base),_Peer=__webpack_require__("models/services/cluster/master/Peer"),_Peer2=_interopRequireDefault(_Peer);exports.default=_Base2.default.extend({moduleId:module.id,tagName:"tr",className:"expand",initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_Base2.default.prototype.initialize.apply(this,args),this.$el.addClass(this.options.index%2?"even":"odd"),this.activate()},getBundleActionStatus:function(){if(_underscore2.default.isUndefined(this.model.pushModel.get("lastRunAction")))return"None";var rawStatus=this.model.peer.entry.content.get("apply_bundle_status").status;switch(rawStatus){case _Peer2.default.VALIDATED:return(0,_underscore2.default)("Validation Done").t();case _Peer2.default.RELOADING:return(0,_underscore2.default)("Reload In Progress").t();case _Peer2.default.CHECKING_RESTART:return(0,_underscore2.default)("Validating and Checking For Restart").t();default:return rawStatus}},render:function(){return this.$el.html(this.compiledTemplate({peerLabel:this.model.peer.entry.content.get("label"),site:this.model.peer.entry.content.get("site"),bundleActionStatus:this.getBundleActionStatus(),peerStatus:this.model.peer.entry.content.get("status")})),this},template:'\n        <td class="expands">\n            <a href="#"><i class="icon-triangle-right-small"></i></a>\n        </td>\n        <td class="peer-label">\n            <%- peerLabel %>\n        </td>\n        <td class="site">\n            <%- site %>\n        </td>\n        <td class="peer-status">\n            <%- peerStatus %>\n        </td>\n        <td class="actions-status">\n            <%= bundleActionStatus %>\n        </td>\n    '}),module.exports=exports.default},"views/clustering/push/peer_nodes/table/MoreInfo":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _Base=__webpack_require__("views/Base"),_Base2=_interopRequireDefault(_Base),_Actions=__webpack_require__("models/clustering/Actions"),_Actions2=_interopRequireDefault(_Actions);exports.default=_Base2.default.extend({moduleId:module.id,tagName:"tr",className:"more-info",initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_Base2.default.prototype.initialize.apply(this,args),this.$el.addClass(this.options.index%2?"even":"odd").css("display","none"),this.activate()},render:function(){return this.$el.html(this.compiledTemplate({activeChecksum:this.model.peer.entry.content.get("active_bundle_id"),latestChecksum:this.model.peer.entry.content.get("latest_bundle_id"),lastValidatedChecksum:this.model.peer.entry.content.get("last_validated_bundle"),cols:this.options.colSpan,actions:_Actions2.default.actions})),this},template:'\n        <td class="details" colspan="<%= cols %>">\n            <dl class="list-dotted">\n                <dt class="active-checksum"><%- _("Active Bundle ID").t() %>\n                    <dd class="active-checksum">\n                        <%- activeChecksum %>\n                    </dd>\n                </dt>\n                <dt class="latest-checksum"><%- _("Latest Bundle ID").t() %>\n                    <dd class="latest-checksum">\n                        <%- latestChecksum %>\n                    </dd>\n                </dt>\n                <% if (this.model.pushModel.get(\'lastRunAction\') === actions.CHECK_RESTART) { %>\n                    <dt class="last-validated-checksum"><%- _("Last Validated Bundle ID").t() %>\n                        <dd class="last-validated-checksum">\n                            <%- lastValidatedChecksum %>\n                        </dd>\n                    </dt>\n                <% } %>\n            </dl>\n        </td>\n    '}),module.exports=exports.default},"views/clustering/push/system/Actions":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _underscore=__webpack_require__("require/underscore"),_jquery=(_interopRequireDefault(_underscore),__webpack_require__("shim/jquery")),_jquery2=_interopRequireDefault(_jquery),_Base=__webpack_require__("views/Base"),_Base2=_interopRequireDefault(_Base),_ConfirmDialog=__webpack_require__("views/clustering/push/ConfirmDialog"),_ConfirmDialog2=_interopRequireDefault(_ConfirmDialog),_Actions=__webpack_require__("models/clustering/Actions"),_Actions2=_interopRequireDefault(_Actions);exports.default=_Base2.default.extend({moduleId:module.id,initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_Base2.default.prototype.initialize.apply(this,args)},createConfirmDialog:function(action){this.children.confirmDialog&&this.children.confirmDialog.remove(),this.children.confirmDialog=new _ConfirmDialog2.default({model:this.model,onHiddenRemove:!0,action:action}),(0,_jquery2.default)("body").append(this.children.confirmDialog.render().el),this.children.confirmDialog.show()},disableButtons:function(){(0,_jquery2.default)(".action-btn").addClass("disabled")},enableButtons:function(){(0,_jquery2.default)(".action-btn").removeClass("disabled"),this.disableUnavailableButtons()},disableUnavailableButtons:function(){var previousBundleChecksum=this.model.masterInfo.entry.content.get("previous_active_bundle").checksum;previousBundleChecksum||(0,_jquery2.default)(".action-btn.rollback").addClass("disabled")},events:{"click a.apply:not(.disabled)":function(e){e.preventDefault(),this.createConfirmDialog(_Actions2.default.actions.PUSH)},"click a.check-restart:not(.disabled)":function(e){e.preventDefault(),this.createConfirmDialog(_Actions2.default.actions.CHECK_RESTART)},"click a.rollback:not(.disabled)":function(e){this.createConfirmDialog(_Actions2.default.actions.ROLLBACK),e.preventDefault()}},render:function(){return this.$el.html(this.compiledTemplate({})),this.disableUnavailableButtons(),this},template:'\n        <div class="btn-toolbar">\n            <a class="btn btn-primary action-btn check-restart" href="#"><%= _(\'Validate and Check Restart\').t() %></a>\n            <a class="btn btn-primary action-btn apply"><%= _(\'Push\').t() %></a>\n            <a class="btn btn-primary action-btn rollback" href="#"><%= _(\'Rollback\').t() %></a>\n        </div>\n    '}),module.exports=exports.default},"views/clustering/push/ConfirmDialog":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("uri/route"),__webpack_require__("views/shared/Modal"),__webpack_require__("models/clustering/Actions")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,route,Modal,ActionsModel){return Modal.extend({moduleId:module.id,className:Modal.CLASS_NAME,initialize:function(options){Modal.prototype.initialize.apply(this,arguments),this.action=this.options.action},events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){this.model.pushModel.trigger("action"),this.model.pushModel.trigger(this.action),this.hide()}}),getTemplateContent:function(){var content={};switch(this.action){case ActionsModel.actions.PUSH:content.header=_("Distribute Configuration Bundle").t(),content.select=_("Push Changes").t(),content.body=_("Some configuration changes might require a restart of all peers. Would you like to push the changes?").t();break;case ActionsModel.actions.CHECK_RESTART:content.header=_("Validate and Check if Restart is Required").t(),content.select=_("Validate and Check Restart").t(),content.body=_("Some configuration changes might only be valid on certain versions of Splunk Enterprise, or might require a restart of all peers. Would you like to validate and check if these changes would require a restart? This will not push the changes.").t();break;case ActionsModel.actions.ROLLBACK:content.header=_("Rollback Last Applied Configuration Bundle").t(),content.select=_("Rollback Changes").t(),content.body=_("Some configuration changes might require a restart of all peers. Would you like to rollback the last applied configuration bundle?").t()}return content},render:function(){var content=this.getTemplateContent();this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(content.header);var root=this.model.application.get("root"),locale=this.model.application.get("locale"),link=route.docHelp(root,locale,"manager.clustering.bundle"),html=this.compiledTemplate({learnmoreLink:link,content:content});return this.$(Modal.BODY_SELECTOR).append(html),this.$(Modal.BODY_SELECTOR).show(),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+content.select+"</a>"),this},template:"<%= content.body %> <a href='<%=learnmoreLink %>' class='external' target='_blank'><%= _('Learn More').t() %></a>"})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/clustering/push/StatusMessage":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _underscore=__webpack_require__("require/underscore"),_underscore2=_interopRequireDefault(_underscore),_Base=__webpack_require__("views/Base"),_Base2=_interopRequireDefault(_Base),_Master=__webpack_require__("views/shared/waitspinner/Master"),_Master2=_interopRequireDefault(_Master);exports.default=_Base2.default.extend({moduleId:module.id,initialize:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_Base2.default.prototype.initialize.apply(this,args),this.listenTo(this.model.masterInfo.entry.content,"change:apply_bundle_status",this.render),this.firstRender=!0,this.children.spinner=new _Master2.default},getStatusMessage:function(){var applyBundleStatus=this.model.masterInfo.entry.content.get("apply_bundle_status"),message=applyBundleStatus&&applyBundleStatus.status;return("None"===message||_underscore2.default.isUndefined(message))&&(this.firstRender?(message="Initializing Action...",this.firstRender=!1):message=""),message},render:function(){var statusMessage=this.getStatusMessage(),html=this.compiledTemplate({applyBundleStatusMessage:statusMessage});return statusMessage&&this.$el.html(html),this.children.spinner.render().appendTo(this.$(".wait-spinner")),this.children.spinner.start(),this},template:'\n        <div class="section-padded">\n            <div class="wait-spinner"></div>\n            <h3 class="bundle-status-message">\n                <%- applyBundleStatusMessage %>\n            </h3>\n        </div>\n    '}),module.exports=exports.default},"models/clustering/Actions":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0});var _Base=__webpack_require__("models/Base"),_Base2=_interopRequireDefault(_Base);exports.default=_Base2.default.extend({initialize:function(options){_Base2.default.prototype.initialize.call(this,options)}},{actions:{PUSH:"push",CHECK_RESTART:"check_restart",ROLLBACK:"rollback"}}),module.exports=exports.default},"views/clustering/push/Master.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(583);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"views/clustering/push/PushStatus":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/FlashMessages"),__webpack_require__("models/clustering/Actions"),__webpack_require__(579),__webpack_require__("util/time"),__webpack_require__("shim/bootstrap.tooltip")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,module,BaseView,FlashMessagesView,ActionsModel,Template,timeUtils,bsTooltip){return BaseView.extend({moduleId:module.id,template:Template,initialize:function(options){BaseView.prototype.initialize.call(this,options),this.children.flashMessages=new FlashMessagesView({model:this.model.masterControl}),this.model.pushModel.on("reset change",this.render,this)},getTitle:function(){switch(this.model.pushModel.get("lastRunAction")){case ActionsModel.actions.CHECK_RESTART:return _("Last Validate and Check Restart: ").t();case ActionsModel.actions.PUSH:return _("Last Push: ").t();case ActionsModel.actions.ROLLBACK:return _("Last Rollback: ").t();default:return _("Bundle Information: ").t()}},render:function(){if(this.model.masterInfo&&this.model.pushModel){var activeBundle=this.model.masterInfo.entry.content.get("active_bundle"),latestBundle=this.model.masterInfo.entry.content.get("latest_bundle"),checkRestartBundle=this.model.masterInfo.entry.content.get("last_dry_run_bundle"),previousBundle=this.model.masterInfo.entry.content.get("previous_active_bundle"),timeLastPush=latestBundle&&latestBundle.timestamp?timeUtils.convertToLocalTime(latestBundle.timestamp):_("N/A").t(),activeBundleId=activeBundle&&activeBundle.checksum&&""!==activeBundle.checksum?activeBundle.checksum:_("N/A").t(),latestBundleId=latestBundle&&latestBundle.checksum&&""!==latestBundle.checksum?latestBundle.checksum:_("N/A").t(),checkRestartBundleId=checkRestartBundle&&checkRestartBundle.checksum&&""!==checkRestartBundle.checksum?checkRestartBundle.checksum:_("N/A").t(),previousBundleId=previousBundle&&previousBundle.checksum&&""!==previousBundle.checksum?previousBundle.checksum:_("N/A").t(),html=this.compiledTemplate({lastActionSuccess:this.model.pushModel.get("lastActionSuccess"),timeLastPush:timeLastPush,activeBundleId:activeBundleId,latestBundleId:latestBundleId,checkRestartBundleId:checkRestartBundleId,previousBundleId:previousBundleId,lastRunAction:this.model.pushModel.get("lastRunAction"),restartRequired:this.model.pushModel.get("restartRequired"),title:this.getTitle(),actions:ActionsModel.actions});this.$el.html(html),this.$el.prepend(this.children.flashMessages.render().el),this.$(".tooltip-link").tooltip({animation:!1,container:"body"})}}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});