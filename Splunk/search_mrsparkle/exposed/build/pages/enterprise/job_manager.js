webpackJsonp([47],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/build/pages/enterprise")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("routers/JobManager"),__webpack_require__("util/router_utils")],__WEBPACK_AMD_DEFINE_RESULT__=function(JobManagerRouter,router_utils){new JobManagerRouter;router_utils.start_backbone_history()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},1099:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(12)(),exports.push([module.id,'.jobmanager .jobmanager-tablecontrols{height:87px}.jobmanager .filters-container{padding:10px 20px 0}.jobmanager .filters-container.affix-top{position:fixed;top:0;left:0;right:0;z-index:407;background:#eee}.jobmanager .filters-container:after,.jobmanager .filters-container:before{display:table;content:"";line-height:0}.jobmanager .filters-container:after{clear:both}.jobmanager .filters-container .shared-collectioncount{margin-right:10px}.jobmanager .filters-container .name-filter-container{margin-left:10px;display:inline-block}.jobmanager .filters-container .count-per-page{float:right}.jobmanager .filters-container .app-filter{min-width:70px;max-width:calc((100vw - 700px) / 2)}.jobmanager .filters-container .app-filter>.dropdown-toggle{display:block}.jobmanager .filters-container .app-filter>.dropdown-toggle>.link-label{display:inline-block;vertical-align:middle;max-width:calc(100% - 13px);overflow:hidden;text-overflow:ellipsis}.jobmanager .selected-container{height:30px;padding:10px 20px}.jobmanager .selected-container.affix-top{position:fixed;top:37px;left:0;right:0;z-index:406;background:#eee}.jobmanager .selected-container:after,.jobmanager .selected-container:before{display:table;content:"";line-height:0}.jobmanager .selected-container:after{clear:both}.jobmanager .selected-container .selected-count{float:left;padding:4px 10px 0}.jobmanager .jobmanager-table table{width:auto;margin-bottom:-1px}.jobmanager .jobmanager-table table tbody>tr:nth-child(4n+1)>td{background-color:#fff}.jobmanager .jobmanager-table table tbody>tr:nth-child(4n+2)>td{background-color:#fff;border-top:0}.jobmanager .jobmanager-table table tbody>tr:nth-child(4n+3)>td{background-color:#f5f5f5}.jobmanager .jobmanager-table table tbody>tr:nth-child(4n+4)>td{background-color:#f5f5f5;border-top:0}.jobmanager .jobmanager-table table .col-application,.jobmanager .jobmanager-table table .col-owner{word-wrap:break-word;word-break:break-all}.jobmanager .jobmanager-table table .col-text{padding-top:10px}.jobmanager .jobmanager-table table .col-actions{width:205px}.jobmanager .jobmanager-table table .col-select-all{width:20px}.jobmanager .jobmanager-table table .expands{width:15px}.jobmanager .jobmanager-table table th.expands{padding-left:8px}.jobmanager .jobmanager-table table td.expands>a,.jobmanager .jobmanager-table table td.expands>span{padding-top:10px}.jobmanager .jobmanager-table table .details{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-left:8px}.jobmanager .jobmanager-table table .details.expanded{word-break:break-all}.jobmanager .jobmanager-table table .details.expanded>a{white-space:pre-wrap;word-break:break-word}.jobmanager .jobmanager-table table .details a.saved-search{font-weight:700}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div{background-color:#fff;min-height:406px;text-align:center;margin-top:10%}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div:after,.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div:before{display:table;content:"";line-height:0}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div:after{clear:both}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div h2{font-weight:200;font-size:24px}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div h2 div.shared-waitspinner{display:inline-block;margin-right:5px}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div a{margin-top:20px}.jobmanager .jobmanager-table table .jobmanager-table-emptytablerow>td>div .reload-report{margin-right:20px}',""])},"views/jobmanager/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("shim/jquery"),module,__webpack_require__("collections/search/Jobs"),__webpack_require__("models/Base"),__webpack_require__("views/Base"),__webpack_require__("views/jobmanager/table/Master"),__webpack_require__("views/jobmanager/tablecontrols/Master"),__webpack_require__("shim/splunk.util"),__webpack_require__("uri/route"),__webpack_require__("views/jobmanager/Master.pcss")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,module,JobsCollection,BaseModel,Base,Table,TableControls,splunkUtil,route,css){return Base.extend({moduleId:module.id,initialize:function(){Base.prototype.initialize.apply(this,arguments),this.collection.selectedJobs=new JobsCollection,this.model.checkAllCheckbox=new BaseModel,this.children.tableControls=new TableControls({model:{application:this.model.application,user:this.model.user,state:this.model.state},collection:{jobs:this.collection.jobs,users:this.collection.users,apps:this.collection.apps,selectedJobs:this.collection.selectedJobs}}),this.children.table=new Table({model:{application:this.model.application,user:this.model.user,appLocal:this.model.appLocal,serverInfo:this.model.serverInfo,state:this.model.state,checkAllCheckbox:this.model.checkAllCheckbox},collection:{jobs:this.collection.jobs,apps:this.collection.apps}}),this.activate()},startListening:function(){this.listenTo(this.model.state,"bulk-action-reset",function(){this.collection.jobs.trigger("refresh")}),this.listenTo(this.collection.selectedJobs,"refresh",function(){this.collection.jobs.trigger("refresh")}),this.listenTo(this.collection.jobs,"change:selected",_.debounce(function(){this.collection.selectedJobs.set(this.collection.jobs.filter(function(job){return job.get("selected")}));var writableJobs=this.collection.jobs.filter(function(job){return job.entry.acl.canWrite("selected")});this.collection.selectedJobs.length===writableJobs.length?this.model.checkAllCheckbox.set("selectAll",1):this.model.checkAllCheckbox.set("selectAll",0)})),this.listenTo(this.collection.jobs,"reset",function(){this.collection.selectedJobs.reset(),this.model.checkAllCheckbox.set("selectAll",0)})},render:function(){var docUrl=route.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.jobs.about");return this.$el.html(this.compiledTemplate({docUrl:docUrl})),this.children.tableControls.render().appendTo(this.$el),this.children.table.render().appendTo(this.$el),this},template:'\t                <div class="section-header section-padded">\t                    <h1 class="section-title"><%- _("Jobs").t() %></h1>\t                    <div>\t                        <%- _("Manage your jobs.").t() %>\t                        <a href="<%- docUrl %>" target="_blank" class="help-link"><%- _("Learn More").t() %> <i class="icon-external"></i></a>\t                    </div>\t                </div>\t                <div class="divider"></div>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/table/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[module,__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("views/Base"),__webpack_require__("views/shared/TableHead"),__webpack_require__("views/jobmanager/table/TableRow"),__webpack_require__("views/jobmanager/table/EmptyTableRow"),__webpack_require__("views/jobmanager/table/MoreInfo"),__webpack_require__("views/shared/delegates/TableDock"),__webpack_require__("util/keyboard")],__WEBPACK_AMD_DEFINE_RESULT__=function(module,$,_,BaseView,TableHead,TableRow,EmptyTableRow,MoreInfo,TableDock,keyboard){return BaseView.extend({moduleId:module.id,initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.children.head=new TableHead({model:{state:this.model.state,checkbox:this.model.checkAllCheckbox},checkboxClassName:"col-select-all",columns:[{className:"expands"},{className:"col-select-all"},{label:_("Owner").t(),className:"col-owner",sortKey:"user"},{label:_("Application").t(),className:"col-application",sortKey:"eai:acl.app",visible:function(){return this.model.user.canUseApps()}.bind(this)},{label:_("Events").t(),className:"col-events",sortKey:"eventCount"},{label:_("Size").t(),className:"col-size",sortKey:"diskUsage"},{label:_("Created at").t(),className:"col-created",sortKey:"dispatch_time"},{label:_("Expires").t(),className:"col-expires",sortKey:"ttl"},{label:_("Runtime").t(),className:"col-runtime",sortKey:"runDuration"},{label:_("Status").t(),className:"col-status"},{label:_("Actions").t(),className:"col-actions"}]}),this.children.rows=this.rowsFromCollection(),this.children.tableDock=new TableDock({el:this.el,offset:87,dockScrollBar:!1,proxyThEvents:["click label.checkbox"]}),this.activate()},events:{"click .col-select-all":function(e){var value=this.model.checkAllCheckbox.get("selectAll");this.collection.jobs.forEach(function(job){job.entry.acl.canWrite()&&job.set("selected",value)})},"click td.expands":function(e){this.toggleRow($(e.currentTarget))},"keydown td.expands":function(e){e.which===keyboard.KEYS.ENTER&&(this.toggleRow($(e.currentTarget)),e.preventDefault())},"click td.expands a":function(e){e.preventDefault()}},startListening:function(){this.listenTo(this.collection.jobs,"reset",this.renderRows),this.listenTo(this.model.checkAllCheckbox,"change",function(){this.children.tableDock.update()}),$(window).on("resize."+this.nameSpace,_.debounce(this.disableNonTruncatedExpands.bind(this)))},toggleRow:function($expandsTD){if(!$expandsTD.hasClass("disabled")){var $arrow=$expandsTD.find("i"),$details=$expandsTD.parent().next().find("td.details"),expanded=$details.hasClass("expanded");expanded?($arrow.addClass("icon-triangle-right-small").removeClass("icon-triangle-down-small"),$details.removeClass("expanded")):($arrow.removeClass("icon-triangle-right-small").addClass("icon-triangle-down-small"),$details.addClass("expanded"))}},disableNonTruncatedExpands:function(){_.each(this.$("td.expands"),function(expandsTD){var collapsedHeight,expandedHeight,$expandsTD=$(expandsTD),$searchRow=$expandsTD.parent().next(),$details=$searchRow.find("td.details"),$testSearchRow=$searchRow.clone().css({visibility:"hidden"}),expanded=$details.hasClass("expanded");$testSearchRow.prepend("<td></td>"),$testSearchRow.appendTo(this.$("tbody")),expanded?(expandedHeight=parseFloat($testSearchRow.css("height")),$testSearchRow.find("td.details").removeClass("expanded"),collapsedHeight=parseFloat($testSearchRow.css("height"))):(collapsedHeight=parseFloat($testSearchRow.css("height")),$testSearchRow.find("td.details").addClass("expanded"),expandedHeight=parseFloat($testSearchRow.css("height"))),expandedHeight>collapsedHeight?$expandsTD.removeClass("disabled").find("span").replaceWith('<a href="#"><i class="icon-triangle-right-small"></i></a>'):(expanded&&this.toggleRow($expandsTD),$expandsTD.addClass("disabled").find("a").replaceWith('<span><i class="icon-triangle-right-small"></i></span>')),$testSearchRow.remove()},this)},rowsFromCollection:function(){var rows=[];return this.collection.jobs.length?this.collection.jobs.each(function(model,i){model.set("selected",0),rows.push(new TableRow({model:{job:model,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal,serverInfo:this.model.serverInfo},attributes:{"data-sid":model.get(model.idAttribute)}})),rows.push(new MoreInfo({model:{job:model,application:this.model.application},collection:{apps:this.collection.apps},cols:9+this.model.user.canUseApps(),attributes:{"data-sid":model.get(model.idAttribute)}}))},this):rows.push(new EmptyTableRow({collection:{jobs:this.collection.jobs},model:{state:this.model.state},cols:10+this.model.user.canUseApps()})),rows},_render:function(){var fragment=document.createDocumentFragment();_(this.children.rows).each(function(row){row.render().appendTo(fragment)},this),this.$(".job-listings").html(fragment),this.disableNonTruncatedExpands(),this.children.tableDock.update()},renderRows:function(){_(this.children.rows).each(function(row){row.debouncedRemove({detach:!0})},this),this.children.rows=this.rowsFromCollection(),this._render()},render:function(){return this.el.innerHTML||(this.$el.append(this.compiledTemplate({})),this.children.head.render().prependTo(this.$(".table"))),this._render(),this},onAddedToDocument:function(){BaseView.prototype.onAddedToDocument.apply(this,arguments),this.disableNonTruncatedExpands()},template:'\t                <table class="table table-fixed table-row-expanding table-chrome">\t                    <tbody class="job-listings"></tbody>\t                </table>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/table/TableRow":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/jobcontrols/Master"),__webpack_require__("views/shared/jobstatus/buttons/Master"),__webpack_require__("views/shared/controls/SyntheticCheckboxControl"),__webpack_require__("uri/route"),__webpack_require__("stubs/i18n"),__webpack_require__("util/time"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,module,BaseView,JobStatusControlsView,JobStatusButtonsView,SyntheticCheckboxControlView,route,i18n,time_utils,splunkUtil){return BaseView.extend({moduleId:module.id,tagName:"tr",initialize:function(){BaseView.prototype.initialize.apply(this,arguments),this.children.actionControls=new JobStatusControlsView({model:{searchJob:this.model.job,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user},allowSendBackground:!1,allowTouch:!0,externalJobLinkPage:"search"}),this.children.actionButtons=new JobStatusButtonsView({model:{searchJob:this.model.job,application:this.model.application,serverInfo:this.model.serverInfo,user:this.model.user},hidePrintButton:!0,externalJobLinkPage:"search",verifyJobExistsExport:!0}),this.children.bulkActionCheckbox=new SyntheticCheckboxControlView({modelAttribute:"selected",model:this.model.job}),this.model.job.entry.acl.canWrite()||this.children.bulkActionCheckbox.disable(),this.activate()},startListening:function(){this.listenTo(this.model.job,"sync",this.render),this.listenTo(this.model.job.control,"sync",this.render),this.listenTo(this.model.job.entry.content,"change:isDone change:isPaused change:isFinalized change:isFailed change:dispatchState",_.debounce(function(){this.model.job.trigger("refresh")})),this.listenTo(this.model.job.entry.content.custom,"change:isBackground",function(){this.model.job.trigger("refresh")})},getCanonicalStatus:function(){var doneProgress=Math.round(100*this.model.job.entry.content.get("doneProgress"));return this.model.job.isQueued()?_("Queued").t():this.model.job.isParsing()?_("Parsing").t():this.model.job.isPaused()?_("Paused").t():this.model.job.isFinalizing()?_("Finalizing").t():this.model.job.isFinalized()?_("Finalized").t():this.model.job.isFailed()?_("Failed").t():this.model.job.isDone()?_("Done").t():this.model.job.isRealtime()?_("Running (real-time)").t():this.model.job.isBackground()?_(splunkUtil.sprintf("Backgrounded (%s%)",doneProgress)).t():_(splunkUtil.sprintf("Running (%s%)",doneProgress)).t()},render:function(){var splitRuntime,runtimeHours,runtimeMinutes,runtimeSeconds,runtime=time_utils.secondsToSeparatedDate(this.model.job.entry.content.get("runDuration"),!0),sid=this.model.job.entry.content.get("sid"),createdAt=this.model.job.getCreatedString()||_("Waiting...").t(),owner=this.model.job.entry.acl.get("owner"),appName=this.model.job.entry.acl.get("app"),size=this.model.job.getSizeString(),events=i18n.format_decimal(this.model.job.entry.content.get("eventCount")||0),expiration=this.model.job.getExpirationString(),status=this.getCanonicalStatus(),html=this.$el.html();return this.model.job.entry.content.get("runDuration")?(splitRuntime=time_utils.secondsToSeparatedDate(this.model.job.entry.content.get("runDuration"),!0),runtimeHours=splitRuntime.hours.toString().length>=2?splitRuntime.hours.toString():"0"+splitRuntime.hours,runtimeMinutes=splitRuntime.minutes.toString().length>=2?splitRuntime.minutes.toString():"0"+splitRuntime.minutes,runtimeSeconds=splitRuntime.seconds.toString().length>=2?splitRuntime.seconds.toString():"0"+splitRuntime.seconds,runtime=runtimeHours+":"+runtimeMinutes+":"+runtimeSeconds):runtime=_("Waiting...").t(),html?(this.$(".col-owner").html(_.template("<%- owner %>",{owner:owner})),this.$(".col-application").html(_.template("<%- appName %>",{appName:appName})),this.$(".col-events").html(_.template("<%- events %>",{events:events})),this.$(".col-size").html(_.template("<%- size %>",{size:size})),this.$(".col-created").html(_.template("<%- createdAt %>",{createdAt:createdAt})),this.$(".col-expires").html(_.template("<%- expiration %>",{expiration:expiration})),this.$(".col-runtime").html(_.template("<%- runtime %>",{runtime:runtime})),this.$(".col-status").html(_.template("<%- status %>",{status:status}))):(this.$el.html(this.compiledTemplate({sid:sid,createdAt:createdAt,owner:owner,appName:appName,canUseApps:this.model.user.canUseApps(),size:size,events:events,runtime:runtime,expiration:expiration,status:status})),this.children.actionControls.render().appendTo(this.$(".col-actions")),this.children.actionButtons.render().appendTo(this.$(".col-actions")),this.children.bulkActionCheckbox.render().appendTo(this.$(".col-selected"))),this},template:'\t                <td class="expands" rowspan="2"><a href="#"><i class="icon-triangle-right-small"></i></a>\t                </td>\t                <td class="col-selected">\t                </td>\t                <td class="col-owner col-text">\t                    <%- owner %>\t                </td>\t                <% if (canUseApps) { %>\t                    <td class="col-application col-text">\t                        <%- appName %>\t                    </td>\t                <% } %>\t                <td class="col-events col-text">\t                    <%- events %>\t                </td>\t                <td class="col-size col-text">\t                    <%- size %>\t                </td>\t                <td class="col-created col-text">\t                    <%- createdAt %>\t                </td>\t                <td class="col-expires col-text">\t                    <%- expiration %>\t                </td>\t                <td class="col-runtime col-text">\t                    <%- runtime %>\t                </td>\t                <td class="col-status col-text">\t                    <%- status %>\t                </td>\t                <td class="col-actions">\t                </td>\t                \t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/table/EmptyTableRow":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/waitspinner/Master")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,module,BaseView,WaitSpinner){return BaseView.extend({moduleId:module.id,tagName:"tr",initialize:function(options){options=options||{};var defaults={cols:1};_.defaults(options,defaults),BaseView.prototype.initialize.call(this,options),this.activate()},startListening:function(){this.listenTo(this.model.state,"change:fetching",this.render)},events:{"click .reload":function(e){e.preventDefault(),this.collection.jobs.trigger("refresh")}},render:function(){!this.children.spinner||this.children.spinner.$el.detach();var isFetching=this.model.state.get("fetching");return this.$el.html(this.compiledTemplate({fetching:isFetching,cols:this.options.cols})),this.children.spinner=this.children.spinner||new WaitSpinner,this.children.spinner.prependTo(this.$("h2")),this.children.spinner.$el.css("display",[isFetching?"inline-block":"none"]),this.children.spinner[isFetching?"start":"stop"](),this},template:'\t                <td class="col-empty odd" colspan="<%= cols %>">\t                    <div>\t                    <% if (fetching) { %>\t                        <h2><%- _("Loading").t() %></h2>\t                    <% } else { %>\t                        <h2><%- _("There are no results that match the specified criteria.").t() %></h2>\t                        <p><a href="#" class="btn reload"><%- _("Reload Page").t() %></a></p>\t                    <% } %>\t                    </div>\t                </td>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"routers/JobManager":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("shim/jquery"),__webpack_require__("routers/BaseListings"),__webpack_require__("collections/search/Jobs"),__webpack_require__("collections/services/authentication/Users"),__webpack_require__("models/shared/EAIFilterFetchData"),__webpack_require__("views/jobmanager/Master")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,BaseListingsRouter,JobsCollection,UsersCollection,EAIFilterFetchData,JobManagerView){return BaseListingsRouter.extend({initialize:function(){BaseListingsRouter.prototype.initialize.apply(this,arguments),this.setPageTitle(_("Job Manager").t()),this.loadingMessage=_("Loading...").t(),this.enableAppBar=!1,this.deferreds.stateModelSet=$.Deferred(),this.urlFilter=["^countPerPage$","^owner$","^app$","^jobStatus$","^sortDirection$","^sortKey$","^filter$"],this.uiPrefsFilter=["^countPerPage$"],this.fetchFilter=["^countPerPage$","^owner$","^app$","^jobStatus$","^sortDirection$","^sortKey$","^filter$","^offset$"],this.stateModel.set({sortKey:"dispatch_time",sortDirection:"desc",offset:0,owner:"*",jobStatus:"*",fetching:!0}),this.jobsCollection=new JobsCollection,this.usersCollection=new UsersCollection},initializeAndRenderViews:function(){var usersCollectionDeferred=this.usersCollection.fetch();$.when(usersCollectionDeferred).then(function(){this.jobMangerView=new JobManagerView({model:{application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo,state:this.stateModel},collection:{jobs:this.jobsCollection,apps:this.collection.appLocals,users:this.usersCollection}}),this.jobMangerView.render().replaceContentsOf(this.pageView.$(".main-section-body")),this.uiPrefsModel.entry.content.on("change",function(){this.populateUIPrefs()},this),this.listenTo(this.jobsCollection,"refresh remove",_.debounce(this.fetchListCollection)),this.stateModel.on("change",_.debounce(function(){var changedURLAttrs=this.stateModel.filterChangedByWildcards(this.urlFilter,{allowEmpty:!0}),changedUIPrefAttr=this.stateModel.filterChangedByWildcards(this.uiPrefsFilter,{allowEmpty:!0});changedURLAttrs&&!_.isEmpty(changedURLAttrs)&&this.model.classicUrl.save($.extend({},changedURLAttrs),{replaceState:!0}),changedUIPrefAttr&&!_.isEmpty(changedUIPrefAttr)&&this.uiPrefsModel.entry.content.set($.extend({},changedUIPrefAttr));var changedFetchAttrs=this.stateModel.filterChangedByWildcards(this.fetchFilter,{allowEmpty:!0});changedFetchAttrs&&!_.isEmpty(changedFetchAttrs)&&this.fetchListCollection()}.bind(this)))}.bind(this))},page:function(locale,app,page){BaseListingsRouter.prototype.page.apply(this,arguments),$.when(this.uiPrefsDeferred,this.deferreds.appLocals).then(function(){var currentApp=this.model.application.get("app");this.stateModel.set({app:this.collection.appLocals.findByEntryName(currentApp)?currentApp:""}),this.stateModel.set($.extend({},this.uiPrefsModel.entry.content.filterByWildcards(this.uiPrefsFilter,{allowEmpty:!0}))),this.model.classicUrl.fetch({success:function(model,response){var urlFilters=this.model.classicUrl.filterByWildcards(this.urlFilter,{allowEmpty:!0});if(this.model.classicUrl.has("savedSearch")){var savedSearchFilter='label="'+this.model.classicUrl.get("savedSearch")+'"';urlFilters.filter?urlFilters.filter=urlFilters.filter+" "+savedSearchFilter:urlFilters.filter=savedSearchFilter,this.model.classicUrl.save({savedSearch:void 0,filter:urlFilters.filter},{replaceState:!0})}this.stateModel.set($.extend({},urlFilters)),this.deferreds.stateModelSet.resolve()}.bind(this),error:function(model,response){this.deferreds.stateModelSet.resolve()}.bind(this)})}.bind(this))},$whenFetchCollectionDependencies:function(){return $.when(this.deferreds.stateModelSet)},fetchListCollection:function(){this.stateModel.set("fetching",!0);var filter="dispatchState=*";this.stateModel.get("filter")&&(filter=filter+" AND "+this.stateModel.get("filter")),this.jobsCollection.fetchNonAutoSummaryJobs({data:{app:this.stateModel.get("app"),owner:this.stateModel.get("owner"),jobStatus:this.stateModel.get("jobStatus"),sortDirection:this.stateModel.get("sortDirection"),sortKey:this.stateModel.get("sortKey").split(","),search:filter,count:this.stateModel.get("countPerPage"),listDefaultActionArgs:!0,offset:this.stateModel.get("offset")},success:function(collection,response,options){0===collection.length&&0!==collection.paging.get("offset")&&collection.paging.get("offset")>=collection.paging.get("total")||this.stateModel.set("fetching",!1)}.bind(this)})}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/tablecontrols/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("shim/jquery"),module,__webpack_require__("views/Base"),__webpack_require__("views/jobmanager/tablecontrols/bulkactions/Master"),__webpack_require__("views/shared/controls/SyntheticSelectControl"),__webpack_require__("views/shared/basemanager/SearchableDropdown/Master"),__webpack_require__("views/shared/controls/TextControl"),__webpack_require__("views/shared/CollectionCount"),__webpack_require__("views/shared/DropDownMenu"),__webpack_require__("views/shared/CollectionPaginator"),__webpack_require__("views/shared/delegates/Dock"),__webpack_require__("collections/services/AppLocals"),__webpack_require__("collections/services/authentication/Users"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,module,Base,BulkActionsView,SyntheticSelectControl,SearchableDropdown,TextControl,CollectionCount,DropDownMenu,CollectionPaginator,Dock,AppLocalsCollection,UsersCollection,splunkUtil){return Base.extend({moduleId:module.id,initialize:function(){Base.prototype.initialize.apply(this,arguments),this.children.totalCount=new CollectionCount({countLabel:_("Jobs").t(),collection:this.collection.jobs,tagName:"span"}),this.collection.appsSearch=new AppLocalsCollection,this.children.selectAppFilter=new SearchableDropdown({prompt:_("Filter by app").t(),searchPrompt:_("Lookup an app").t(),multiSelect:!1,label:_("App: ").t(),model:this.model.state,modelAttribute:"app",staticOptions:[{label:_("All").t(),value:""}],collection:{search:this.collection.appsSearch,listing:this.collection.apps},toggleClassName:"btn-pill"}),this.collection.usersSearch=new UsersCollection,this.children.selectOwnerFilter=new SearchableDropdown({prompt:_("Filter by owner").t(),searchPrompt:_("Lookup an owner").t(),multiSelect:!1,label:_("Owner: ").t(),model:this.model.state,modelAttribute:"owner",staticOptions:[{label:_("All").t(),value:""}],collection:{search:this.collection.usersSearch,listing:this.collection.users},toggleClassName:"btn-pill"});var statusItems=[{label:_("All").t(),value:"*"},{label:_("Queued").t(),value:"queued"},{label:_("Parsing").t(),value:"parsing"},{label:_("Running").t(),value:"running"},{label:_("Backgrounded").t(),value:"background"},{label:_("Paused").t(),value:"paused"},{label:_("Finalizing").t(),value:"finalizing"},{label:_("Done").t(),value:"done"},{label:_("Finalized").t(),value:"finalized"},{label:_("Failed").t(),value:"failed"}];this.children.selectJobStatusFilter=new SyntheticSelectControl({toggleClassName:"btn-pill",menuWidth:"narrow",model:this.model.state,modelAttribute:"jobStatus",items:statusItems,label:_("Status: ").t()}),this.children.textFilter=new TextControl({className:"control name-filter-container",model:this.model.state,modelAttribute:"filter",inputClassName:"search-query",placeholder:_("filter").t(),canClear:!0,updateOnKeyUp:250}),this.children.count=new SyntheticSelectControl({model:this.model.state,modelAttribute:"countPerPage",items:[{value:"10",label:_("10 Per Page").t()},{value:"20",label:_("20 Per Page").t()},{value:"50",label:_("50 Per Page").t()}],menuWidth:"narrow",toggleClassName:"btn-pill",nearestValue:!0,additionalClassNames:"count-per-page"}),this.children.bulkAction=new BulkActionsView({model:{application:this.model.application},collection:{selectedJobs:this.collection.selectedJobs}}),this.children.collectionPaginator=new CollectionPaginator({collection:this.collection.jobs,model:this.model.state,countAttr:"countPerPage"}),this.activate()},startListening:function(){this.listenTo(this.model.state,"change:app change:owner change:filter change:jobStatus",function(){this.model.state.set("offset",0)})},render:function(){if(!this.el.innerHTML){this.$el.html(this.compiledTemplate());var $filtersContainer=this.$(".filters-container"),$selectedContainer=this.$(".selected-container");this.children.totalCount.render().appendTo($filtersContainer),this.model.user.canUseApps()&&this.children.selectAppFilter.render().appendTo($filtersContainer),this.children.selectOwnerFilter.render().appendTo($filtersContainer),this.children.selectJobStatusFilter.render().appendTo($filtersContainer),
this.children.textFilter.render().appendTo($filtersContainer),this.children.count.render().appendTo($filtersContainer),this.children.bulkAction.render().appendTo($selectedContainer),this.children.collectionPaginator.render().appendTo($selectedContainer),this.children.tableDock=new Dock({el:this.el,affix:".filters-container, .selected-container"})}return this},template:'\t                <div class="filters-container"></div>\t                <div class="selected-container"></div>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/tablecontrols/bulkactions/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),__webpack_require__("shim/jquery"),module,__webpack_require__("views/Base"),__webpack_require__("views/jobmanager/tablecontrols/bulkactions/ConfirmDeleteModal"),__webpack_require__("views/shared/DropDownMenu"),__webpack_require__("views/shared/JobNotFoundModal"),__webpack_require__("views/shared/TouchJobModal"),__webpack_require__("stubs/i18n"),__webpack_require__("shim/splunk.util")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,module,Base,ConfirmDelete,DropDownMenu,JobNotFound,TouchJob,i18n,splunkUtil){return Base.extend({moduleId:module.id,initialize:function(){Base.prototype.initialize.apply(this,arguments),this.children.bulkActionControls=new DropDownMenu({className:"pull-left bulk-action-controls",label:_("Edit Selected").t(),items:this.getBulkActionItems(),dropdownClassName:"dropdown-menu-narrow"}),this.activate()},getBulkActionItems:function(){var items=[[{label:_("Resume").t(),value:"resume",enabled:this.hasEditPerms(this.collection.selectedJobs.getPausedJobs())},{label:_("Pause").t(),value:"pause",enabled:this.hasEditPerms(this.collection.selectedJobs.getRunningJobs())},{label:_("Stop").t(),value:"stop",enabled:this.hasEditPerms(this.collection.selectedJobs.getNotDoneJobs())}],[{label:_("Extend Expiration").t(),value:"touch",enabled:this.hasEditPerms(this.collection.selectedJobs.models)},{label:_("Delete").t(),value:"delete",enabled:this.hasEditPerms(this.collection.selectedJobs.models)}]];return items},hasEditPerms:function(jobsArray){return _.some(jobsArray,function(job){return job.entry.acl.canWrite()})},startListening:function(){this.listenTo(this.collection.selectedJobs,"add remove reset change",_.debounce(this.render)),this.listenTo(this.children.bulkActionControls,"itemClicked",this.handleBulkMenuItemClicked)},handleBulkMenuItemClicked:function(action){switch(action){case"delete":this.children.confirmDelete=new ConfirmDelete({collection:{selectedJobs:this.collection.selectedJobs},onHiddenRemove:!0}),this.listenTo(this.children.confirmDelete,"deleteAll",function(){var $deleteDeferred=this.collection.selectedJobs.deleteAll(this.createBulkOptions(!0));$.when($deleteDeferred).then(function(){this.children.confirmDelete.hide()}.bind(this))}),this.children.confirmDelete.render().appendTo($("body")),this.children.confirmDelete.show();break;case"touch":this.collection.selectedJobs.touchAll(this.createBulkOptions(!1,{title:_("Extend Job Expiration").t(),action:"extended"}));break;case"pause":this.collection.selectedJobs.pauseAll(this.createBulkOptions(!1,{action:"paused"}));break;case"resume":this.collection.selectedJobs.resumeAll(this.createBulkOptions(!1,{action:"resumed"}));break;case"stop":this.collection.selectedJobs.stopAll(this.createBulkOptions(!1,{action:"stopped"}))}},createBulkOptions:function(ignoreErrors,options){return options=options||{},options.success=function(collection,response,options){if(!ignoreErrors&&0!==response.messages.length){var hasNotFoundError=_.some(response.messages,function(message){return 404===message.status});if(hasNotFoundError)return this.children.jobNotFound=new JobNotFound({model:{application:this.model.application},collection:{searchJobs:this.collection.selectedJobs},title:options.title,action:options.action,onHiddenRemove:!0}),this.children.jobNotFound.render().appendTo($("body")),void this.children.jobNotFound.show()}this.collection.selectedJobs.trigger("refresh"),"extended"===options.action&&(this.children.touch=new TouchJob({model:{application:this.model.application},onHiddenRemove:!0}),this.children.touch.render().appendTo($("body")),this.children.touch.show())}.bind(this),options},toggleBulkEdit:function(){0===this.collection.selectedJobs.length?this.children.bulkActionControls.disable():(this.children.bulkActionControls.enable(),this.children.bulkActionControls.setItems(this.getBulkActionItems()))},render:function(){return this.$el.html()||(this.children.bulkActionControls.render().appendTo(this.$el),this.$el.append('<span class="selected-count"></span>')),this.$(".selected-count").html(this.compiledTemplate({_:_,i18n:i18n,splunkUtil:splunkUtil,selectedCount:this.collection.selectedJobs.length})),this.toggleBulkEdit(),this},template:'\t                <% if (selectedCount) { %>\t                    <%- splunkUtil.sprintf(i18n.ungettext("%s Job selected", "%s Jobs selected", selectedCount), i18n.format_decimal(selectedCount)) %>\t                <% } %>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/tablecontrols/bulkactions/ConfirmDeleteModal":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__("require/underscore"),__webpack_require__("require/backbone"),module,__webpack_require__("views/Base"),__webpack_require__("views/shared/Modal"),__webpack_require__("shim/splunk.util"),__webpack_require__("stubs/i18n")],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Backbone,module,Base,Modal,splunkUtil,i18n){return Modal.extend({moduleId:module.id,initialize:function(){Base.prototype.initialize.apply(this,arguments)},events:$.extend({},Modal.prototype.events,{"click .btn-primary":function(e){this.trigger("deleteAll"),e.preventDefault()}}),render:function(){var template=this.compiledTemplate({numOfJobs:this.collection.selectedJobs.length,i18n:i18n,splunkUtil:splunkUtil});return this.$el.html(Modal.TEMPLATE),this.$(Modal.HEADER_TITLE_SELECTOR).html(_("Delete Jobs").t()),this.$(Modal.BODY_SELECTOR).append(template),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_CANCEL),this.$(Modal.FOOTER_SELECTOR).append(Modal.BUTTON_DELETE),this},template:'\t                <p>\t                    <%- splunkUtil.sprintf(i18n.ungettext("Are you sure that you want to delete %s job?", "Are you sure that you want to delete %s jobs?", numOfJobs), i18n.format_decimal(numOfJobs)) %>\t                </p>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"views/jobmanager/Master.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(1099);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(14)(content,{});content.locals&&(module.exports=content.locals)},"views/jobmanager/table/MoreInfo":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("require/underscore"),module,__webpack_require__("views/Base"),__webpack_require__("uri/route"),__webpack_require__("util/time"),__webpack_require__("shim/splunk.util"),__webpack_require__("stubs/i18n")],__WEBPACK_AMD_DEFINE_RESULT__=function(_,module,BaseView,route,time_utils,splunkUtil,i18n){return BaseView.extend({moduleId:module.id,tagName:"tr",className:"more-info",initialize:function(options){options=options||{};var defaults={cols:1};_.defaults(options,defaults),BaseView.prototype.initialize.call(this,options)},render:function(){var search,savedSearchId=this.model.job.getSavedSearchId(),earliestTimeISO=this.model.job.entry.content.get("earliestTime"),isRealTime=this.model.job.isRealtime(),latestTimeISO=this.model.job.latestTimeSafe(),linkData={data:{sid:this.model.job.id}};savedSearchId?(linkData.data.s=savedSearchId,search=this.model.job.entry.content.get("label")):search=splunkUtil.stripLeadingSearchCommand(this.model.job.getSearch());var currentAppName=this.model.application.get("app"),alternateAppName="system"!==currentAppName&&"launcher"!==currentAppName?currentAppName:"search",jobAppName=this.model.job.entry.acl.get("app"),jobApp=_.find(this.collection.apps.models,function(app){return app.entry.get("name")===jobAppName}),openInAppName=jobApp&&jobApp.entry.content.get("visible")?jobAppName:alternateAppName;return this.$el.html(this.compiledTemplate({link:route.search(this.model.application.get("root"),this.model.application.get("locale"),openInAppName,linkData),search:search,earliest_date:this.model.job.isOverAllTime()?null:time_utils.isoToDateObject(earliestTimeISO),latest_date:latestTimeISO?time_utils.isoToDateObject(latestTimeISO):new Date(0),isRealTime:isRealTime,cols:this.options.cols,splunkUtil:splunkUtil,time_utils:time_utils,savedSearchId:savedSearchId,i18n:i18n})),this},template:'\t                <td class="details" colspan="<%= cols %>">\t                    <% if (search) { %>\t                        <a href="<%= link %>" class="search<% if (savedSearchId) { %> saved-search<% }%>"><%- search %></a>\t                        <span class="timerange">\t                            <% if (isRealTime) { %>\t                                <%- _("[real-time]").t() %>\t                            <% } else if (earliest_date) { %>\t                                <%- splunkUtil.sprintf(_("[%s to %s]").t(), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(earliest_date)), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(latest_date))) %>\t                            <% } else { %>\t                                <%- splunkUtil.sprintf(_("[before %s]").t(), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(latest_date))) %>\t                            <% } %>\t                        </span>\t                    <% } %>\t                </td>\t            '})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});